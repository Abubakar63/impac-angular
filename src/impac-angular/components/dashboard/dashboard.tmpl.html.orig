<!-- DASHBOARD -->
<<<<<<< HEAD
<div class="analytics">
  <div mno-star-wizard=true modal-open='starWizardModal.value'></div>

  <div id="head-title" class='row'>

    <!-- Title and Dashboard selection -->
    <div class="col-md-6 col-sm-12">

      <h2>
        <img ng-src="{{impacTitleLogo}}" style="float: left; margin-right: 15px;" />
        <!-- <div class="text-info" style="padding-top:12px; height: 48px;">Beta</div> -->
        <div class="text-info" style="padding-top:12px; height: 48px;"></div>
      </h2>

      <h4 ng-hide='showChooseDhbMsg' class='dashboard-title' ng-click="toogleShowDashboardsList()">
        {{currentDhb.full_name}}
        <i class="fa fa-chevron-down" style="font-size: 18px;"></i>
        <i ng-hide="showChangeDhbName" class="fa fa-pencil" tooltip="Change name" tooltip-animation="false" ng-click="toogleShowChangeDhbName(currentDhb)"/>
      </h4>

      <div collapse="!showDashboardsList" class='dashboard-select'>
        <div ng-hide="dhb.id == currentDhbId" class='option' ng-repeat="dhb in dashboardsList">
          <span class="name" ng-click="selectDashboard(dhb.id)">{{dhb.full_name}}</span>
          <i ng-hide="showChangeDhbName" class="fa fa-pencil" tooltip="Change name" tooltip-animation="false" ng-click="toogleShowChangeDhbName(dhb)"/>
        </div>

        <div ng-show="showCreateDhb" class="option create" ng-click="modal.createDashboard.open() ; showChangeDhbName = false"><i class="fa fa-plus" /> Create Dashboard</div>
      </div>

      <div ng-show="showChangeDhbName" class="change-name">
        <p>Change dashboard name:</p>
        <input type="text" class="form-control" id="changeDhbNameInput" ng-model="dashboardToChange.name" ng-keyup="checkChangeDhbNameAndConfirm($event)"/>
        <button class="btn btn-sm btn-default" ng-click="showChangeDhbName=false">Cancel</button>
        <button class="btn btn-sm btn-success" style="margin-left: 10px" ng-click="updateDhbName()">Confirm</button>
      </div>


      <p ng-hide='showChooseDhbMsg' class="data-source-label">
        <small><b>Source:</b> {{currentDhb.organizationsNames}}</small>
      </p>

    </div>

    <!-- Buttons -->
    <div class='buttons-bar col-md-6 col-sm-12'>
      <button ng-click="toogleAccessibilityMode()" class='btn btn-info' ng-disabled="showWidgetSelector"><span class='fa fa-wheelchair'></span></button>
      <button ng-click="showWidgetSelector = true" class='btn btn-warning' ng-show="showCreateWidget" ng-disabled="showWidgetSelector"><span class='fa fa-plus'></span> Add Widget</button>
      <!-- <button ng-click="modal.createDashboard.open()" class='btn btn-warning' ng-show="showCreateDhb"><span class='fa fa-pencil-square-o'></span> Create Dashboard</button>
      <button id='data-upload-wizard' ng-click='openStarWizard()' class='btn btn-success hidden-xs' ><span class='fa fa-upload'></span> Data Upload</button>
      <button ng-click="modal.deleteDashboard.open()" class='btn btn-danger hidden-xs' ng-show="showDeleteDhb" tooltip="Delete Dashboard"><span class='fa fa-trash-o'></span> </button> -->
    </div>
=======
<div class="analytics module__dashboard">
  <div mno-star-wizard='true' modal-open='starWizardModal.value'></div>


  <!-- Title and Dashboard selection -->
  <div class="row head-title">
    <!-- Heading TODO: add these variables to dashboard ctrl -->
    <h2 ng-show="{{showDhbHeading}}">
      <img ng-src="{{impacTitleLogo}}" style="float: left; margin-right: 15px;" />
      <div class="text-info" style="padding-top:12px; height: 48px;">{{dhbHeadingText}}</div>
      <div class="text-info" style="padding-top:12px; height: 48px;"></div>
    </h2>
>>>>>>> xaun/develop

    <dashboard-selector id="module__dashboard-selector"></dashboard-selector>
  </div>

  <!-- Widgets selection container TODO: move to wrapper directive, encapsulating logic -->
  <div id="widget-selector" collapse="!showWidgetSelector">
    <div class="title">
      <i class="fa fa-times-circle" ng-click="showWidgetSelector = false"/>
      <span class="badge confirmation">Widget added!</span>
      Select the widgets you want to add to your dashboard.
    </div>

    <div class="row top-container">
      <div class="col-md-3 categories">
        <div class="row header">
          All categories
        </div>
        <div class="row lines">
          <div class="col-md-12" style="padding: 3px 12px;">
            <p ng-click="selectedCategory='accounts'" ng-class="isCategorySelected('accounts') ? 'selected' : none">Accounting</p>
            <p ng-click="selectedCategory='invoices'" ng-class="isCategorySelected('invoices') ? 'selected' : none">Invoicing</p>
            <p ng-click="selectedCategory='hr'" ng-class="isCategorySelected('hr') ? 'selected' : none">HR / Payroll</p>
            <p ng-click="selectedCategory='sales'" ng-class="isCategorySelected('sales') ? 'selected' : none">Sales</p>
          </div>
        </div>

        <div class="arrow" ng-style="getSelectedCategoryTop()">
          <div class="square" />
          <i class="fa fa-caret-right" />
        </div>

      </div>

      <div class="col-md-9 widgets">
        <div class="row header">
          {{getSelectedCategoryName() | titleize}}
        </div>
        <div class="row lines">
          <div class="col-md-4" ng-repeat="widgetPattern in getWidgetsForSelectedCategory()" style="padding: 0px 8px;">
            <p ng-click="addWidget(widgetPattern.path, widgetPattern.metadata)" tooltip="{{widgetPattern.desc}}" tooltip-placement="{{$index < 9 ? 'bottom' : 'top'}}" tooltip-animation="false"  tooltip-append-to-body="true" tooltip-class="impac-widget-selector-tooltip"><i class="fa fa-{{widgetPattern.icon}}" /> {{widgetPattern.name}} <i class="fa fa-plus-circle" /></p>
          </div>
        </div>
      </div>
    </div>

    <div class="bottom">
      <span class="suggestion">
        Can't find the widget you're looking for? <a ng-click="modal.widgetSuggestion.open()">Give us your suggestions here!</a>
      </span>
    </div>
  </div>


  <!-- Errors -->
  <div class="alert alert-error" ng-show="errors">
    <button class="close" ng-click="errors=''">×</button>
    <ul>
      <li ng-repeat="error in errors">{{error}}</li>
    </ul>
  </div>

  <div class='spacer1'></div>

  <div id="no-widget-container" class="text-center ng-hide" ng-show='(showChooseDhbMsg || showNoWidgetsMsg) && !isLoading'>

    <img ng-src="{{impacDashboardBackground}}" class="bg">

    <div class="impac-info-message">
      <!-- First Time Dashboard Creation -->
      <div class="ng-hide" ng-show='showChooseDhbMsg && !isLoading'>
        <div class='hidden-xs'>
          <div class='spacer4'></div>
          <div class="row">
            <div class="col-md-8 col-md-offset-2">
              <div class="testimonial promo-dark">
                <p><b>It's time to add a reporting dashboard!</b></p><p>In 2 clicks, you'll be able to visualize how your business is performing.</p>
              </div>
            </div>
          </div>
          <div class='spacer2'></div>
        </div>
        <div class="align-center">
          <button ng-click="modal.createDashboard.open()" class='btn btn-lg btn-warning'><span class='fa fa-plus'></span> Create a Dashboard!</button>
        </div>
      </div>

      <!-- Empty Dashboard -->
      <div class="ng-hide" ng-show='showNoWidgetsMsg && !isLoading'>
        <div class='hidden-xs'>
          <div class='spacer4'></div>
          <div class="row">
            <div class="col-md-8 col-md-offset-2">
              <div class="testimonial promo-dark">
                <p><b>Now it's time to select the metrics you want to see!</b></p><p>Add widgets to your dashboard to help make an Impac!™ to your business.</p>
              </div>
            </div>
          </div>
          <div class="spacer2"></div>
        </div>
        <div class="align-center">
          <button ng-disabled="showWidgetSelector" ng-click="showWidgetSelector=true" class='btn btn-lg btn-warning'><span class='fa fa-plus'></span> Add a new Widget</button>
        </div>
      </div>
    </div>
  </div>

  <!-- First Time Dashboard Creation -->
  <div class="row text-center" ng-show='showChooseDhbMsg && !isLoading'>
    <div class="spacer2 hidden-xs"></div>
    <div class='col-md-8 col-md-offset-2'>
      <p class="text-muted"><small><em>Note: dashboards you create will only be accessible by you. Dashboard sharing across users will be added soon.</em></small></p>
    </div>
  </div>

  <!-- Widgets -->
  <div class='row'>
    <div ui:sortable="sortableOptions" ng-model="currentDhb.widgets" id="widgets-container">
      <div impac-widget widget="widget" is-accessibility="accessibility" parent-dashboard="currentDhb" ng-repeat="widget in currentDhb.widgets" class="widget-item" ng-class="widget.getColClass()" />
    </div>
  </div>
</div>
