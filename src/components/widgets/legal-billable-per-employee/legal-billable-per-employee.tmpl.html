<!--
  Component generated by Impac! Widget Generator!
-->
<div widget-legal-billable-per-employee>
  <!-- Settings Panel -->
  <div ng-show="widget.isEditMode" class="edit">
    <h4>Widget settings</h4>

    <div setting-organizations parent-widget="widget" class="part" deferred="::orgDeferred" />

    <!-- Buttons displayed on the lower  -->
    <div class="bottom-buttons" align="right">
      <button class="btn btn-default" ng-click="initSettings()">Cancel</button>
      <button class="btn btn-warning" ng-click="updateSettings()">Save</button>
    </div>
  </div>

  <!-- Content Panel -->
  <div ng-hide="widget.isEditMode">
    <div class="row">
      <div class="col-md-6 left-panel">
        <div class="table-container">
          <table class="table">
            <tr class="header">
              <th>Employees</th>
              <th>Title</th>
            </tr>
            <tr ng-repeat="employee in employees.list" ng-click="toggleEmployee(employee)" class="entry clickable" ng-class="{ selected: employee.display }">
              <td>{{employee.firstname}} {{employee.lastname}}</td>
              <td>{{employee.title}}</td>
            </tr>
          </table>
        </div>
      </div>

      <div class="col-md-6 right-panel">
        <div ng-if="employees.selected">
          <div class="row period-container">
            <div class="col-xs-6 text-left price">
              {{ employees.selected.billed[periods.selected] | mnoCurrency : widget.metadata.currency }}
            </div>

            <div class="col-xs-6 text-right">
              Show total billed for current
              <select ng-model="periods.selected" ng-options="period.value as period.label for period in periods.list" ng-change="widget.format()" />
            </div>
          </div>

          <div class="table-container">
            <table class="table">
              <tr class="header">
                <th>Customers</th>
                <th class="text-right">Total billed</th>
              </tr>
              <tr ng-repeat="customer in employees.selected.customers" class="entry">
                <td>{{ customer.name }}</td>
                <td class="text-right">{{ customer.billed[periods.selected] | mnoCurrency : widget.metadata.currency }}</td>
              </tr>
            </table>
          </div>
        </div>

        <div ng-hide="employees.selected" class="text-center">
          <p>Click on an employee to display its billable details</p>
        </div>
      </div>
    </div>
  </div>
</div>
