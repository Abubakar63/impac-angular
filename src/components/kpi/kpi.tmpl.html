<div class="tile kpi" ng-class="{ 'vertical-scroll': showEditTarget }">
  <div ng-hide="showEditTarget">
    <div>
      <small class="kpi-title" ng-if="::kpi.static">{{::kpi.name}}</small>
      <small class="kpi-title" ng-if="::!kpi.static" editable-text="tmp.kpiName" buttons="no" onaftersave="updateName()">{{kpi.name}}</small>
      <div class="kpi-watch" ng-if="::!kpi.static">({{::kpi.element_watched}})</div>
      <span class="kpi-value">{{kpi.data.real_value}}</span>

      <div class="kpi-alert" ng-if="kpi.data.achieved == false && !editMode">{{ isTargetReverse() ? 'over' : 'below'}} {{::kpi.target.limit}}</div>

      <div class="kpi-alert" ng-show="editMode" ng-click="displayEditTarget()">Edit</div>
      <div class="kpi-alert kpi-close" ng-show="editMode" ng-click="deleteKpi()">x</div>
    </div>
  </div>

  <div ng-if="showEditTarget">
    <small class="kpi-title" ng-if="::kpi.static">{{::kpi.name}}</small>

    KPI target:

    <select class="form-control input-sm" ng-model="kpi.target.reverse">
      <option value="false" ng-selected="!isTargetReverse()">over</option>
      <option value="true" ng-selected="isTargetReverse()">below</option>
    </select>

    <input class="form-control input-sm" type="text" ng-model="kpi.target.limit" />


    <div ng-repeat="param in extraParams track by $index">
      <div class="param-name">Select {{param.param | titleize}}:</div>
      <select class="form-control input-sm" ng-model="kpi.extra_param" ng-options="value.id as value.label for value in param.values">
        <option value="">- select account -</option>
      </select>
    </div>

    <div class="kpi-alert static" ng-click="updateSettings()"><a href="">Save</a></div>
  </div>

</div>
