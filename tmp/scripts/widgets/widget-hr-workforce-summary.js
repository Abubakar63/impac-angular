(function () {
var module;

module = angular.module('maestrano.analytics.widget-hr-workforce-summary', ['maestrano.assets']);

module.controller('WidgetHrWorkforceSummaryCtrl', [
  '$scope', 'DhbAnalyticsSvc', 'ChartFormatterSvc', '$filter', function($scope, DhbAnalyticsSvc, ChartFormatterSvc, $filter) {
    var getSettingsCount, w;
    w = $scope.widget;
    w.initContext = function() {
      if ($scope.isDataFound = (w.content.summary != null) && !_.isEmpty(w.content.summary.data)) {
        $scope.periodOptions = [
          {
            label: 'Yearly',
            value: 'yearly'
          }, {
            label: 'Monthly',
            value: 'monthly'
          }, {
            label: 'Weekly',
            value: 'weekly'
          }, {
            label: 'Hourly',
            value: 'hourly'
          }
        ];
        $scope.period = _.find($scope.periodOptions, function(o) {
          return o.value === w.content.total.period.toLowerCase();
        }) || $scope.periodOptions[0];
        $scope.filterOptions = [
          {
            label: 'Gender',
            value: 'gender'
          }, {
            label: 'Age Range',
            value: 'age_range'
          }, {
            label: 'Salary Range',
            value: 'salary_range'
          }, {
            label: 'Job Title',
            value: 'job_title'
          }
        ];
        return $scope.filter = _.find($scope.filterOptions, function(o) {
          return o.value === w.content.summary.filter;
        }) || $scope.filterOptions[0];
      }
    };
    w.format = function() {
      var barData, barOptions, pieData, pieOptions;
      if ($scope.isDataFound) {
        if ($scope.filter.value === 'salary_range') {
          barData = {
            labels: _.map(w.content.summary.data, function(elem) {
              return $scope.formatSalaryRange(elem);
            }),
            values: _.map(w.content.summary.data, function(elem) {
              return elem.value;
            })
          };
          barOptions = {
            showTooltips: false,
            showXLabels: false,
            barDatasetSpacing: 15
          };
          return w.chart = ChartFormatterSvc.barChart(barData, barOptions);
        } else {
          pieData = _.map(w.content.summary.data, function(elem) {
            return {
              label: elem.label,
              value: elem.value
            };
          });
          pieOptions = {
            showTooltips: true,
            percentageInnerCutout: 50,
            tooltipFontSize: 12
          };
          return w.chart = ChartFormatterSvc.pieChart(pieData, pieOptions);
        }
      }
    };
    $scope.getTotalWorkforce = function() {
      if ($scope.isDataFound) {
        return w.content.total.amount;
      }
    };
    $scope.getNumberOfEmployees = function() {
      if ($scope.isDataFound) {
        return w.content.total.employees;
      }
    };
    $scope.getCurrency = function() {
      if ($scope.isDataFound) {
        return w.content.total.currency;
      }
    };
    $scope.formatSalaryRange = function(aRange) {
      var range1, range2;
      range1 = $filter('mnoCurrency')(aRange.label.split('-')[0], aRange.currency, false);
      range2 = $filter('mnoCurrency')(aRange.label.split('-')[1], aRange.currency, false);
      return [range1, range2].join(" - ");
    };
    $scope.getColorByIndex = function(index) {
      return ChartFormatterSvc.getColor(index);
    };
    getSettingsCount = function() {
      if (w.settings != null) {
        return w.settings.length;
      } else {
        return 0;
      }
    };
    $scope.$watch(getSettingsCount, function(total) {
      if (total === 4) {
        return w.loadContent();
      }
    });
    return w;
  }
]);

module.directive('widgetHrWorkforceSummary', function() {
  return {
    restrict: 'A',
    link: function(scope, element) {
      element.addClass("hr");
      return element.addClass("workforce-summary");
    },
    controller: 'WidgetHrWorkforceSummaryCtrl'
  };
});
})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndpZGdldHMvd2lkZ2V0LWhyLXdvcmtmb3JjZS1zdW1tYXJ5LmpzLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBOztBQUFBLE1BQUEsR0FBUyxPQUFPLENBQUMsTUFBUixDQUFlLGlEQUFmLEVBQWlFLENBQUMsa0JBQUQsQ0FBakU7O0FBRVQsTUFBTSxDQUFDLFVBQVAsQ0FBa0IsOEJBQWxCLEVBQWlEO0VBQy9DLFFBRCtDLEVBQ3JDLGlCQURxQyxFQUNsQixtQkFEa0IsRUFDRyxTQURILEVBRS9DLFNBQUMsTUFBRCxFQUFTLGVBQVQsRUFBMEIsaUJBQTFCLEVBQTZDLE9BQTdDO0FBRUUsUUFBQTtJQUFBLENBQUEsR0FBSSxNQUFNLENBQUM7SUFFWCxDQUFDLENBQUMsV0FBRixHQUFnQixTQUFBO01BQ2QsSUFBRyxNQUFNLENBQUMsV0FBUCxHQUFxQiwyQkFBQSxJQUFzQixDQUFDLENBQUMsQ0FBQyxPQUFGLENBQVUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBNUIsQ0FBL0M7UUFFRSxNQUFNLENBQUMsYUFBUCxHQUF1QjtVQUNyQjtZQUFDLEtBQUEsRUFBTyxRQUFSO1lBQWtCLEtBQUEsRUFBTyxRQUF6QjtXQURxQixFQUVyQjtZQUFDLEtBQUEsRUFBTyxTQUFSO1lBQW1CLEtBQUEsRUFBTyxTQUExQjtXQUZxQixFQUdyQjtZQUFDLEtBQUEsRUFBTyxRQUFSO1lBQWtCLEtBQUEsRUFBTyxRQUF6QjtXQUhxQixFQUlyQjtZQUFDLEtBQUEsRUFBTyxRQUFSO1lBQWtCLEtBQUEsRUFBTyxRQUF6QjtXQUpxQjs7UUFNdkIsTUFBTSxDQUFDLE1BQVAsR0FBZ0IsQ0FBQyxDQUFDLElBQUYsQ0FBTyxNQUFNLENBQUMsYUFBZCxFQUE2QixTQUFDLENBQUQ7aUJBQzNDLENBQUMsQ0FBQyxLQUFGLEtBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLFdBQXZCLENBQUE7UUFEZ0MsQ0FBN0IsQ0FB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R0FBbkIsQ0FBd0IsQ0FBQSxDQUFBLENBQS9DLEVBQWtELE1BQU0sQ0FBQyxRQUF6RCxFQUFrRSxLQUFsRTtNQUNULE1BQUEsR0FBUyxPQUFBLENBQVEsYUFBUixDQUFBLENBQXVCLE1BQU0sQ0FBQyxLQUFLLENBQUMsS0FBYixDQUFtQixHQUFuQixDQUF3QixDQUFBLENBQUEsQ0FBL0MsRUFBa0QsTUFBTSxDQUFDLFFBQXpELEVBQWtFLEtBQWxFO0FBQ1QsYUFBTyxDQUFDLE1BQUQsRUFBUSxNQUFSLENBQWUsQ0FBQyxJQUFoQixDQUFxQixLQUFyQjtJQUhrQjtJQUszQixNQUFNLENBQUMsZUFBUCxHQUF5QixTQUFDLEtBQUQ7YUFDdkIsaUJBQWlCLENBQUMsUUFBbEIsQ0FBMkIsS0FBM0I7SUFEdUI7SUFVekIsZ0JBQUEsR0FBbUIsU0FBQTtNQUNqQixJQUFHLGtCQUFIO0FBQ0UsZUFBTyxDQUFDLENBQUMsUUFBUSxDQUFDLE9BRHBCO09BQUEsTUFBQTtBQUdFLGVBQU8sRUFIVDs7SUFEaUI7SUFPbkIsTUFBTSxDQUFDLE1BQVAsQ0FBYyxnQkFBZCxFQUFnQyxTQUFDLEtBQUQ7TUFDOUIsSUFBbUIsS0FBQSxLQUFTLENBQTVCO2VBQUEsQ0FBQyxDQUFDLFdBQUYsQ0FBQSxFQUFBOztJQUQ4QixDQUFoQztBQUdBLFdBQU87RUEzRlQsQ0FGK0M7Q0FBakQ7O0FBZ0dBLE1BQU0sQ0FBQyxTQUFQLENBQWlCLDBCQUFqQixFQUE2QyxTQUFBO0FBQzNDLFNBQU87SUFDTCxRQUFBLEVBQVUsR0FETDtJQUVMLElBQUEsRUFBTSxTQUFDLEtBQUQsRUFBUSxPQUFSO01BQ0osT0FBTyxDQUFDLFFBQVIsQ0FBaUIsSUFBakI7YUFDQSxPQUFPLENBQUMsUUFBUixDQUFpQixtQkFBakI7SUFGSSxDQUZEO0lBS0osVUFBQSxFQUFZLDhCQUxSOztBQURvQyxDQUE3QyIsImZpbGUiOiJ3aWRnZXRzL3dpZGdldC1oci13b3JrZm9yY2Utc3VtbWFyeS5qcy5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdtYWVzdHJhbm8uYW5hbHl0aWNzLndpZGdldC1oci13b3JrZm9yY2Utc3VtbWFyeScsWydtYWVzdHJhbm8uYXNzZXRzJ10pXG5cbm1vZHVsZS5jb250cm9sbGVyKCdXaWRnZXRIcldvcmtmb3JjZVN1bW1hcnlDdHJsJyxbXG4gICckc2NvcGUnLCAnRGhiQW5hbHl0aWNzU3ZjJywgJ0NoYXJ0Rm9ybWF0dGVyU3ZjJywgJyRmaWx0ZXInLFxuICAoJHNjb3BlLCBEaGJBbmFseXRpY3NTdmMsIENoYXJ0Rm9ybWF0dGVyU3ZjLCAkZmlsdGVyKSAtPlxuXG4gICAgdyA9ICRzY29wZS53aWRnZXRcblxuICAgIHcuaW5pdENvbnRleHQgPSAtPlxuICAgICAgaWYgJHNjb3BlLmlzRGF0YUZvdW5kID0gdy5jb250ZW50LnN1bW1hcnk/ICYmICFfLmlzRW1wdHkody5jb250ZW50LnN1bW1hcnkuZGF0YSlcblxuICAgICAgICAkc2NvcGUucGVyaW9kT3B0aW9ucyA9IFtcbiAgICAgICAgICB7bGFiZWw6ICdZZWFybHknLCB2YWx1ZTogJ3llYXJseSd9LFxuICAgICAgICAgIHtsYWJlbDogJ01vbnRobHknLCB2YWx1ZTogJ21vbnRobHknfSxcbiAgICAgICAgICB7bGFiZWw6ICdXZWVrbHknLCB2YWx1ZTogJ3dlZWtseSd9LFxuICAgICAgICAgIHtsYWJlbDogJ0hvdXJseScsIHZhbHVlOiAnaG91cmx5J31cbiAgICAgICAgXVxuICAgICAgICAkc2NvcGUucGVyaW9kID0gXy5maW5kKCRzY29wZS5wZXJpb2RPcHRpb25zLCAobykgLT5cbiAgICAgICAgICBvLnZhbHVlID09IHcuY29udGVudC50b3RhbC5wZXJpb2QudG9Mb3dlckNhc2UoKVxuICAgICAgICApIHx8ICRzY29wZS5wZXJpb2RPcHRpb25zWzBdXG5cbiAgICAgICAgJHNjb3BlLmZpbHRlck9wdGlvbnMgPSBbXG4gICAgICAgICAge2xhYmVsOiAnR2VuZGVyJywgdmFsdWU6ICdnZW5kZXInfSxcbiAgICAgICAgICB7bGFiZWw6ICdBZ2UgUmFuZ2UnLCB2YWx1ZTogJ2FnZV9yYW5nZSd9LFxuICAgICAgICAgIHtsYWJlbDogJ1NhbGFyeSBSYW5nZScsIHZhbHVlOiAnc2FsYXJ5X3JhbmdlJ30sXG4gICAgICAgICAge2xhYmVsOiAnSm9iIFRpdGxlJywgdmFsdWU6ICdqb2JfdGl0bGUnfSxcbiAgICAgICAgXVxuICAgICAgICAkc2NvcGUuZmlsdGVyID0gXy5maW5kKCRzY29wZS5maWx0ZXJPcHRpb25zLCAobykgLT5cbiAgICAgICAgICBvLnZhbHVlID09IHcuY29udGVudC5zdW1tYXJ5LmZpbHRlclxuICAgICAgICApIHx8ICRzY29wZS5maWx0ZXJPcHRpb25zWzBdXG5cbiAgICB3LmZvcm1hdCA9IC0+XG4gICAgICBpZiAkc2NvcGUuaXNEYXRhRm91bmRcbiAgICAgICAgaWYgJHNjb3BlLmZpbHRlci52YWx1ZSA9PSAnc2FsYXJ5X3JhbmdlJ1xuICAgICAgICAgIGJhckRhdGEgPSB7XG4gICAgICAgICAgICBsYWJlbHM6IF8ubWFwKHcuY29udGVudC5zdW1tYXJ5LmRhdGEsIChlbGVtKSAtPlxuICAgICAgICAgICAgICAkc2NvcGUuZm9ybWF0U2FsYXJ5UmFuZ2UoZWxlbSlcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICB2YWx1ZXM6IF8ubWFwKHcuY29udGVudC5zdW1tYXJ5LmRhdGEsIChlbGVtKSAtPlxuICAgICAgICAgICAgICBlbGVtLnZhbHVlXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICAgIGJhck9wdGlvbnMgPSB7XG4gICAgICAgICAgICBzaG93VG9vbHRpcHM6IGZhbHNlLFxuICAgICAgICAgICAgc2hvd1hMYWJlbHM6IGZhbHNlLFxuICAgICAgICAgICAgYmFyRGF0YXNldFNwYWNpbmc6IDE1LFxuICAgICAgICAgIH1cbiAgICAgICAgICB3LmNoYXJ0ID0gQ2hhcnRGb3JtYXR0ZXJTdmMuYmFyQ2hhcnQoYmFyRGF0YSwgYmFyT3B0aW9ucylcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHBpZURhdGEgPSBfLm1hcCB3LmNvbnRlbnQuc3VtbWFyeS5kYXRhLCAoZWxlbSkgLT5cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbGFiZWw6IGVsZW0ubGFiZWwsXG4gICAgICAgICAgICAgIHZhbHVlOiBlbGVtLnZhbHVlLFxuICAgICAgICAgICAgfVxuICAgICAgICAgIHBpZU9wdGlvbnMgPSB7XG4gICAgICAgICAgICBzaG93VG9vbHRpcHM6IHRydWUsXG4gICAgICAgICAgICBwZXJjZW50YWdlSW5uZXJDdXRvdXQ6IDUwLFxuICAgICAgICAgICAgdG9vbHRpcEZvbnRTaXplOiAxMixcbiAgICAgICAgICB9XG4gICAgICAgICAgdy5jaGFydCA9IENoYXJ0Rm9ybWF0dGVyU3ZjLnBpZUNoYXJ0KHBpZURhdGEsIHBpZU9wdGlvbnMpXG5cbiAgICAkc2NvcGUuZ2V0VG90YWxXb3JrZm9yY2UgPSAtPlxuICAgICAgdy5jb250ZW50LnRvdGFsLmFtb3VudCBpZiAkc2NvcGUuaXNEYXRhRm91bmRcblxuICAgICRzY29wZS5nZXROdW1iZXJPZkVtcGxveWVlcyA9IC0+XG4gICAgICB3LmNvbnRlbnQudG90YWwuZW1wbG95ZWVzIGlmICRzY29wZS5pc0RhdGFGb3VuZFxuXG4gICAgJHNjb3BlLmdldEN1cnJlbmN5ID0gLT5cbiAgICAgIHcuY29udGVudC50b3RhbC5jdXJyZW5jeSBpZiAkc2NvcGUuaXNEYXRhRm91bmRcblxuICAgICRzY29wZS5mb3JtYXRTYWxhcnlSYW5nZSA9IChhUmFuZ2UpIC0+XG4gICAgICByYW5nZTEgPSAkZmlsdGVyKCdtbm9DdXJyZW5jeScpKGFSYW5nZS5sYWJlbC5zcGxpdCgnLScpWzBdLGFSYW5nZS5jdXJyZW5jeSxmYWxzZSlcbiAgICAgIHJhbmdlMiA9ICRmaWx0ZXIoJ21ub0N1cnJlbmN5JykoYVJhbmdlLmxhYmVsLnNwbGl0KCctJylbMV0sYVJhbmdlLmN1cnJlbmN5LGZhbHNlKVxuICAgICAgcmV0dXJuIFtyYW5nZTEscmFuZ2UyXS5qb2luKFwiIC0gXCIpXG5cbiAgICAkc2NvcGUuZ2V0Q29sb3JCeUluZGV4ID0gKGluZGV4KSAtPlxuICAgICAgQ2hhcnRGb3JtYXR0ZXJTdmMuZ2V0Q29sb3IoaW5kZXgpXG5cbiAgICAjIFRPRE86IFJlZmFjdG9yIG9uY2Ugd2UgaGF2ZSB1bmRlcnN0b29kIGV4YWN0bHkgaG93IHRoZSBhbmd1bGFyanMgY29tcGlsYXRpb24gcHJvY2VzcyB3b3JrczpcbiAgICAjIGluIHRoaXMgb3JkZXIsIHdlIHNob3VsZDpcbiAgICAjIDEtIGNvbXBpbGUgaW1wYWMtd2lkZ2V0IGNvbnRyb2xsZXJcbiAgICAjIDItIGNvbXBpbGUgdGhlIHNwZWNpZmljIHdpZGdldCB0ZW1wbGF0ZS9jb250cm9sbGVyXG4gICAgIyAzLSBjb21waWxlIHRoZSBzZXR0aW5ncyB0ZW1wbGF0ZXMvY29udHJvbGxlcnNcbiAgICAjIDQtIGNhbGwgd2lkZ2V0LmxvYWRDb250ZW50KCkgKGlkZWFsbHksIGZyb20gaW1wYWMtd2lkZ2V0LCBvbmNlIGEgY2FsbGJhY2sgXG4gICAgIyAgICAgYXNzZXNzaW5nIHRoYXQgZXZlcnl0aGluZyBpcyBjb21waWxlZCBhbiByZWFkeSBpcyByZWNlaXZlZClcbiAgICBnZXRTZXR0aW5nc0NvdW50ID0gLT5cbiAgICAgIGlmIHcuc2V0dGluZ3M/XG4gICAgICAgIHJldHVybiB3LnNldHRpbmdzLmxlbmd0aFxuICAgICAgZWxzZVxuICAgICAgICByZXR1cm4gMFxuXG4gICAgIyBTZXR0aW5nczogb3JnYW5pemF0aW9ucyArIHdpZHRoICsgMipwYXJhbS1zZWxlY3RvclxuICAgICRzY29wZS4kd2F0Y2ggZ2V0U2V0dGluZ3NDb3VudCwgKHRvdGFsKSAtPlxuICAgICAgdy5sb2FkQ29udGVudCgpIGlmIHRvdGFsID09IDRcblxuICAgIHJldHVybiB3XG5dKVxuXG5tb2R1bGUuZGlyZWN0aXZlKCd3aWRnZXRIcldvcmtmb3JjZVN1bW1hcnknLCAtPlxuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgbGluazogKHNjb3BlLCBlbGVtZW50KSAtPlxuICAgICAgZWxlbWVudC5hZGRDbGFzcyhcImhyXCIpXG4gICAgICBlbGVtZW50LmFkZENsYXNzKFwid29ya2ZvcmNlLXN1bW1hcnlcIilcbiAgICAsY29udHJvbGxlcjogJ1dpZGdldEhyV29ya2ZvcmNlU3VtbWFyeUN0cmwnXG4gIH1cbikiXX0=