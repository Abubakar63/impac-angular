(function () {
var module;

module = angular.module('maestrano.analytics.widget-sales-performance', ['maestrano.assets']);

module.controller('WidgetSalesPerformanceCtrl', [
  '$scope', 'DhbAnalyticsSvc', 'ChartFormatterSvc', '$filter', function($scope, DhbAnalyticsSvc, ChartFormatterSvc, $filter) {
    var getSettingsCount, w;
    w = $scope.widget;
    w.initContext = function() {
      return $scope.isDataFound = angular.isDefined(w.content) && !_.isEmpty(w.content.assignees);
    };
    $scope.getOpportunityAmount = function(anOpp) {
      var amount;
      if ($scope.isDataFound && !_.isEmpty(anOpp)) {
        if (anOpp.amount && anOpp.amount.amount) {
          amount = anOpp.amount.amount;
          return $filter('mnoCurrency')(amount, anOpp.amount.currency || 'AUD');
        } else {
          return '-';
        }
      }
    };
    getSettingsCount = function() {
      if (w.settings != null) {
        return w.settings.length;
      } else {
        return 0;
      }
    };
    $scope.$watch(getSettingsCount, function(total) {
      if (total >= 1) {
        return w.loadContent();
      }
    });
    return w;
  }
]);

module.directive('widgetSalesPerformance', function() {
  return {
    restrict: 'A',
    link: function(scope, element) {
      element.addClass("sales");
      return element.addClass("list");
    },
    controller: 'WidgetSalesPerformanceCtrl'
  };
});
})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndpZGdldHMvd2lkZ2V0LXNhbGVzLXBlcmZvcm1hbmNlLmpzLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBOztBQUFBLE1BQUEsR0FBUyxPQUFPLENBQUMsTUFBUixDQUFlLDhDQUFmLEVBQThELENBQUMsa0JBQUQsQ0FBOUQ7O0FBRVQsTUFBTSxDQUFDLFVBQVAsQ0FBa0IsNEJBQWxCLEVBQStDO0VBQzdDLFFBRDZDLEVBQ25DLGlCQURtQyxFQUNoQixtQkFEZ0IsRUFDSyxTQURMLEVBRTdDLFNBQUMsTUFBRCxFQUFTLGVBQVQsRUFBMEIsaUJBQTFCLEVBQTZDLE9BQTdDO0FBRUUsUUFBQTtJQUFBLENBQUEsR0FBSSxNQUFNLENBQUM7SUFFWCxDQUFDLENBQUMsV0FBRixHQUFnQixTQUFBO2FBQ2QsTUFBTSxDQUFDLFdBQVAsR0FBcUIsT0FBTyxDQUFDLFNBQVIsQ0FBa0IsQ0FBQyxDQUFDLE9BQXBCLENBQUEsSUFBZ0MsQ0FBQyxDQUFDLENBQUMsT0FBRixDQUFVLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBcEI7SUFEeEM7SUFHaEIsTUFBTSxDQUFDLG9CQUFQLEdBQThCLFNBQUMsS0FBRDtBQUM1QixVQUFBO01BQUEsSUFBRyxNQUFNLENBQUMsV0FBUCxJQUFzQixDQUFDLENBQUMsQ0FBQyxPQUFGLENBQVUsS0FBVixDQUExQjtRQUNFLElBQUcsS0FBSyxDQUFDLE1BQU4sSUFBZ0IsS0FBSyxDQUFDLE1BQU0sQ0FBQyxNQUFoQztVQUNFLE1BQUEsR0FBUyxLQUFLLENBQUMsTUFBTSxDQUFDO0FBQ3RCLGlCQUFPLE9BQUEsQ0FBUSxhQUFSLENBQUEsQ0FBdUIsTUFBdkIsRUFBK0IsS0FBSyxDQUFDLE1BQU0sQ0FBQyxRQUFiLElBQXlCLEtBQXhELEVBRlQ7U0FBQSxNQUFBO0FBSUUsaUJBQU8sSUFKVDtTQURGOztJQUQ0QjtJQWlCOUIsZ0JBQUEsR0FBbUIsU0FBQTtNQUNqQixJQUFHLGtCQUFIO0FBQ0UsZUFBTyxDQUFDLENBQUMsUUFBUSxDQUFDLE9BRHBCO09BQUEsTUFBQTtBQUdFLGVBQU8sRUFIVDs7SUFEaUI7SUFPbkIsTUFBTSxDQUFDLE1BQVAsQ0FBYyxnQkFBZCxFQUFnQyxTQUFDLEtBQUQ7TUFDOUIsSUFBbUIsS0FBQSxJQUFTLENBQTVCO2VBQUEsQ0FBQyxDQUFDLFdBQUYsQ0FBQSxFQUFBOztJQUQ4QixDQUFoQztBQUdBLFdBQU87RUFsQ1QsQ0FGNkM7Q0FBL0M7O0FBdUNBLE1BQU0sQ0FBQyxTQUFQLENBQWlCLHdCQUFqQixFQUEyQyxTQUFBO0FBQ3pDLFNBQU87SUFDTCxRQUFBLEVBQVUsR0FETDtJQUVMLElBQUEsRUFBTSxTQUFDLEtBQUQsRUFBUSxPQUFSO01BQ0osT0FBTyxDQUFDLFFBQVIsQ0FBaUIsT0FBakI7YUFDQSxPQUFPLENBQUMsUUFBUixDQUFpQixNQUFqQjtJQUZJLENBRkQ7SUFLSixVQUFBLEVBQVksNEJBTFI7O0FBRGtDLENBQTNDIiwiZmlsZSI6IndpZGdldHMvd2lkZ2V0LXNhbGVzLXBlcmZvcm1hbmNlLmpzLmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ21hZXN0cmFuby5hbmFseXRpY3Mud2lkZ2V0LXNhbGVzLXBlcmZvcm1hbmNlJyxbJ21hZXN0cmFuby5hc3NldHMnXSlcblxubW9kdWxlLmNvbnRyb2xsZXIoJ1dpZGdldFNhbGVzUGVyZm9ybWFuY2VDdHJsJyxbXG4gICckc2NvcGUnLCAnRGhiQW5hbHl0aWNzU3ZjJywgJ0NoYXJ0Rm9ybWF0dGVyU3ZjJywgJyRmaWx0ZXInLFxuICAoJHNjb3BlLCBEaGJBbmFseXRpY3NTdmMsIENoYXJ0Rm9ybWF0dGVyU3ZjLCAkZmlsdGVyKSAtPlxuXG4gICAgdyA9ICRzY29wZS53aWRnZXRcblxuICAgIHcuaW5pdENvbnRleHQgPSAtPlxuICAgICAgJHNjb3BlLmlzRGF0YUZvdW5kID0gYW5ndWxhci5pc0RlZmluZWQody5jb250ZW50KSAmJiAhXy5pc0VtcHR5KHcuY29udGVudC5hc3NpZ25lZXMpXG5cbiAgICAkc2NvcGUuZ2V0T3Bwb3J0dW5pdHlBbW91bnQgPSAoYW5PcHApIC0+XG4gICAgICBpZiAkc2NvcGUuaXNEYXRhRm91bmQgJiYgIV8uaXNFbXB0eShhbk9wcClcbiAgICAgICAgaWYgYW5PcHAuYW1vdW50ICYmIGFuT3BwLmFtb3VudC5hbW91bnRcbiAgICAgICAgICBhbW91bnQgPSBhbk9wcC5hbW91bnQuYW1vdW50XG4gICAgICAgICAgcmV0dXJuICRmaWx0ZXIoJ21ub0N1cnJlbmN5JykoYW1vdW50LCBhbk9wcC5hbW91bnQuY3VycmVuY3kgfHwgJ0FVRCcpXG4gICAgICAgIGVsc2VcbiAgICAgICAgICByZXR1cm4gJy0nXG5cbiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAjIFRPRE86IFJlZmFjdG9yIG9uY2Ugd2UgaGF2ZSB1bmRlcnN0b29kIGV4YWN0bHkgaG93IHRoZSBhbmd1bGFyanMgY29tcGlsYXRpb24gcHJvY2VzcyB3b3JrczpcbiAgICAjIGluIHRoaXMgb3JkZXIsIHdlIHNob3VsZDpcbiAgICAjIDEtIGNvbXBpbGUgaW1wYWMtd2lkZ2V0IGNvbnRyb2xsZXJcbiAgICAjIDItIGNvbXBpbGUgdGhlIHNwZWNpZmljIHdpZGdldCB0ZW1wbGF0ZS9jb250cm9sbGVyXG4gICAgIyAzLSBjb21waWxlIHRoZSBzZXR0aW5ncyB0ZW1wbGF0ZXMvY29udHJvbGxlcnNcbiAgICAjIDQtIGNhbGwgd2lkZ2V0LmxvYWRDb250ZW50KCkgKGlkZWFsbHksIGZyb20gaW1wYWMtd2lkZ2V0LCBvbmNlIGEgY2FsbGJhY2sgXG4gICAgIyAgICAgYXNzZXNzaW5nIHRoYXQgZXZlcnl0aGluZyBpcyBjb21waWxlZCBhbiByZWFkeSBpcyByZWNlaXZlZClcbiAgICBnZXRTZXR0aW5nc0NvdW50ID0gLT5cbiAgICAgIGlmIHcuc2V0dGluZ3M/XG4gICAgICAgIHJldHVybiB3LnNldHRpbmdzLmxlbmd0aFxuICAgICAgZWxzZVxuICAgICAgICByZXR1cm4gMFxuXG4gICAgIyBvcmdhbml6YXRpb25faWRzXG4gICAgJHNjb3BlLiR3YXRjaCBnZXRTZXR0aW5nc0NvdW50LCAodG90YWwpIC0+XG4gICAgICB3LmxvYWRDb250ZW50KCkgaWYgdG90YWwgPj0gMVxuXG4gICAgcmV0dXJuIHdcbl0pXG5cbm1vZHVsZS5kaXJlY3RpdmUoJ3dpZGdldFNhbGVzUGVyZm9ybWFuY2UnLCAtPlxuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgbGluazogKHNjb3BlLCBlbGVtZW50KSAtPlxuICAgICAgZWxlbWVudC5hZGRDbGFzcyhcInNhbGVzXCIpXG4gICAgICBlbGVtZW50LmFkZENsYXNzKFwibGlzdFwiKVxuICAgICxjb250cm9sbGVyOiAnV2lkZ2V0U2FsZXNQZXJmb3JtYW5jZUN0cmwnXG4gIH1cbikiXX0=