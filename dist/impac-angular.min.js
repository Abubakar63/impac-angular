!function(){"use strict";angular.module("maestrano.impac",["impac.config","impac.services","impac.filters","impac.components","ui.sortable","ui.bootstrap","emguo.poller"]),angular.module("impac.components",["impac.components.dashboard","impac.components.dashboard-selector","impac.components.dashboard-settings","impac.components.kpis-bar","impac.components.kpi","impac.components.chart","impac.components.widget","impac.components.widgets","impac.components.widgets-settings","impac.components.widgets-common","impac.components.templates"]),angular.module("impac.components.widgets",["impac.components.widgets.accounts-accounting-values","impac.components.widgets.accounts-assets-summary","impac.components.widgets.accounts-assets-liability-summary","impac.components.widgets.accounts-balance-sheet","impac.components.widgets.accounts-balance","impac.components.widgets.accounts-cash-summary","impac.components.widgets.accounts-comparison","impac.components.widgets.accounts-custom-calculation","impac.components.widgets.accounts-expenses-revenue","impac.components.widgets.accounts-payable-receivable","impac.components.widgets.accounts-profit-and-loss","impac.components.widgets.accounts-class-comparison","impac.components.widgets.accounts-expense-weight","impac.components.widgets.accounts-assets-vs-liabilities","impac.components.widgets.accounts-detailed-classifications","impac.components.widgets.hr-employee-details","impac.components.widgets.hr-employees-list","impac.components.widgets.hr-leaves-balance","impac.components.widgets.hr-leaves-schedule","impac.components.widgets.hr-payroll-summary","impac.components.widgets.hr-payroll-taxes","impac.components.widgets.hr-salaries-summary","impac.components.widgets.hr-superannuation-accruals","impac.components.widgets.hr-timesheets","impac.components.widgets.hr-workforce-summary","impac.components.widgets.invoices-aged-payables-receivables","impac.components.widgets.invoices-list","impac.components.widgets.invoices-summary","impac.components.widgets.sales-aged","impac.components.widgets.sales-break-even","impac.components.widgets.sales-comparison","impac.components.widgets.sales-customer-details","impac.components.widgets.sales-cycle","impac.components.widgets.sales-forecast","impac.components.widgets.sales-growth","impac.components.widgets.sales-leads-funnel","impac.components.widgets.sales-leads-list","impac.components.widgets.sales-list","impac.components.widgets.sales-margin","impac.components.widgets.sales-number-of-leads","impac.components.widgets.sales-opportunities-funnel","impac.components.widgets.sales-performance","impac.components.widgets.sales-segmented-turnover","impac.components.widgets.sales-summary","impac.components.widgets.sales-top-opportunities"]),angular.module("impac.components.widgets-settings",["impac.components.widgets-settings.account","impac.components.widgets-settings.accounts-list","impac.components.widgets-settings.chart-filters","impac.components.widgets-settings.dates-picker","impac.components.widgets-settings.formula","impac.components.widgets-settings.hist-mode","impac.components.widgets-settings.limit-entries","impac.components.widgets-settings.organizations","impac.components.widgets-settings.param-selector","impac.components.widgets-settings.params-picker","impac.components.widgets-settings.params-checkboxes","impac.components.widgets-settings.time-range","impac.components.widgets-settings.width"]),angular.module("impac.components.dashboard-settings",["impac.components.dashboard-settings.currency","impac.components.dashboard-settings.sync-apps"]),angular.module("impac.components.widgets-common",["impac.components.widgets-common.top-buttons","impac.components.widgets-common.data-not-found","impac.components.widgets-common.editable-title"]),angular.module("impac.services",["impac.services.routes","impac.services.linking","impac.services.theming","impac.services.assets","impac.services.chart-formatter","impac.services.message-bus","impac.services.utilities","impac.services.main","impac.services.kpis","impac.services.dashboards","impac.services.widgets"]),angular.module("impac.filters",["impac.filters.titleize","impac.filters.truncate","impac.filters.mno-currency","impac.filters.mno-date"]),angular.module("impac.config",[]).config(["$httpProvider",function(e){e.defaults.headers.common.Accept="application/json",e.defaults.headers.common["Content-Type"]="application/json"}]),angular.module("impac.components.templates",[]).run(["$templateCache",function(e){e.put("dashboard/create.modal.html",'<div class="modal-header"> <div class="close" type="button" ng-click="instance.close()">×</div> <h3>Create New Dashboard</h3> </div> <div class="modal-body"> <div class="row"> <div class="col-sm-12"> <div class="alert alert-error" ng-show="errors"> <button class="close" ng-click="errors=\'\'">×</button> <ul> <li ng-repeat="error in errors">{{error}}</li> </ul> </div> </div> </div>  <div class="row dashboard-form"> <div class="col-sm-10 col-sm-offset-1"> <form class="form-horizontal" role="form"> <div class="form-group"> <label class="col-sm-2 control-label">Name</label> <div class="col-sm-10"> <input type="text" class="form-control" ng-model="model.name" placeholder="E.g: Cash Accounts Monitoring" required=""> </div> </div> <div class="form-group" ng-show="isMultiCompanyAvailable()"> <label class="col-sm-2 control-label">Type</label> <div class="col-sm-10"> <div class="btn-group" role="group"> <button type="button" ng-click="selectMode(\'single\')" ng-class="btnBlassFor(\'single\')">Current Company</button> <button type="button" ng-click="selectMode(\'multi\')" ng-class="btnBlassFor(\'multi\')">Multi Company</button> </div> </div> </div>  <div class="form-group" ng-show="isCurrentOrganizationShown()"> <div ng-show="!canAccessAnalyticsForCurrentOrganization()" class="text-center text-purple"> <div class="spacer1"></div> <p> Oops! Only Admins and Super Admins can create dashboards for company {{currentOrganization.name}}. <span ng-show="isMultiCompanyAvailable()">Please select a "Multi Company" dashboard to select data from other companies.</span> </p> </div> </div>  <div class="form-group" ng-show="isSelectOrganizationShown()"> <label class="col-sm-2 control-label">Companies</label> <div class="col-sm-10"> <ul class="list-unstyled"> <li ng-repeat="organization in organizations"> <input type="checkbox" ng-model="organization.$selected" ng-disabled="!canAccessAnalyticsData(organization)"> {{organization.name}} <span ng-show="organization.is_customer_account">(customer)</span> <span ng-show="!canAccessAnalyticsData(organization)"> <em><small> &nbsp; &nbsp; <i class="fa fa-exclamation-circle text-danger" tooltip="Only Admins and Super Admins can access analytics data for this company"></i> </small></em> </span> </li> </ul> </div> </div> </form>  </div>  </div> </div> <div class="modal-footer"> <div class="row"> <div class="col-sm-12"> <button class="btn btn-shaded" ng-click="instance.dismiss()" ng-hide="isLoading">Cancel</button> <button class="btn btn-primary" ng-click="proceed()" ng-disabled="isProceedDisabled()"> <i class="fa fa-spinner fa-pulse loader" ng-if="isLoading"></i> Add </button> </div> </div> </div> '),e.put("dashboard/dashboard.tmpl.html",' <div class="analytics" ng-hide="(isLoading || forceLoad)" ng-class="{\'hide-dhb\': (isLoading || forceLoad), \'show-dhb\': !(isLoading || forceLoad)}"> <div mno-star-wizard="true" modal-open="starWizardModal.value"></div>  <div id="head-title"> <div class="row" ng-if="showDhbHeading"> <div class="col-md-6 col-sm-12" id="dashboard-heading"> <img ng-src="{{impacTitleLogo}}"> <h2> {{dhbHeadingText}} </h2> </div> </div>  <kpis-bar ng-if="showKpisBar" kpis="currentDhb.kpis"></kpis-bar>  <dashboard-selector id="module__dashboard-selector" is-widget-selector-shown="showWidgetSelector()" on-create-dashboard="createDashboardModal.open()" on-display-widget-selector="displayWidgetSelector()" on-select-dashboard="activateTimer()"></dashboard-selector> </div> <div id="sub-menu" collapse="!showSubMenu"> <i class="fa fa-times" ng-click="hideSubMenu()">  <div id="myob-message" ng-if="hasMyobEssentialsOnly && myobMessageConfig.show" class="alert alert-warning"> <h3>It looks like you are using MYOB Essentials...</h3> <p>Unfortunately, all the information required by Impac! is not exposed by MYOB Essentials API <strong>yet</strong>. Consequently, most of the accounting widgets provided by Impac! won\'t find a valid source of data to display their content.</p> <p>Maybe you should consider switching to <a href="http://myob.com.au/products/small-business/accounting-software/myob-accountright-1422735752948" target="_blank">MYOB AccountRight</a>, the other MYOB accounting solution?</p> <p align="right" ng-if="myobMessageConfig.appLink.show"><a ng-href="{{myobMessageConfig.appLink.url}}" target="_blank">{{myobMessageConfig.appLink.text}}</a></p> </div> </i></div>  <div id="widget-selector" collapse="!showWidgetSelector()" ng-if="!customWidgetSelector.path"> <div class="title"> <i class="fa fa-times-circle" ng-if="showCloseWidgetSelectorButton()" ng-click="displayWidgetSelector(false)"> <span class="badge confirmation">Widget added!</span> Select the widgets you want to add to your dashboard. </i></div> <div class="row top-container"> <div class="col-md-3 categories"> <div class="row header"> All categories </div> <div class="row lines"> <div class="col-md-12" style="padding: 3px 12px;"> <p ng-click="selectCategory(\'accounts\')" ng-class="isCategorySelected(\'accounts\') ? \'selected\' : none">Accounting</p> <p ng-click="selectCategory(\'invoices\')" ng-class="isCategorySelected(\'invoices\') ? \'selected\' : none">Invoicing</p> <p ng-click="selectCategory(\'hr\')" ng-class="isCategorySelected(\'hr\') ? \'selected\' : none">HR / Payroll</p> <p ng-click="selectCategory(\'sales\')" ng-class="isCategorySelected(\'sales\') ? \'selected\' : none">Sales</p> </div> </div> <div class="arrow" ng-style="getSelectedCategoryTop()"> <div class="square"></div> <i class="fa fa-caret-right"></i> </div> </div> <div class="col-md-9 widgets"> <div class="row header"> {{getSelectedCategoryName() | titleize}} </div> <div class="row lines"> <div class="col-md-4" ng-repeat="widgetPattern in getWidgetsForSelectedCategory()" style="padding: 0px 8px;"> <p ng-click="addWidget(widgetPattern.path, widgetPattern.metadata)" tooltip="{{widgetPattern.desc}}" tooltip-placement="{{$index < 9 ? \'bottom\' : \'top\'}}" tooltip-animation="false" tooltip-append-to-body="true" tooltip-class="impac-widget-selector-tooltip"><i class="fa fa-{{widgetPattern.icon}}"> {{widgetPattern.name}} <i class="fa fa-plus-circle"></i></i></p> </div> </div> </div> </div> <div class="bottom" ng-if="widgetSuggestionModal.config.apiPath"> <span class="suggestion"> Can\'t find the widget you\'re looking for? <a ng-click="widgetSuggestionModal.open()">Give us your suggestions here!</a> </span> </div> </div>  <div id="custom-widget-selector" ng-if="customWidgetSelector.path" ng-include="customWidgetSelector.path" ng-hide="showChooseDhbMsg()"></div>  <div id="dashboard-settings-panel" ng-if="!dhbSettingsConfig.inWidgetsContainer && !showChooseDhbMsg()" class="row text-right"> <div dashboard-setting-sync-apps="" ng-if="dhbSettingsConfig.showSyncApps()"> <div dashboard-setting-currency="" currency="currentDhb.currency"> </div>  <div class="alert alert-error" ng-show="errors"> <button class="close" ng-click="errors=\'\'">×</button> <ul> <li ng-repeat="error in errors">{{error}}</li> </ul> </div> <div id="no-widgets-container" class="row text-center ng-hide" ng-show="(showChooseDhbMsg() || showNoWidgetsMsg())"> <img ng-src="{{impacDashboardBackground}}" class="bg"> <div class="impac-info-message">  <div class="ng-hide" ng-show="showChooseDhbMsg()"> <div class="hidden-xs"> <div class="spacer4"></div> <div class="row"> <div class="col-md-8 col-md-offset-2"> <div class="testimonial promo-dark"> <p><b>{{dhbErrorsConfig.firstTimeCreated.first}}</b></p> <p>{{dhbErrorsConfig.firstTimeCreated.second}}</p> </div> </div> </div> <div class="spacer2"></div> </div> <div class="align-center"> <button ng-click="createDashboardModal.open()" class="btn btn-lg btn-warning"><span class="fa fa-plus"></span> Create a Dashboard!</button> </div> </div>  <div class="ng-hide" ng-show="showNoWidgetsMsg()"> <div class="hidden-xs"> <div class="spacer4"></div> <div class="row"> <div class="col-md-8 col-md-offset-2"> <div class="testimonial promo-dark"> <p><b>{{dhbErrorsConfig.empty.first}}</b></p> <p>{{dhbErrorsConfig.empty.second}}</p> </div> </div> </div> <div class="spacer2"></div> </div> <div class="align-center"> <button ng-disabled="showWidgetSelector()" ng-click="displayWidgetSelector()" class="btn btn-lg btn-warning"><span class="fa fa-plus"></span> Add a new Widget</button> </div> </div> </div> </div>  <div class="row text-center" ng-show="showChooseDhbMsg()"> <div class="spacer2 hidden-xs"></div> <div class="col-md-8 col-md-offset-2"> <p class="text-muted"><small><em>{{dhbErrorsConfig.firstTimeCreated.note}}</em></small></p> </div> </div>  <div class="row" id="widgets-section" ng-hide="showNoWidgetsMsg() || showChooseDhbMsg()">  <div id="dashboard-settings-panel" ng-if="dhbSettingsConfig.inWidgetsContainer && !showChooseDhbMsg()" class="text-right col-md-12 in-widgets-container"> <div dashboard-setting-sync-apps="" ng-if="dhbSettingsConfig.showSyncApps()"> <div dashboard-setting-currency="" currency="currentDhb.currency"> </div> <div class="col-md-12"> <div id="widgets-container" ui-sortable="sortableOptions" ng-model="currentDhb.widgets" class="row">  <div impac-widget="" widget="widget" is-accessibility="accessibility" parent-dashboard="currentDhb" ng-repeat="widget in currentDhb.widgets" class="widget-item" ng-class="widget.getColClass()" on-display-alerts="displaySubMenu()">  <div ng-if="isAddChartEnabled" class="unsortable" ng-click="addChartTileOnClick()"> <div class="col-md-6 widget-item add-chart"> <div class="a-content">+ chart</div> </div> </div> </div> </div> </div> </div> <div class="analytics" ng-show="(isLoading || forceLoad)"> <div class="row"> <div class="col-md-12 loader-container text-center" style="margin-top: 200px;"> <i class="fa fa-refresh fa-spin" style="font-size: 250px; opacity: 0.7;"> </i></div> </div> </div> </div></div></div></div></div>'),e.put("dashboard/widget-suggestion.modal.html",'<div class="modal-header"> <div class="close" type="button" ng-click="instance.close()">×</div> <h3>Suggest a widget</h3> </div> <div class="modal-body"> <div class="row"> <div class="col-md-6"> <label>What would you name your widget?</label><br> <input type="text" ng-model="widgetDetails.name" ng-disabled="isLoading"> </div> <div class="col-md-6"> <label>In which category?</label><br> <input type="text" ng-model="widgetDetails.category" ng-disabled="isLoading"> </div> </div> <div class="spacer1"> <div class="row"> <div class="col-md-12"> <label>What kind of information would your widget display?</label><br> <textarea ng-model="widgetDetails.description" ng-disabled="isLoading">\n    </textarea></div> </div> <div class="spacer1" ng-show="isLoading"> <div class="row" collapse="!onSuccess"> <div class="col-md-12 text-center"> <h3 class="thanks-message">{{userName | titleize}}, thanks a lot for helping us improve Impac!&trade;</h3> </div> </div> <div class="row" ng-show="error"> <div class="col-md-12 text-center"> <h5 style="color: red;"> Unable to send suggestions request, please try again or contact technical support. </h5> </div> </div> </div> <div class="modal-footer"> <div class="row"> <div class="col-sm-12"> <button class="btn btn-shaded" ng-click="instance.dismiss()" ng-hide="isLoading">Cancel</button> <button class="btn btn-info" ng-click="proceed()" ng-disabled="!(widgetDetails.name && widgetDetails.category && widgetDetails.description) || isLoading"> <i class="fa fa-spinner fa-pulse loader" ng-show="isLoading"></i> Send your suggestion </button> </div> </div> </div> </div></div>'),e.put("dashboard-selector/bootstrap-tabs.tmpl.html",'<div class="row buttons-bar-row"> <div class="buttons-bar col-sm-8" ng-show="isThereADashboard()"> <tabset type="{{selectorType}}"> <tab ng-repeat="dhb in dashboardsList" ng-click="selectDashboard(dhb.id)" active="dhb.active"> <tab-heading> {{dhb.full_name}} <a href="" class="close-link" ng-if="isDeleteDhbEnabled"> <i class="fa fa-times" ng-click="deleteDashboardModal.open()"></i> </a> </tab-heading> </tab> <tab ng-if="isAccessibilityEnabled" ng-click="toggleAccessibilityMode()"> <tab-heading> <a href=""><i class="fa fa-wheelchair"></i></a> </tab-heading> </tab> <tab ng-if="isAddDhbEnabled" ng-click="onCreateDashboard()"> <tab-heading> <a href="">+</a> </tab-heading> </tab> </tabset> </div> <div class="buttons-bar col-sm-4"> <div class="actions-panel"> <button ng-if="isAccessibilityEnabled" ng-click="toggleAccessibilityMode()" class="btn btn-info" ng-disabled="isWidgetSelectorShown()"><span class="fa fa-wheelchair"></span></button> <button ng-if="isAddWidgetEnabled && isThereADashboard()" ng-click="onDisplayWidgetSelector()" class="btn btn-warning" ng-disabled="isWidgetSelectorShown()"><span class="fa fa-plus"></span> Add Widget</button>  </div> </div> </div> '),e.put("dashboard-selector/delete.modal.html",'<div class="modal-header"> <div class="close" type="button" ng-click="instance.close()">×</div> <h3>Delete Dashboard</h3> </div> <div class="modal-body"> <div class="row"> <div class="col-sm-12"> <div class="alert alert-error" ng-show="errors"> <button class="close" ng-click="errors=\'\'">×</button> <ul> <li ng-repeat="error in errors">{{error}}</li> </ul> </div> </div> </div>  <p>Are you sure you want to delete this analytics dashboard?</p> </div> <div class="modal-footer"> <div class="row"> <div class="col-sm-12"> <button class="btn btn-shaded" ng-click="instance.dismiss()" ng-hide="isLoading" ng-disabled="isLoading">Cancel</button> <button class="btn btn-danger" ng-click="proceed()" ng-disabled="isLoading"> <i class="fa fa-spinner fa-pulse loader" ng-if="isLoading"></i> Delete </button> </div> </div> </div> '),e.put("dashboard-selector/dropdown.tmpl.html",'<div class="row buttons-bar-row buttons-bar"> <div class="col-md-6 dropdown-container" ng-hide="isLoading"> <div ng-if="isThereADashboard()"> <h4 class="dashboard-title"> <div style="display: inline-block;" ng-click="toggleShowDashboardsDropdown()"> {{currentDhb.full_name}} <i class="fa fa-chevron-down" style="font-size: 18px;"></i> </div> <i ng-hide="showChangeDashboardNameBox" class="fa fa-pencil" tooltip="Change name" tooltip-animation="false" tooltip-append-to-body="true" ng-click="toggleChangeDashboardNameBox(currentDhb)"></i> </h4> <div ng-show="showDashboardsDropdown" class="dashboard-select"> <div ng-hide="dhb.id == currentDhb.id" class="option" ng-repeat="dhb in dashboardsList"> <span class="name" ng-click="selectDashboard(dhb.id)">{{dhb.full_name}}</span> <i ng-hide="showChangeDashboardNameBox" class="fa fa-pencil" tooltip="Change name" tooltip-animation="false" tooltip-append-to-body="true" ng-click="toggleChangeDashboardNameBox(dhb)"> </i></div> <div ng-show="showCreateDashboardButton" class="option create" ng-click="onCreateDashboard()"><i class="fa fa-plus"> Create Dashboard</i></div> </div> <div ng-if="showChangeDashboardNameBox" class="change-name"> <p>Change dashboard name:</p> <input type="text" class="form-control" id="changeDhbNameInput" ng-model="dashboardToChange.name" ng-keyup="checkAndUpdateDashboardName($event)"> <button class="btn btn-sm btn-default" ng-click="hideChangeDashboardNameBox()">Cancel</button> <button class="btn btn-sm btn-success" style="margin-left: 10px" ng-click="updateDashboardName()">Confirm</button> </div> <p class="data-source-label"> <small><b>Source:</b> {{organizationsNames()}}</small> </p> </div> </div> <div class="col-md-6 loader-container" ng-show="isLoading"> <i class="fa fa-spinner fa-pulse fa-4x loading-spinner"> </i></div> <div class="col-md-6 actions-panel"> <button ng-if="isAccessibilityEnabled" ng-click="toggleAccessibilityMode()" class="btn btn-info" ng-disabled="showWidgetSelector"><span class="fa fa-wheelchair"></span></button> <button ng-if="isAddWidgetEnabled && isThereADashboard()" ng-click="onDisplayWidgetSelector()" class="btn btn-warning" ng-disabled="isWidgetSelectorShown()"><span class="fa fa-plus"></span> Add Widget</button> <button ng-if="isAddDhbEnabled" ng-click="onCreateDashboard()" class="btn btn-warning" ng-show="showCreateDashboardButton"><span class="fa fa-pencil-square-o"></span> Create Dashboard</button>  <button ng-if="isDeleteDhbEnabled" ng-click="deleteDashboardModal.open()" class="btn btn-danger hidden-xs" ng-show="isThereADashboard()" tooltip="Delete Dashboard"><span class="fa fa-trash-o"></span> </button> </div> </div> '),e.put("kpi/kpi.tmpl.html",'<div class="tile kpi" ng-class="{ \'static\': kpi.static }"> <div class="kpi-show" ng-hide="showEditSettings"> <small class="kpi-title" ng-if="::kpi.static">{{::kpi.name}}</small> <small class="kpi-title" ng-if="::!kpi.static" editable-text="kpi.name" buttons="yes" onaftersave="updateName()">{{kpi.name}}</small> <div class="kpi-watch" ng-if="::!kpi.static">({{::kpi.element_watched}})</div> <span class="kpi-value">{{kpi.data.value | mnoCurrency : kpi.data.unit}}</span>  <div class="kpi-alert" ng-repeat="target in kpi.targets track by $index" ng-hide="editMode || kpi.data.results[$index]"> <span ng-show="target.max">over {{target.max | mnoCurrency : kpi.data.unit}}</span> <span ng-show="target.min">below {{target.min | mnoCurrency : kpi.data.unit}}</span> </div> <div class="kpi-alert" ng-show="editMode" ng-click="displayEditSettings()">Edit</div> <div class="kpi-alert kpi-close" ng-show="editMode" ng-click="deleteKpi()">x</div> </div> <div class="kpi-edit" ng-show="showEditSettings"> <span class="param-name">KPI target:</span>  <div class="clearfix edit-limit align"> <select class="pull-left select-limit-mode form-control input-sm" ng-model="kpi.limit.mode" ng-options="option.mode as option.label for option in possibleTargets"> </select> <div class="pull-right input-limit-value form-group has-feedback"> <input type="text" class="form-control input-sm" ng-model="kpi.limit.value"> <span class="form-control-feedback" aria-hidden="true">{{kpi.data.unit}}</span> </div> </div> <div class="extra-params" ng-repeat="(param, paramValues) in kpi.possibleExtraParams track by $index"> <span class="param-name">Select {{param | titleize}}:</span> <select class="form-control input-sm" ng-model="kpi.extra_params[param]" ng-options="value.id as value.label for value in paramValues"> </select> </div> <button class="btn btn-xs btn-default" ng-click="hideEditSettings()">Cancel</button> <button class="btn btn-xs btn-success" ng-click="updateSettings()">Save</button> </div> </div> '),e.put("kpis-bar/kpis-bar.tmpl.html",'<div class="row kpis"> <div class="title-actions col-xs-4 col-sm-2"> <div ng-click="toggleAvailableKpis()"><a href=""><i class="fa fa-plus"></i> Attach KPI</a></div> <div class="available-kpis-container" collapse="hideAvailableKpis"> <div ng-repeat="kpi in availableKpis" class="available-kpi" ng-init="kpi.element_watched = kpi.watchables[0]"> <span class="kpi-name">{{formatKpiName(kpi.endpoint)}}</span> <button class="btn btn-sm btn-info" ng-click="addKpi(kpi)">+ Attach</button> <select class="form-control-static input-sm" ng-model="kpi.element_watched" ng-options="watchable for watchable in kpi.watchables"></select> </div> </div> <div ng-click="toggleEditMode()"><a href=""><i class="fa fa-cog"></i> Edit KPI Settings</a></div> </div> <impac-kpi class="col-xs-4 col-sm-2" kpi="kpi" on-delete="removeKpi(kpi.id)" edit-mode="showEditMode" available-kpis="availableKpis" ng-repeat="kpi in kpis track by $index"></impac-kpi> <div ng-show="isAddingKPI" class="col-xs-2 kpi-loader"> <i class="fa fa-2x fa-spin fa-refresh"></i> </div> </div> '),e.put("widget/widget.tmpl.html",'<div class="top-line"> <div common-top-buttons="" parent-widget="widget" on-refresh="showWidget"> <div common-editable-title="" parent-widget="widget"> </div> <div class="content" ng-class="templateName"> <div ng-show="widget.isLoading" class="loader" align="center"> <div> <i class="fa fa-spinner fa-pulse fa-3x"></i> <p>Your data is being retrieved...</p> </div> </div> <div ng-hide="widget.isLoading" ng-include="widgetContentTemplate()"> </div> </div></div></div>'),e.put("dashboard-settings/currency.tmpl.html",'<div class="dashboard-settings currency"> <select ng-options="cur for cur in currencies" ng-model="currency" ng-change="massAssignCurrency()" ng-disabled="locked"> <option ng-if="!currency" value="" disabled="">Choose currency...</option> </select> </div> '),e.put("dashboard-settings/sync-apps.tmpl.html",' <div class="dashboard-settings sync-apps" ng-show="lastConnector"> <span ng-show="isSyncing">Syncing...</span> <span ng-if="otherConnectors.length == 0" ng-hide="isSyncing"> {{ formatStatus(lastConnector) }} </span> <span ng-if="otherConnectors.length > 0" ng-hide="isSyncing" popover-template="\'connectors.tmpl.html\'" popover-trigger="mouseenter" popover-placement="bottom"> {{ formatStatus(lastConnector) }} </span> <button id="sync" class="btn btn-primary" ng-click="synchronize()" tooltip="Sync data and refresh dashboard" ng-disabled="isSyncing"> <i class="fa fa-refresh" ng-class="{ \'fa-spin\': isSyncing }"></i> </button> </div>  <script type="text/ng-template" id="connectors.tmpl.html"> <div ng-repeat="connector in otherConnectors track by $index"> <span>{{ formatStatus(connector) }}</span> </div> <div style="border-bottom: 1px solid #ccc; width: 100%; height: 2px; margin: 5px 0;"></div> <p>All other applications are synced in real-time.</p> </script>  <script type="text/ng-template" id="alerts.tmpl.html"> <div class="modal-header"> <h4 class="modal-title">Synchronization alerts</h4> </div> <div class="modal-body"> <div ng-repeat="connector in failedConnectors track by $index"> {{connector.name}} - Synchronization failed. Please retry later. </div> <div ng-repeat="connector in disconnectedConnectors track by $index"> {{connector.name}} is disconnected. Please reconnect to synchronize. </div> </div> <div class="modal-footer"> <button class="btn btn-primary" type="button" ng-click="ok()">OK</button> </div> </script> '),e.put("widgets/accounts-accounting-values.tmpl.html",'<div widget-accounts-accounting-values=""> <div ng-show="widget.isEditMode" class="edit"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div setting-time-range="" parent-widget="widget" class="part" deferred="::timeRangeDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)"> <div setting-hist-mode="" parent-widget="widget" deferred="::histModeDeferred"> <div ng-hide="widget.isHistoryMode" class="current"> <div class="price"> {{ getCurrentPrice() | mnoCurrency : getCurrency() : false }} </div> <div class="currency">{{getCurrency()}}</div> <div class="legend">{{getLegend()}}</div> </div> <div class="history chart-container" ng-class="{\'invisible\': !widget.isHistoryMode}"> <div impac-chart="" draw-trigger="::drawTrigger.promise" deferred="::chartDeferred"></div> <div class="legend">{{getLegend()}}</div> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" on-display-alerts="onDisplayAlerts()" widget-engine="::widget.category"> </div> </div></div></div></div></div>'),e.put("widgets/accounts-assets-liability-summary.tmpl.html",'<div widget-accounts-assets-liability-summary=""> <div ng-show="widget.isEditMode" class="edit"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)" class="chart-container">  <div setting-param-selector="" parent-widget="widget" param="classification" options="accountsOptions" selected="selectedAccountsOption" class="row param-selector" deferred="::paramSelectorDeferred">  <div impac-chart="" draw-trigger="::drawTrigger.promise" deferred="::chartDeferred"></div> <div class="legend"> <div class="title" ng-show="widget.metadata.organization_ids.length==1">{{widget.content.summary[0].company}} {{classification}}</div> <div class="title" ng-hide="widget.metadata.organization_ids.length==1">{{classification}} repartition</div> <span ng-repeat="valuePair in dataSource"> <span style="font-weight: bold; color: {{getAccountColor(valuePair)}};">{{valuePair.label}}</span>: {{valuePair.total | mnoCurrency : getCurrency()}} <br> </span> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" on-display-alerts="onDisplayAlerts()" widget-engine="::widget.category"> </div> </div> </div></div></div>'),e.put("widgets/accounts-assets-summary.tmpl.html",'<div widget-accounts-assets-summary=""> <div ng-show="widget.isEditMode" class="edit"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)" class="chart-container"> <div impac-chart="" draw-trigger="::drawTrigger.promise" deferred="::chartDeferred"></div> <div class="legend"> <div class="title" ng-show="widget.metadata.organization_ids.length==1">{{widget.content.summary[0].company}} {{classification}}</div> <div class="title" ng-hide="widget.metadata.organization_ids.length==1">{{classification}} repartition</div> <span ng-repeat="valuePair in dataSource"> <span style="font-weight: bold; color: {{getAccountColor(valuePair)}};">{{valuePair.label}}</span>: {{valuePair.total | mnoCurrency : getCurrency()}} <br> </span> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" on-display-alerts="onDisplayAlerts()" widget-engine="::widget.category"> </div> </div></div></div>'),e.put("widgets/accounts-assets-vs-liabilities.tmpl.html",'<div widget-accounts-assets-vs-liabilities=""> <div ng-show="widget.isEditMode" class="edit"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)" class="chart-container"> <div impac-chart="" draw-trigger="::drawTrigger.promise" deferred="::chartDeferred"></div> <div class="legend" style="max-height: 115px;"> <div class="title"> <i class="fa fa-circle" style="color: {{assetsColor}};"> Assets</i> | <i class="fa fa-circle" style="color: {{liabilitiesColor}};"> Liabilities</i> </div> <div class="row"> <div ng-repeat="data in companiesList" ng-class="{\'col-md-6\': (widget.content.companies.length > 1), \'col-md-12\': (widget.content.companies.length == 1)}"> <span>{{ data.company }}</span><br> <span style="color: {{assetsColor}};"> {{ data.assets | mnoCurrency : data.currency }}</span> <br> <span style="color: {{liabilitiesColor}};"> {{ data.liabilities | mnoCurrency : data.currency }}</span> </div> </div> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" on-display-alerts="onDisplayAlerts()" widget-engine="::widget.category"> </div> </div></div></div>'),e.put("widgets/accounts-balance.tmpl.html",'<div widget-accounts-balance=""> <div ng-show="widget.isEditMode" class="edit"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div setting-account="" parent-widget="widget" class="part" deferred="::accountBackDeferred"> <div setting-time-range="" parent-widget="widget" class="part" deferred="::timeRangeDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)">  <div setting-account="" ng-hide="widget.selectedAccount" parent-widget="widget" label="Select an account to monitor" on-account-selected="displayAccount()" deferred="::accountFrontDeferred">  <div ng-show="widget.selectedAccount"> <div setting-hist-mode="" parent-widget="widget" deferred="::histModeDeferred"> <div ng-hide="widget.isHistoryMode"> <h3>{{getName()}}</h3> <div class="price"> {{ getCurrentBalance() | mnoCurrency : getCurrency() : false }} </div> <div class="currency">{{getCurrency()}}</div> </div> <div class="chart-container" ng-class="{\'invisible\': !widget.isHistoryMode}"> <div impac-chart="" draw-trigger="::drawTrigger.promise" deferred="::chartDeferred"></div> <div class="legend">{{getName()}}</div> </div> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" on-display-alerts="onDisplayAlerts()" widget-engine="::widget.category"> </div> </div></div></div></div></div></div></div>'),e.put("widgets/accounts-balance-sheet.tmpl.html",'<div widget-accounts-balance-sheet=""> <div class="edit" ng-show="widget.isEditMode"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div class="no-data-block" ng-show="(isDataFound==false)"> No balance sheet can be generated between this {{period.label.toLowerCase()}} and the previous {{period.label.toLowerCase()}}. <br> Maybe try selecting a longer period? <br> <span setting-param-selector="" parent-widget="widget" param="period" options="periodOptions" selected="period" deferred="::paramSelectorFrontDeferred"> </span></div> <div ng-show="(isDataFound==true)" class="widget-lines-container">  <div class="row widget-line header"> <div class="col-sm-6 col-xs-12 text-left">Compare with previous: <span setting-param-selector="" parent-widget="widget" param="period" options="periodOptions" selected="period" deferred="::paramSelectorBackDeferred"></span></div> <div class="col-sm-3 col-xs-6 text-right">{{widget.content.dates[0] | mnoDate : widget.metadata.period}}</div> <div class="col-sm-3 col-xs-6 text-right">{{widget.content.dates[1] | mnoDate : widget.metadata.period}}</div> </div>  <div class="row lines-group" ng-repeat="category in categories"> <div class="col-xs-12">  <div class="row widget-line total"> <div class="col-xs-1" ng-click="toggleCollapsed(category)" style="cursor: pointer;"> <i class="fa" ng-class="isCollapsed(category) ? \'fa-plus-square-o\' : \'fa-minus-square-o\'"> </i></div> <div class="col-sm-5 col-xs-11 text-left"> <strong>{{category | titleize}}</strong> </div> <div class="col-sm-3 col-xs-6 text-right"> <strong>{{widget.content.summary[category].totals[0] | mnoCurrency : widget.content.summary[category].currency}}</strong> </div> <div class="col-sm-3 col-xs-6 text-right"> <strong>{{widget.content.summary[category].totals[1] | mnoCurrency : widget.content.summary[category].currency}}</strong> </div> </div>  <div class="row" collapse="isCollapsed(category)"> <div class="col-xs-12"> <div class="row widget-line" ng-repeat="account in widget.content.summary[category].accounts"> <div class="col-sm-6 col-xs-12 text-left"> {{account.name | titleize}} </div> <div class="col-sm-3 col-xs-6 text-right"> {{account.totals[0] | mnoCurrency : account.currency}} </div> <div class="col-sm-3 col-xs-6 text-right"> {{account.totals[1] | mnoCurrency : account.currency}} </div> </div> </div> </div> </div> </div> </div> </div> </div> </div>'),e.put("widgets/accounts-cash-summary.tmpl.html",'<div widget-accounts-cash-summary=""> <div class="edit" ng-show="widget.isEditMode"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div setting-time-range="" parent-widget="widget" class="part" deferred="::timeRangeDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)" class="row"> <div ng-class="widget.isExpanded() ? \'col-md-6\' : \'col-md-12\'"> <div setting-width="" parent-widget="widget" min="6" max="12" class="settings width" deferred="::widthDeferred"> <div class="widget-lines-container">  <div class="row widget-line header"> <div class="col-xs-5 col-xs-offset-1">Cash flow</div> <div class="col-xs-3 text-right">{{getLastDate() | mnoDate : widget.metadata.hist_parameters.period}}</div> <div class="col-xs-3 text-right">vs {{getPrevDate() | mnoDate : widget.metadata.hist_parameters.period}}</div> </div>  <div class="row lines-group" ng-repeat="statement in widget.content.summary" ng-class="{cash: statement.name.indexOf(\'cash\')>0}"> <div class="col-xs-12">  <div class="row widget-line" ng-class="{selected: isSelected(statement)}"> <div class="col-xs-1" ng-click="toggleCollapsed(statement)"> <i ng-show="(statement.accounts && statement.accounts.length)" class="fa" ng-class="isCollapsed(statement) ? \'fa-plus-square-o\' : \'fa-minus-square-o\'"> </i></div> <div class="col-xs-5" ng-click="toggleSelectedElement(statement)"> <strong>{{getName(statement) | titleize}}</strong> </div> <div class="col-xs-3 text-right" ng-click="toggleSelectedElement(statement)"> <strong>{{getLastValue(statement) | mnoCurrency : statement.currency : false}}</strong> </div> <div class="col-xs-3 text-right" ng-click="toggleSelectedElement(statement)" ng-class="getVarianceClassColor(getLastVariance(statement))"> <strong>{{getLastVariance(statement)}}</strong> </div> </div>  <div class="row" collapse="isCollapsed(statement)"> <div class="col-xs-12"> <div class="row widget-line" ng-click="toggleSelectedElement(account)" ng-repeat="account in statement.accounts" ng-class="{selected: isSelected(account)}"> <div class="col-xs-5 col-xs-offset-1"> {{account.name}} </div> <div class="col-xs-3 text-right"> {{getLastValue(account) | mnoCurrency : account.currency : false }} </div> <div class="col-xs-3 text-right" ng-class="getVarianceClassColor(getLastVariance(account))"> {{getLastVariance(account)}} </div> </div> </div> </div> </div> </div> </div> </div> <div class="col-md-6 right-panel text-center" ng-show="widget.isExpanded()"> <div ng-show="selectedElement"> <h4>{{getName(selectedElement) | titleize}}</h4> <div class="chart-container"> <div impac-chart="" draw-trigger="::drawTrigger.promise" deferred="::chartDeferred"></div> <div class="legend">{{(widget.metadata.hist_parameters.period || "Monthly") | titleize}} Cash Flow</div> </div> <div class="widget-lines-container">  <div class="row"> <span ng-repeat="date in dates track by $index" class="hidden-xs">  <div ng-if="$index % 4 == 0 && $index > 0" class="clearfix dashed"></div> <div class="col-sm-3 text-center">  <div class="row widget-line"> <div class="col-sm-12"> {{date | mnoDate : widget.metadata.hist_parameters.period}} </div> </div>  <div class="row widget-line"> <div class="col-sm-12"> {{selectedElement.cash_flows[$index] | mnoCurrency : selectedElement.currency }} </div> </div>  <div class="row widget-line"> <div class="col-sm-12" ng-class="getVarianceClassColor(selectedElement.variances[$index])"> {{formatVariance(selectedElement.variances[$index])}} </div> </div> </div> </span> </div>  <div ng-repeat="date in dates track by $index" class="row widget-line visible-xs">  <div class="col-xs-4"> {{date | mnoDate : widget.metadata.hist_parameters.period}} </div>  <div class="col-xs-4 text-right"> {{selectedElement.cash_flows[$index] | mnoCurrency : selectedElement.currency }} </div>  <div class="col-xs-4 text-right" ng-class="getVarianceClassColor(selectedElement.variances[$index])"> {{formatVariance(selectedElement.variances[$index])}} </div> </div> </div> </div> <div ng-hide="selectedElement" class="no-element"> Select an account or an account type to display the corresponding cash evolution. </div> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" on-display-alerts="onDisplayAlerts()" widget-engine="::widget.category"> </div> </div> </div></div></div></div>'),e.put("widgets/accounts-class-comparison.tmpl.html",'<div widget-accounts-class-comparison=""> <div ng-show="widget.isEditMode" class="edit"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)">  <div setting-param-selector="" parent-widget="widget" param="classification" options="classifications" selected="selectedClassification" class="row param-selector" deferred="::paramSelectorDeferred" on-select="widget.format()" no-reload="">  <div class="row"> <div class="col-md-12 chart-container"> <div impac-chart="" draw-trigger="::drawTrigger.promise" deferred="::chartDeferred"></div> </div> </div> <div class="row"> <div class="col-md-12 widget-lines-container"> <div class="row" ng-repeat="entity in widget.content.companies track by $index"> <div class="col-xs-6 text-left"> <i class="fa fa-circle" style="margin: 0px 8px; color: {{getAccountColor(entity)}}"> {{entity}} </i></div> <div class="col-xs-6 text-right"> <i>{{getAmount($index)}}</i> </div> </div> </div> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" on-display-alerts="onDisplayAlerts()" widget-engine="::widget.category"> </div> </div> </div></div></div>'),e.put("widgets/accounts-comparison.tmpl.html",'<div widget-accounts-comparison=""> <div setting-accounts-list="" parent-widget="widget" deferred="::accountsListDeferred"> <div ng-show="widget.isEditMode" class="edit"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)">  <div ng-show="widget.metadata.organization_ids.length > 1 && canSelectComparisonMode || isComparisonMode()"> <div setting-params-checkboxes="" options="comparisonModeOptions" param="comparison_mode" parent-widget="widget" deferred="::paramsCheckboxesDeferred"> </div>  <div ng-hide="hasAccountsSelected() || noComparableAccounts" class="row"> <div class="col-xs-12"> <h5>Select the accounts you wish to compare.</h5> </div> <div class="col-md-6"> <div class="input-group"> <select ng-model="movedAccount" ng-options="account.name + \' (\' + formatAmount(account) + \')\' for account in widget.remainingAccounts" class="form-control" ng-show="widget.hasEditAbility" ng-change="addAccount(movedAccount)"></select> </div> </div> </div>  <div ng-show="isComparisonMode() && noComparableAccounts" class="row comparable-error"> <div class="col-xs-12"><h5>No comparable accounts found.</h5></div> </div> <div class="row" ng-show="hasAccountsSelected()"> <div class="col-xs-12 chart-container"> <div impac-chart="" draw-trigger="::drawTrigger.promise" deferred="::chartDeferred"></div> </div> </div> <div class="row" ng-show="hasAccountsSelected()"> <div class="col-xs-12 widget-lines-container"> <div class="row" ng-class="{\'lines-group\': isComparisonMode(), \'widget-line\': !isComparisonMode()}" ng-repeat="account in widget.selectedAccounts track by $index">  <div class="col-xs-12" ng-if="isComparisonMode()"> <div class="row widget-line" ng-repeat="groupedAccount in account.accounts track by $index"> <div class="col-xs-1"> <i class="fa fa-circle" style="color: {{getAccountColor(groupedAccount)}}"> </i></div> <div class="col-xs-6"> {{groupedAccount.name}} </div> <div class="col-xs-4 text-right"> <i>{{formatAmount(groupedAccount)}}</i> </div> <div class="col-xs-1 text-right"> <button class="close" ng-click="removeAccount(account)" ng-show="widget.hasDeleteAbility">x</button> </div> </div> </div>  <div ng-if="!isComparisonMode()" class="col-xs-1"> <i class="fa fa-circle" style="color: {{getAccountColor(account)}}"> </i></div> <div ng-if="!isComparisonMode()" class="col-xs-6"> {{account.name}} </div> <div ng-if="!isComparisonMode()" class="col-xs-4 text-right"> <i>{{formatAmount(account)}}</i> </div> <div ng-if="!isComparisonMode()" class="col-xs-1 text-right"> <button class="close" ng-click="removeAccount(account)" ng-show="widget.hasDeleteAbility">x</button> </div> </div> </div> </div> <div class="row" ng-show="hasAccountsSelected()"> <div class="col-xs-12 input-group add-account"> <select ng-model="movedAccount" ng-options="account.name + \' (\' + formatAmount(account) + \')\' for account in widget.remainingAccounts track by account.uid" class="form-control" ng-show="widget.hasDeleteAbility" ng-change="addAccount(movedAccount)" ng-disabled="widget.selectedAccounts.length >= 15 || widget.remainingAccounts.length == 0 || isComparisonMode()"> <option value="" disabled="" selected="">+ ADD ACCOUNT</option> </select> </div> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" on-display-alerts="onDisplayAlerts()" widget-engine="::widget.category"> </div> </div> </div></div></div></div>'),e.put("widgets/accounts-custom-calculation.tmpl.html",'<div widget-accounts-custom-calculation=""> <div setting-organizations="" parent-widget="widget" ng-hide="true" deferred="::orgDeferred"> <div setting-accounts-list="" parent-widget="widget" deferred="::accountsListDeferred"> <div setting-formula="" parent-widget="widget" deferred="::formulaDeferred"> <h3 ng-show="widget.hasEditAbility && !widget.isFormulaCorrect"> <a href="" ng-click="formulaModal.open()">Create a custom calculation</a> </h3> <div class="price" ng-show="widget.isFormulaCorrect"> {{widget.evaluatedFormula}} </div> <div class="legend" ng-show="widget.isFormulaCorrect"> {{widget.legend}} </div> </div></div></div></div>'),e.put("widgets/accounts-custom-calculation/formula.modal.html",'<div class="analytics modal-custom-calculation"> <div class="modal-header"> <div class="close" type="button" ng-click="cancel()">×</div> <h3>Custom Calculation</h3> </div> <div class="modal-body"> <div class="row"> <div class="col-sm-12"> <div class="alert alert-error" ng-show="errors"> <button class="close" ng-click="errors=\'\'">×</button> <ul> <li ng-repeat="error in errors">{{error}}</li> </ul> </div> </div> </div> <div class="edit"> <div setting-organizations="" parent-widget="widget" class="part" deferred="::modalOrgDeferred"> </div> <p>Make a custom equation with your accounts, and save it as a widget. To create an equation, simply select your accounts in the list, and use the classical operators (example: ({1} + {2}) / {3})</p> <div class="row"> <div ng-show="widget.isLoading" class="col-md-6 loader" align="center"> <div> <i class="fa fa-spinner fa-pulse fa-3x"></i> <p>Your data is being retrieved...</p> </div> </div> <div ng-hide="widget.isLoading" class="col-md-6"> <div class="widget-line" ng-repeat="account in widget.selectedAccounts track by $index"> <div class="row"> <div class="col-md-6"> {{$index+1}} - {{account.name}} </div> <div class="col-md-6"> {{account.current_balance | mnoCurrency : account.currency}} <button class="close" ng-click="removeAccountFromFormula(account)" ng-show="widget.hasEditAbility"><span class="fa fa-times-circle"></span></button> </div> </div> </div> <div class="input-group" ng-show="widget.hasEditAbility"> <select ng-model="movedAccount" ng-options="account.name + \' (\' + widget.formatAmount(account) + \')\' for account in widget.remainingAccounts" class="form-control" ng-change="addAccountToFormula(movedAccount)"></select><select> </select></div> </div> <div ng-hide="widget.isLoading" class="col-md-6"> <p>Type your formula just below:</p> <input class="form-control" ng-model="widget.formula"> <p>Result: {{widget.evaluatedFormula}}</p> <p>Legend: {{widget.legend}}</p> </div> </div> </div> <div class="modal-footer"> <div class="row"> <div class="col-sm-12"> <button class="btn btn-gray" ng-click="cancel()" ng-hide="widget.isLoading" ng-disabled="isLoading">Cancel</button> <button class="btn btn-warning" ng-click="proceed()" ng-hide="widget.isLoading" ng-disabled="!widget.isFormulaCorrect || widget.isLoading"> <i class="fa fa-spinner fa-pulse loader" ng-show="isLoading"></i> Save </button> </div> </div> </div> </div> </div>'),e.put("widgets/accounts-detailed-classifications.tmpl.html",'<div widget-accounts-detailed-classifications=""> <div ng-show="widget.isEditMode" class="edit"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)" class="widget-lines-container">  <div ng-hide="multiEntity" class="row widget-line header"> <div class="col-md-11 col-md-offset-1 text-left"> {{widget.content.companies[0].name}} - Accounts classifications </div> </div>  <div class="row lines-group" ng-repeat="source in dataSource track by source.label"> <div class="col-xs-12">  <div class="row widget-line"> <div class="col-xs-1" ng-click="toggleCollapsed(source.label)" style="cursor: pointer;"> <i class="fa" ng-class="isCollapsed(source.label) ? \'fa-plus-square-o\' : \'fa-minus-square-o\'"> </i></div> <div class="col-xs-5 text-left"> <strong>{{source.label | titleize}}</strong> </div> <div class="col-xs-6 text-right"> <strong>{{source.value | mnoCurrency : source.currency}}</strong> </div> </div>  <div class="row" collapse="isCollapsed(source.label)"> <div class="col-xs-12"> <div class="row widget-line" ng-repeat="entry in source.entries"> <div class="col-xs-5 col-xs-offset-1 text-left"> {{entry.label | titleize}} </div> <div class="col-xs-6 text-right"> {{entry.value | mnoCurrency : entry.currency}} </div> </div> </div> </div> </div> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" on-display-alerts="onDisplayAlerts()" widget-engine="::widget.category"> </div> </div> </div></div>'),e.put("widgets/accounts-expense-weight.tmpl.html",'<div widget-accounts-expense-weight=""> <div ng-show="widget.isEditMode" class="edit"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div setting-account="" parent-widget="widget" class="part" deferred="::accountBackDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)">  <div setting-account="" ng-hide="widget.selectedAccount" parent-widget="widget" label="Select an expense account" on-account-selected="updateSettings()" deferred="::accountFrontDeferred">  <div class="chart-container" ng-show="widget.selectedAccount"> <div impac-chart="" draw-trigger="::drawTrigger.promise" deferred="::chartDeferred"></div> <div class="legend"> <div class="title"> {{getName()}} to {{getComparator() | titleize}} <span ng-if="widget.metadata.organization_ids.length==1"><br><strong>{{widget.content.summary[0].ratio | mnoCurrency : \'%\'}}</strong></span> </div> <span ng-repeat="sum in widget.content.summary" ng-if="widget.metadata.organization_ids.length>1"> <span style="font-weight: bold;">{{sum.company}}: {{sum.ratio | mnoCurrency : \'%\'}}</span> <br> </span> </div> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" on-display-alerts="onDisplayAlerts()" widget-engine="::widget.category"> </div> </div></div></div></div></div>'),e.put("widgets/accounts-expenses-revenue.tmpl.html",'<div widget-accounts-expenses-revenue=""> <div ng-show="widget.isEditMode" class="edit"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div setting-time-range="" parent-widget="widget" class="part" deferred="::timeRangeDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)"> <div setting-hist-mode="" parent-widget="widget" deferred="::histModeDeferred" on-toggle="widget.format()"> <div class="chart-container"> <div impac-chart="" draw-trigger="::drawTrigger.promise" deferred="::chartDeferred"></div> <div class="legend" ng-if="widget.isHistoryMode"> <span ng-hide="isNetProfitDisplayed"> <span class="negative2">Expenses</span> - <span class="positive2">Revenue</span> </span> <span ng-show="isNetProfitDisplayed"> <strong>Net Profit</strong> </span> </div> <div ng-show="widget.isHistoryMode" setting-params-checkboxes="" options="displayOptions" param="display" parent-widget="widget" deferred="::paramsCheckboxesDeferred"> <div class="legend" ng-if="!widget.isHistoryMode"> <span class="negative2">Expenses: {{getCurrentExpenses() | mnoCurrency : getCurrency()}}</span> <br> <span class="positive2">Revenue: {{getCurrentRevenue() | mnoCurrency : getCurrency()}}</span> </div> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" on-display-alerts="onDisplayAlerts()" widget-engine="::widget.category"> </div> </div></div></div></div></div></div>'),e.put("widgets/accounts-payable-receivable.tmpl.html",'<div widget-accounts-payable-receivable=""> <div ng-show="widget.isEditMode" class="edit"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div setting-time-range="" parent-widget="widget" class="part" deferred="::timeRangeDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)"> <div setting-hist-mode="" parent-widget="widget" deferred="::histModeDeferred"> <div ng-hide="widget.isHistoryMode"> <div class="receivable"> <h3>Accounts Receivable</h3> <div class="price positive2"> {{getCurrentReceivable() | mnoCurrency : getCurrency() : false}} </div> <div class="currency">{{getCurrency()}}</div> </div> <div class="payable"> <h3>Accounts Payable</h3> <div class="price negative2"> {{getCurrentPayable() | mnoCurrency : getCurrency() : false}} </div> <div class="currency">{{getCurrency()}}</div> </div> </div> <div class="chart-container" ng-class="{\'invisible\': !widget.isHistoryMode}"> <div impac-chart="" draw-trigger="drawTrigger.promise" deferred="chartDeferred"></div> <div class="legend"> <span class="negative2">Payable</span> - <span class="positive2">Receivable</span> </div> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" on-display-alerts="onDisplayAlerts()" widget-engine="::widget.category"> </div> </div></div></div></div></div>'),e.put("widgets/accounts-profit-and-loss.tmpl.html",'<div widget-accounts-profit-and-loss=""> <div class="edit" ng-show="widget.isEditMode"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div setting-time-range="" parent-widget="widget" class="part" deferred="::timeRangeDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)" class="row"> <div ng-class="widget.isExpanded() ? \'col-md-6\' : \'col-md-12\'"> <div setting-width="" parent-widget="widget" min="6" max="12" class="settings width" deferred="::widthDeferred"> <div class="widget-lines-container">  <div class="row widget-line header"> <div class="col-xs-4 col-xs-offset-8 text-right"> {{getLastDate() | mnoDate : widget.metadata.hist_parameters.period}} </div> </div>  <div class="row lines-group" ng-repeat="statement in widget.content.summary" ng-class="{profit: statement.name.indexOf(\'profit\')>0}"> <div class="col-xs-12">  <div class="row widget-line" ng-class="{selected: isSelected(statement)}"> <div class="col-xs-1" ng-click="toggleCollapsed(statement)"> <i ng-show="(statement.accounts && statement.accounts.length)" class="fa" ng-class="isCollapsed(statement) ? \'fa-plus-square-o\' : \'fa-minus-square-o\'"> </i></div> <div class="col-xs-7" ng-click="toggleSelectedElement(statement)"> <strong>{{getName(statement) | titleize}}</strong> </div> <div class="col-xs-4 text-right" ng-class="getClassColor(getLastValue(statement))" ng-click="toggleSelectedElement(statement)"> <strong>{{getLastValue(statement) | mnoCurrency : statement.currency}}</strong> </div> </div>  <div class="row" collapse="isCollapsed(statement)"> <div class="col-xs-12"> <div class="row widget-line" ng-click="toggleSelectedElement(account)" ng-repeat="account in statement.accounts" ng-class="{selected: isSelected(account)}"> <div class="col-xs-7 col-xs-offset-1"> {{account.name}} </div> <div class="col-xs-4 text-right" ng-class="getClassColor(getLastValue(account))"> {{getLastValue(account) | mnoCurrency : account.currency}} </div> </div> </div> </div> </div> </div> </div> </div> <div class="col-md-6 right-panel text-center" ng-show="widget.isExpanded()"> <div ng-show="hasElements()"> <h4>{{(widget.metadata.hist_parameters.period || "Monthly") | titleize}} Profit and Loss</h4> <div ng-show="selectedElements.length < 2" class="legend">{{getName(selectedElements[0]) | titleize}}</div> <div class="chart-container"> <div impac-chart="" draw-trigger="::drawTrigger.promise" deferred="::chartDeferred"></div> </div> <div ng-show="selectedElements.length < 2" class="widget-lines-container">  <div class="row"> <span ng-repeat="date in dates track by $index" class="hidden-xs">  <div ng-if="$index % 4 == 0 && $index > 0" class="clearfix dashed"></div> <div class="col-sm-3 text-center">  <div class="row widget-line"> <div class="col-sm-12"> {{date | mnoDate : widget.metadata.hist_parameters.period}} </div> </div>  <div class="row widget-line"> <div class="col-sm-12" ng-class="getClassColor(selectedElements[0].totals[$index])"> {{selectedElements[0].totals[$index] | mnoCurrency : selectedElements[0].currency}} </div> </div> </div> </span> </div>  <div ng-repeat="date in dates track by $index" class="row widget-line visible-xs">  <div class="col-xs-6"> {{date | mnoDate : widget.metadata.hist_parameters.period}} </div>  <div class="col-xs-6 text-right" ng-class="getClassColor(selectedElements[0].totals[$index])"> {{selectedElements[0].totals[$index] | mnoCurrency : selectedElements[0].currency}} </div> </div> </div> <div ng-hide="selectedElements.length < 2" class="widget-lines-container"> <div class="row widget-line" ng-repeat="element in selectedElements"> <div class="col-xs-7 text-left"> <i class="fa fa-circle" style="margin: 0px 8px; color: {{getElementChartColor($index)}}"> {{getName(element) | titleize}} </i></div> <div class="col-xs-5 text-right"> <i ng-class="getClassColor(getLastValue(element))"> {{getLastValue(element) | mnoCurrency : element.currency}} </i> </div> </div> </div> </div> <div ng-hide="hasElements()" class="no-element"> Select one or several account(s) or account(s) type(s) to display the corresponding PnL. </div> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" on-display-alerts="onDisplayAlerts()" widget-engine="::widget.category"> </div> </div> </div></div></div></div>'),e.put("widgets/hr-employee-details.tmpl.html",'<div widget-hr-employee-details=""> <div class="edit" ng-show="widget.isEditMode"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)" class="row"> <div ng-class="widget.isExpanded() ? \'col-md-6\' : \'col-md-12\'"> <div setting-width="" parent-widget="widget" min="3" max="6" class="settings width" deferred="::widthDeferred"> <div setting-param-selector="" parent-widget="widget" param="employee_uid" options="employeesOptions" selected="selectedEmployee" class="row title" deferred="::paramSelectorDeferred1"> <div class="details-container"> <div class="row"> <div class="col-md-4"><label>Job Title</label></div> <div class="col-md-8"><pre>{{getEmployee().job_title || "-" }}</pre></div> </div> <div class="row"> <div class="col-md-4"><label>Company</label></div> <div class="col-md-8"><pre>{{getEmployee().company || getSingleCompanyName()}}</pre></div> </div> <div class="row"> <div class="col-md-4"><label>Phone</label></div> <div class="col-md-8"><pre>{{getEmployee().phone || "-" }}</pre></div> </div> <div class="row"> <div class="col-md-4"><label>Email</label></div> <div class="col-md-8"><pre>{{getEmployee().email || "-" }}</pre></div> </div> <div class="row"> <div class="col-md-4"><label>Date of birth</label></div> <div class="col-md-8"><pre>{{getEmployee().dob || "-" }}</pre></div> </div> <div class="row"> <div class="col-md-4"><label>Gender</label></div> <div class="col-md-8"><pre>{{getEmployee().gender || "-" }}</pre></div> </div> </div> </div> <div class="col-md-6 right-panel" ng-show="widget.isExpanded()"> <div class="legend">Salary calculation period: <span setting-param-selector="" parent-widget="widget" param="period" options="periodOptions" selected="period" deferred="::paramSelectorDeferred2"></span></div> <div class="details-container"> <div class="row"> <div class="col-md-4"><label>Salary</label></div> <div class="col-md-8"><pre>{{getEmployee().salary || "-" }}</pre></div> </div> <div class="row"> <div class="col-md-4"><label>Address</label></div> <div class="col-md-8"><pre>{{formatAddress(getEmployee().address) || "-" }}</pre></div> </div> <div class="row"> <div class="col-md-4"><label>Job location</label></div> <div class="col-md-8"><pre>{{getEmployee().location || "-" }}</pre></div> </div> <div class="row"> <div class="col-md-4"><label>Supervisor</label></div> <div class="col-md-8"><pre>{{getEmployee().supervisor || "-" }}</pre></div> </div> <div class="row"> <div class="col-md-4"><label>Status</label></div> <div class="col-md-8"><pre>{{getEmployee().employment_status || "-" }}</pre></div> </div> <div class="row"> <div class="col-md-4"><label>Note</label></div> <div class="col-md-8"><pre>{{getEmployee().note || "-" }}</pre></div> </div> </div> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" widget-engine="::widget.category"> </div> </div></div></div></div></div>'),e.put("widgets/hr-employees-list.tmpl.html",'<div widget-hr-employees-list=""> <div class="edit" ng-show="widget.isEditMode"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)"> <div class="legend"> <strong>{{widget.content.total.employees}}</strong> employee{{widget.content.total.employees > 1 ? "s" : null}} - Average salary rate (<span setting-param-selector="" parent-widget="widget" param="period" options="periodOptions" selected="period" deferred="::paramSelectorDeferred">): <strong>{{widget.content.total.average_rate | mnoCurrency : widget.content.total.currency}}</strong> </span></div> <div class="widget-lines-container"> <div class="row widget-line header"> <div class="col-sm-2">Company</div> <div class="col-sm-3">Employee</div> <div class="col-sm-2">Title</div> <div class="col-sm-3">Phone</div> <div class="col-sm-2">Salary</div> </div> <div class="row widget-line" ng-repeat="employee in widget.content.employees"> <div class="col-sm-2">{{employee.company || getSingleCompanyName()}}</div> <div class="col-sm-3">{{employee.lastname}} {{employee.firstname}}</div> <div class="col-sm-2"><i>{{employee.job_title}}</i></div> <div class="col-sm-3">{{employee.phone}}</div> <div class="col-sm-2"><i>{{getEmployeeSalary(employee)}}</i></div> </div> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" widget-engine="::widget.category"> </div> </div></div></div>'),e.put("widgets/hr-leaves-balance.tmpl.html",'<div widget-hr-leaves-balance=""> <div class="edit" ng-show="widget.isEditMode"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)"> <div setting-param-selector="" parent-widget="widget" param="employee_id" options="employeesOptions" selected="selectedEmployee" class="employee-name" deferred="::paramSelectorDeferred"> <h3>{{getEmployee().leaves[0].name || \'Vacation leaves\'}} balance</h3> <div class="balance">{{(getEmployee().leaves[0].units || 0) | mnoCurrency : (getEmployee().leaves[0].type_of_units || \'h\')}}</div> <h3>{{getEmployee().leaves[1].name || \'Sick leaves\'}} balance</h3> <div class="balance">{{(getEmployee().leaves[1].units || 0) | mnoCurrency : (getEmployee().leaves[1].type_of_units || \'h\')}}</div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" widget-engine="::widget.category"> </div> </div></div></div></div>'),e.put("widgets/hr-leaves-schedule.tmpl.html",'<div widget-hr-leaves-schedule=""> <div class="edit" ng-show="widget.isEditMode"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)"> <div widget-component-calendar="" ng-model="eventSources"></div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" widget-engine="widget.category"> </div> </div></div></div>'),e.put("widgets/hr-payroll-summary.tmpl.html",'<div widget-hr-payroll-summary=""> <div class="edit" ng-show="widget.isEditMode"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div setting-time-range="" parent-widget="widget" class="part" deferred="::timeRangeDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)" class="row"> <div ng-class="widget.isExpanded() ? \'col-md-6\' : \'col-md-12\'"> <div setting-width="" parent-widget="widget" min="6" max="12" class="settings width" deferred="::widthDeferred"> <div class="widget-lines-container">  <div class="row widget-line header"> <div class="col-xs-11 col-xs-offset-1">Payroll Summary - {{widget.metadata.hist_parameters.period}}</div> </div>  <div class="row lines-group" ng-repeat="statement in widget.content.summary"> <div class="col-xs-12">  <div class="row widget-line" ng-class="{selected: isSelected(statement)}"> <div class="col-xs-1" ng-click="toggleCollapsed(statement)"> <i ng-show="(statement.employees && statement.employees.length)" class="fa" ng-class="isCollapsed(statement) ? \'fa-plus-square-o\' : \'fa-minus-square-o\'"> </i></div> <div class="col-xs-7" ng-click="toggleSelectedElement(statement)"> <strong>{{getName(statement) | titleize}}</strong> </div> <div class="col-xs-4 text-right" ng-click="toggleSelectedElement(statement)"> <strong>{{getLastValue(statement) | mnoCurrency : statement.currency}}</strong> </div> </div>  <div class="row" collapse="isCollapsed(statement)"> <div class="col-xs-12"> <div class="row widget-line" ng-click="toggleSelectedElement(employee)" ng-repeat="employee in statement.employees" ng-class="{selected: isSelected(account)}"> <div class="col-xs-7 col-xs-offset-1"> {{employee.name}} </div> <div class="col-xs-4 text-right"> {{getLastValue(employee) | mnoCurrency : employee.currency}} </div> </div> </div> </div> </div> </div> </div> </div> <div class="col-md-6 right-panel text-center" ng-show="widget.isExpanded()"> <div ng-show="hasElements()"> <h4>{{(widget.content.hist_parameters.period || "Monthly") | titleize}} Payroll Summary</h4> <div setting-hist-mode="" parent-widget="widget" deferred="::histModeDeferred" on-toggle="widget.format()"> <div class="chart-container"> <div impac-chart="" draw-trigger="::drawTrigger.promise" deferred="::chartDeferred"></div> <div ng-show="selectedElements.length < 2" class="legend">{{getName(selectedElements[0]) | titleize}}</div> </div> <div ng-show="selectedElements.length < 2" class="widget-lines-container"> <div ng-show="getTrackedField()" class="row widget-line header"> <div class="col-xs-12">{{getTrackedField()}}</div> </div>  <div class="row"> <span ng-repeat="date in widget.content.dates track by $index" class="hidden-xs">  <div ng-if="$index % 4 == 0 && $index > 0" class="clearfix dashed"></div> <div class="col-sm-3 text-center">  <div class="row widget-line"> <div class="col-sm-12"> {{formatDate(date)}} </div> </div>  <div class="row widget-line"> <div class="col-sm-12" ng-class="getClassColor(selectedElements[0].totals[$index])"> {{selectedElements[0].totals[$index] | mnoCurrency : selectedElements[0].currency }} </div> </div> </div> </span> </div>  <div ng-repeat="date in widget.content.dates track by $index" class="row widget-line visible-xs">  <div class="col-xs-6"> {{formatDate(date)}} </div>  <div class="col-xs-6 text-right" ng-class="getClassColor(selectedElements[0].totals[$index])"> {{selectedElements[0].totals[$index] | mnoCurrency : selectedElements[0].currency}} </div> </div> </div> <div ng-hide="selectedElements.length < 2" class="widget-lines-container"> <div class="row widget-line header"> <div class="col-md-12"> <span ng-if="getTrackedField()"> {{getTrackedField()}} - </span> <span ng-if="widget.isHistoryMode"> From {{widget.content.dates[0] | date : "MMM-d"}} to {{widget.content.dates[widget.content.dates.length - 1] | date : "MMM-d"}} </span> <span ng-if="!widget.isHistoryMode"> {{getPeriod()}} </span> </div> </div> <div class="row widget-line" ng-repeat="element in selectedElements"> <div class="col-xs-7"> <i class="fa fa-circle" style="margin: 0px 8px; color: {{getElementChartColor($index)}}"> {{getName(element) | titleize}} </i></div> <div class="col-xs-5 text-right"> <span ng-if="widget.isHistoryMode">{{getTotalSum(element) | mnoCurrency : element.currency}}</span> <span ng-if="!widget.isHistoryMode">{{getLastValue(element) | mnoCurrency : element.currency}}</span> </div> </div> </div> </div> <div ng-hide="hasElements()" class="no-element"> Select one or several employee(s) or category(ies) to display the corresponding summary. </div> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" widget-engine="widget.category"> </div> </div> </div></div></div></div></div>'),e.put("widgets/hr-payroll-taxes.tmpl.html",'<div widget-hr-payroll-taxes=""> <div ng-show="widget.isEditMode" class="edit"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div setting-time-range="" parent-widget="widget" class="part" deferred="::timeRangeDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)"> <div setting-hist-mode="" parent-widget="widget" deferred="::histModeDeferred"> <div ng-hide="widget.isHistoryMode" class="current"> <div class="price">{{getCurrentPrice() | mnoCurrency : getCurrency() : false}}</div> <div class="currency">{{getCurrency()}}</div> <div class="legend">Taxes upon workforce costs<br>{{getPeriod()}}</div> </div> <div class="history chart-container" ng-class="{\'invisible\': !widget.isHistoryMode}"> <div impac-chart="" draw-trigger="::drawTrigger.promise" deferred="::chartDeferred"></div> <div class="legend">Taxes upon workforce costs</div> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" widget-engine="::widget.category"> </div> </div> </div></div></div></div>'),e.put("widgets/hr-salaries-summary.tmpl.html",'<div widget-hr-salaries-summary=""> <div class="edit" ng-show="widget.isEditMode"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div align="center" ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)" class="row"> <div ng-class="widget.isExpanded() ? \'col-md-6\' : \'col-md-12\'"> <div setting-width="" parent-widget="widget" min="3" max="6" class="settings width" deferred="::widthDeferred"> <h3 class="left">Average Salary Rate</h3> <div class="price"> {{widget.content.total.average_rate | mnoCurrency : widget.content.total.currency}} </div> <div class="currency" setting-param-selector="" parent-widget="widget" param="period" options="periodOptions" selected="period" deferred="::paramSelectorDeferred1"> <div class="legend"> <span>({{widget.content.total.employees}} employee{{widget.content.total.employees > 1 ? "s" : null}} with known salary)</span> </div> </div> <div class="right-panel" ng-class="{\'col-md-12 invisible\': !widget.isExpanded(), \'col-md-6\': widget.isExpanded()}"> <h3 class="right">Filter: <span setting-param-selector="" parent-widget="widget" param="filter" options="filterOptions" selected="filter" deferred="::paramSelectorDeferred2"></span></h3> <div class="chart-container"> <div impac-chart="" draw-trigger="::drawTrigger.promise" deferred="::chartDeferred"></div> </div> <div class="widget-lines-container"> <div class="row widget-line" ng-repeat="data in widget.content.summary.data"> <div class="col-xs-2"> <i ng-hide="widget.content.summary.filter==\'age_range\'" class="fa fa-circle" style="color: {{getColorByIndex($index)}}"> </i></div> <div class="col-xs-5"> {{data.label}} </div> <div class="col-xs-5 text-right"> <i>{{data.value | mnoCurrency : widget.content.total.currency}} (av.)</i> </div> </div> </div> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" widget-engine="::widget.category"> </div> </div> </div></div></div></div>'),e.put("widgets/hr-superannuation-accruals.tmpl.html",'<div widget-hr-superannuation-accruals=""> <div class="edit" ng-show="widget.isEditMode"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)" class="row"> <div setting-param-selector="" parent-widget="widget" param="employee_id" options="employeesOptions" selected="selectedEmployee" class="currency" deferred="::paramSelectorDeferred"> <h3>Superannuation Balance</h3> <div class="price">{{(getEmployee().total_super || 0) | mnoCurrency : getEmployee().currency}}</div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" widget-engine="::widget.category"> </div> </div></div></div></div>'),e.put("widgets/hr-timesheets.tmpl.html",'<div widget-hr-timesheets=""> <div class="edit" ng-show="widget.isEditMode"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div setting-time-range="" parent-widget="widget" class="part" deferred="::timeRangeDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)"> <div setting-param-selector="" parent-widget="widget" param="employee_id" options="employeesOptions" selected="selectedEmployee" class="currency" deferred="::paramSelectorDeferred"> <div class="widget-lines-container">  <div class="row widget-line header"> <div class="col-sm-12"> From {{widget.content.dates[0] | date : \'MMM-d\'}} to {{widget.content.dates[widget.content.dates.length - 1] | date : \'MMM-d\'}} </div> </div>  <div class="row lines-group"> <div class="col-xs-12">  <div class="row widget-line"> <div class="col-xs-1" ng-click="toggleCollapsed(\'total_time_worked\')" style="cursor: pointer;"> <i class="fa" ng-class="isCollapsed(\'total_time_worked\') ? \'fa-plus-square-o\' : \'fa-minus-square-o\'"> </i></div> <div class="col-xs-7"> <strong>Total Time Worked</strong> </div> <div class="col-xs-4 text-right"> <strong>{{getEmployeeTimeWorked()}} h</strong> </div> </div>  <div class="row" collapse="isCollapsed(\'total_time_worked\')"> <div class="col-xs-12"> <div class="row widget-line"> <div class="col-xs-11 col-xs-offset-1"> <i>Activities detail not found</i> </div> </div> </div> </div> </div> </div>  <div class="row lines-group"> <div class="col-xs-12">  <div class="row widget-line"> <div class="col-xs-1" ng-click="toggleCollapsed(\'total_time_of\')" style="cursor: pointer;"> <i class="fa" ng-class="isCollapsed(\'total_time_of\') ? \'fa-plus-square-o\' : \'fa-minus-square-o\'"> </i></div> <div class="col-xs-7"> <strong>Total Time Off</strong> </div> <div class="col-xs-4 text-right"> <strong>{{getEmployeeTimeOff()}} h</strong> </div> </div>  <div class="row" collapse="isCollapsed(\'total_time_of\')"> <div class="col-xs-12"> <div class="row widget-line"> <div class="col-xs-7 col-xs-offset-1">PTO</div> <div class="col-xs-4 text-right">0 h</div> </div> <div class="row widget-line"> <div class="col-xs-7 col-xs-offset-1">Vacation</div> <div class="col-xs-4 text-right">0 h</div> </div> </div> </div> </div> </div> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" widget-engine="::widget.category"> </div> </div> </div></div></div></div>'),e.put("widgets/hr-workforce-summary.tmpl.html",'<div widget-hr-workforce-summary=""> <div class="edit" ng-show="widget.isEditMode"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div align="center" ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)" class="row"> <div ng-class="widget.isExpanded() ? \'col-md-6\' : \'col-md-12\'"> <div setting-width="" parent-widget="widget" min="3" max="6" class="settings width" deferred="::widthDeferred"> <h3 class="left">Total Workforce</h3> <div class="price"> {{getTotalWorkforce() | mnoCurrency : getCurrency()}} </div> <div class="currency" setting-param-selector="" parent-widget="widget" param="period" options="periodOptions" selected="period" deferred="::paramSelectorDeferred1"> <div class="legend"> <span>({{getNumberOfEmployees()}} employee{{getNumberOfEmployees() > 1 ? \'s\' : null}} with known salary)</span> </div> </div> <div class="right-panel" ng-class="{\'col-md-12 invisible\': !widget.isExpanded(), \'col-md-6\': widget.isExpanded()}"> <h3 class="right">Filter: <span setting-param-selector="" parent-widget="widget" param="filter" options="filterOptions" selected="filter" deferred="::paramSelectorDeferred2"></span></h3> <div class="chart-container"> <div impac-chart="" draw-trigger="::drawTrigger.promise" deferred="::chartDeferred"></div> </div> <div class="widget-lines-container"> <div class="row widget-line" ng-repeat="data in widget.content.summary.data"> <div class="col-xs-2"> <i class="fa fa-circle" style="color: {{getColorByIndex($index)}}"> </i></div> <div class="col-xs-7"> {{widget.content.summary.filter == "salary_range" ? formatSalaryRange(data) : data.label}} </div> <div class="col-xs-3 text-right"> <i>{{((data.value / widget.content.total.amount)*100).toFixed()}}%</i> </div> </div> </div> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" widget-engine="::widget.category"> </div> </div> </div></div></div></div>'),e.put("widgets/invoices-aged-payables-receivables.tmpl.html",'<div widget-invoices-aged-payables-receivables=""> <div class="edit" ng-show="widget.isEditMode"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div setting-time-range="" parent-widget="widget" class="part" deferred="::timeRangeDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)" class="row"> <div ng-class="widget.isExpanded() ? \'col-md-6\' : \'col-md-12\'"> <div setting-width="" parent-widget="widget" min="6" max="12" class="settings width" deferred="::widthDeferred"> <div class="widget-lines-container"> <div class="row widget-line header"> <div class="col-xs-8">Aged Payables & Receivables</div> <div class="col-xs-4 text-right">Total</div> </div>  <div class="row lines-group"> <div class="col-xs-12"> <div class="row widget-line" ng-class="{selected: isSelected(widget.content.payables)}"> <div class="col-xs-1" ng-click="toggleCollapsed(widget.content.payables)"> <i ng-show="(widget.content.payables.suppliers && widget.content.payables.suppliers.length)" class="fa" ng-class="isCollapsed(widget.content.payables) ? \'fa-plus-square-o\' : \'fa-minus-square-o\'"> </i></div> <div class="col-xs-7" ng-click="toggleSelectedElement(widget.content.payables)"> <strong>Aged Payables</strong> </div> <div class="col-xs-4 text-right" ng-click="toggleSelectedElement(widget.content.payables)"> <strong>{{getTotalSum(widget.content.payables) | mnoCurrency : widget.content.payables.currency}}</strong> </div> </div> <div class="row" ng-hide="isCollapsed(widget.content.payables)"> <div class="col-xs-12"> <div class="row widget-line" ng-click="toggleSelectedElement(supplier)" ng-repeat="supplier in widget.content.payables.suppliers" ng-class="isSelected(supplier) ? \'selected\' : null"> <div class="col-xs-7 col-xs-offset-1"> {{supplier.name}} </div> <div class="col-xs-4 text-right"> {{getTotalSum(supplier) | mnoCurrency : supplier.currency}} </div> </div> </div> </div> </div> </div>  <div class="row lines-group"> <div class="col-xs-12"> <div class="row widget-line" ng-class="{selected: isSelected(widget.content.receivables)}"> <div class="col-xs-1" ng-click="toggleCollapsed(widget.content.receivables)"> <i ng-show="(widget.content.receivables.customers && widget.content.receivables.customers.length)" class="fa" ng-class="isCollapsed(widget.content.receivables) ? \'fa-plus-square-o\' : \'fa-minus-square-o\'"> </i></div> <div class="col-xs-7" ng-click="toggleSelectedElement(widget.content.receivables)"> <strong>Aged Receivables</strong> </div> <div class="col-xs-4 text-right" ng-click="toggleSelectedElement(widget.content.receivables)"> <strong>{{getTotalSum(widget.content.receivables) | mnoCurrency : widget.content.receivables.currency}}</strong> </div> </div> <div class="row" ng-hide="isCollapsed(widget.content.receivables)"> <div class="col-xs-12"> <div class="row widget-line" ng-click="toggleSelectedElement(customer)" ng-repeat="customer in widget.content.receivables.customers" ng-class="isSelected(customer) ? \'selected\' : null"> <div class="col-xs-7 col-xs-offset-1"> {{customer.name}} </div> <div class="col-xs-4 text-right"> <span>{{getTotalSum(customer) | mnoCurrency : customer.currency}}</span> </div> </div> </div> </div> </div> </div> </div> </div> <div class="right-panel text-center" ng-class="{\'col-md-6\': widget.isExpanded(), \'col-md-12 invisible\': !widget.isExpanded()}"> <div ng-show="hasElements()"> <h4>{{(widget.content.hist_parameters.period || "Monthly") | titleize}} Aged Payables and Receivables</h4> <div ng-show="selectedElements.length < 2" class="legend">{{getName(selectedElements[0]) | titleize}}</div> <div class="chart-container"> <div impac-chart="" draw-trigger="::drawTrigger.promise" deferred="::chartDeferred"></div> </div> <div ng-show="selectedElements.length < 2" class="widget-lines-container">  <div class="row"> <span ng-repeat="date in widget.content.dates track by $index" class="hidden-xs">  <div ng-if="$index % 4 == 0 && $index > 0" class="clearfix dashed"></div> <div class="col-sm-3 text-center">  <div class="row widget-line"> <div class="col-sm-12"> {{date | mnoDate : widget.metadata.hist_parameters.period}} </div> </div>  <div class="row widget-line"> <div class="col-sm-12" ng-class="getClassColor(selectedElements[0].totals[$index])"> {{selectedElements[0].totals[$index] | mnoCurrency : selectedElements[0].currency}} </div> </div> </div> </span> </div>  <div ng-repeat="date in widget.content.dates track by $index" class="row widget-line visible-xs">  <div class="col-xs-6"> {{date | mnoDate : widget.metadata.hist_parameters.period}} </div>  <div class="col-xs-6 text-right" ng-class="getClassColor(selectedElements[0].totals[$index])"> {{selectedElements[0].totals[$index] | mnoCurrency : selectedElements[0].currency}} </div> </div> <div class="row astericks-info"> <div class="col-xs-12"> <p><i>* Your opening-balance of receivables and/or payables for this period.</i></p> </div> </div> </div> <div ng-hide="selectedElements.length < 2" class="widget-lines-container"> <div class="row widget-line header"> <div class="col-xs-4 col-xs-offset-8 text-right">Totals</div> </div> <div class="row widget-line" ng-repeat="element in selectedElements"> <div class="col-xs-2"> <i class="fa fa-circle" style="margin: 0px 8px; color: {{getElementChartColor($index)}}"> </i></div> <div class="col-xs-6"> {{getName(element) | titleize}} </div> <div class="col-xs-4 text-right"> <i>{{getTotalSum(element) | mnoCurrency : element.currency}}</i> </div> </div> <div class="row astericks-info"> <div class="col-xs-12"> <p><i>* Your opening-balance of receivables and/or payables for this period.</i></p> </div> </div> </div> </div> <div ng-hide="hasElements()" class="no-element"> Select one or several account(s) or category(ies) to display the payables/receivables evolution(s). </div> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" widget-engine="::widget.category"> </div> </div> </div></div></div></div>'),e.put("widgets/invoices-list.accessible.tmpl.html",'<div widget-invoices-list=""> <div class="edit" ng-show="widget.isEditMode"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <table class="table widget-lines-container" ng-hide="widget.isEditMode">  <tr class="widget-line header"> <td>{{entityTypeCap}}</td> <td>Paid</td> <td>Due</td> <td>Invoiced</td> </tr>  <tr class="widget-line" ng-show="(isDataFound==false)"> <td>No {{orderBy}}invoice found for your {{entityType}}</td> </tr>  <tr class="widget-line" ng-show="(isDataFound==true)" ng-repeat="entity in widget.content.entities"> <td>{{entity.name}}</td> <td><i>{{entity.total_paid | mnoCurrency : entity.currency}}</i></td> <td><i>{{entity.total_due | mnoCurrency : entity.currency}}</i></td> <td><i>{{entity.total_invoiced | mnoCurrency : entity.currency}}</i></td> </tr> </table> </div> </div>'),e.put("widgets/invoices-list.tmpl.html",'<div widget-invoices-list=""> <div class="edit" ng-show="widget.isEditMode"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div setting-dates-picker="" parent-widget="widget" class="part" from="(widget.metadata.hist_parameters.from || defaultFrom)" to="(widget.metadata.hist_parameters.to || defaultTo)" keep-today="widget.metadata.hist_parameters.keep_today" deferred="::datesPickerDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode" class="widget-lines-container"> <div ng-show="(isDataFound==true)" setting-limit-entries="" parent-widget="widget" deferred="::limitEntriesDeferred" selected="limitEntriesSelected" max="widget.content.entities.length" entries-label="limitEntriesLabel">   <div ng-if="widget.width > 3" class="row widget-line header"> <div class="col-sm-4">{{entityTypeCap}}</div> <div class="col-sm-7"> <div class="row"> <div class="col-xs-4">Paid</div> <div class="col-xs-4">Due</div> <div class="col-xs-4">Invoiced</div> </div> </div> </div>  <div ng-if="widget.width > 3" class="row widget-line" ng-show="(isDataFound==true)" ng-repeat="entity in widget.content.entities | limitTo:limitEntriesSelected" tooltip-placement="top" tooltip-html-unsafe="{{getInvoices(entity)}}" tooltip-animation="false" tooltip-append-to-body="true" tooltip-class="impac-widgets-tooltip"> <div class="col-sm-4"><b>{{entity.name}}</b></div> <div class="col-sm-7"> <div class="row"> <div class="col-xs-4"><i>{{entity.total_paid | mnoCurrency : entity.currency}}</i></div> <div class="col-xs-4"><i>{{entity.total_due | mnoCurrency : entity.currency}}</i></div> <div class="col-xs-4"><i>{{entity.total_invoiced | mnoCurrency : entity.currency}}</i></div> </div> </div> <div class="col-sm-1 text-right"><i class="fa fa-info-circle"></i></div> </div>   <div ng-if="widget.width <= 3" class="row widget-line header"> <div class="col-xs-12" ng-show="orderBy == \'paid \'">{{entityTypeCap}} - Total paid</div> <div class="col-xs-12" ng-show="orderBy == \'due \'">{{entityTypeCap}} - Total due</div> <div class="col-xs-12" ng-hide="orderBy == \'paid \' || orderBy == \'due \'">{{entityTypeCap}} - Total invoiced</div> </div>  <div ng-if="widget.width <= 3" class="row widget-line" ng-show="(isDataFound==true)" ng-repeat="entity in widget.content.entities | limitTo:limitEntriesSelected" tooltip-placement="top" tooltip-html-unsafe="{{getInvoices(entity)}}" tooltip-animation="false" tooltip-append-to-body="true" tooltip-class="impac-widgets-tooltip"> <div class="col-xs-12"><b>{{entity.name}}</b></div> <div class="col-xs-8" ng-show="orderBy == \'paid \'"><i>{{entity.total_paid | mnoCurrency : entity.currency}}</i></div> <div class="col-xs-8" ng-show="orderBy == \'due \'"><i>{{entity.total_due | mnoCurrency : entity.currency}}</i></div> <div class="col-xs-8" ng-hide="orderBy == \'paid \' || orderBy == \'due \'"><i>{{entity.total_invoiced | mnoCurrency : entity.currency}}</i></div> <div class="col-xs-4 text-right"><i class="fa fa-info-circle"></i></div> </div>  <div class="row widget-line" ng-show="(isDataFound==false)"> <div class="col-xs-12">No {{orderBy}}invoice found for your {{entityType}}</div> </div> </div> </div> </div></div></div>'),e.put("widgets/invoices-summary.tmpl.html",'<div widget-invoices-summary=""> <div class="edit" ng-show="widget.isEditMode"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div setting-dates-picker="" parent-widget="widget" class="part" from="(widget.metadata.hist_parameters.from || defaultFrom)" to="widget.metadata.hist_parameters.to" keep-today="widget.metadata.hist_parameters.keep_today" deferred="::datesPickerDeferred"> <div setting-chart-filters="" parent-widget="widget" class="part" deferred="::chartFiltersDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div align="center" ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)" class="chart-container"> <div impac-chart="" draw-trigger="::drawTrigger.promise" deferred="::chartDeferred"></div> <div class="legend"> <span>{{widget.content.legend}}</span> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" widget-engine="::widget.category"> </div> </div></div></div></div></div>'),e.put("widgets/sales-aged.tmpl.html",'<div widget-sales-aged=""> <div class="edit" ng-show="widget.isEditMode"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div setting-time-range="" parent-widget="widget" class="part" deferred="::timeRangeDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)" class="center"> <div setting-param-selector="" parent-widget="widget" param="filter" options="filterOptions" selected="filter" no-reload="" truncate-no="60" on-select="widget.format()" style="text-align: center;" deferred="::paramSelectorDeferred"> <div class="chart-container"> <div impac-chart="" draw-trigger="::drawTrigger.promise" deferred="::chartDeferred"></div> </div> <div class="legend">From {{widget.content.dates[0] | mnoDate : widget.metadata.hist_parameters.period}} to {{getLastDate() | mnoDate : widget.metadata.hist_parameters.period}}</div> <div class="widget-lines-container">  <div class="row"> <span ng-repeat="date in formattedDates track by $index" class="hidden-xs">  <div ng-if="$index % 4 == 0 && $index > 0" class="clearfix dashed"></div> <div class="col-sm-3 text-center">  <div class="row widget-line"> <div class="col-xs-12"> {{date}} </div> </div>  <div class="row widget-line"> <div ng-hide="filter.value == \'quantity_sold\'" class="col-xs-12" ng-class="getClassColor(getTotal($index - 1),getTotal($index))"> {{getTotal($index) | mnoCurrency : widget.content.currency}} </div> <div ng-show="filter.value == \'quantity_sold\'" class="col-xs-12" ng-class="getClassColor(getTotal($index - 1),getTotal($index))"> {{getTotal($index)}} </div> </div> </div> </span> </div>  <div ng-repeat="date in formattedDates track by $index" class="row widget-line visible-xs">  <div class="col-xs-6"> {{date}} </div>  <div ng-hide="filter.value == \'quantity_sold\'" class="col-xs-6 text-right" ng-class="getClassColor(getTotal($index - 1),getTotal($index))"> {{getTotal($index) | mnoCurrency : widget.content.currency}} </div> <div ng-show="filter.value == \'quantity_sold\'" class="col-xs-6 text-right" ng-class="getClassColor(getTotal($index - 1),getTotal($index))"> {{getTotal($index)}} </div> </div> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" widget-engine="::widget.category"> </div> </div> </div></div></div></div>'),e.put("widgets/sales-break-even.tmpl.html",'<div widget-sales-break-even=""> <div class="edit" ng-show="widget.isEditMode"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div setting-time-range="" parent-widget="widget" class="part" deferred="::timeRangeDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)" class="align-center"> <div class="legend">From {{widget.content.period.from | date : \'d MMM yyyy\'}} to {{widget.content.period.to | date : \'d MMM yyyy\'}}</div> <div class="block to-date"> <div class="title">Sales to Date</div> <div class="price">{{widget.content.sales.to_date | mnoCurrency : widget.content.currency : false}}</div> Target: <span class="edit-target" style="float: right;" editable-text="threshold" buttons="no" onaftersave="updateSettings()"> {{threshold | mnoCurrency : widget.content.currency : false}} </span> </div> <div ng-show="widget.content.break_even" class="block to-breakeven"> <div class="title">Projection to Break-Even</div> <span ng-show="isTargetMet()">Your sales already exceed your target by:</span> <div class="price">{{getVariance() | mnoCurrency : widget.content.currency : false}}</div> <span ng-hide="isTargetMet()"> Projected date: <span style="float: right;">{{getProjectedDate() | date : \'d-MM-yy\'}}</span> <br> Opportunities to close: <span style="float: right;">{{getOpportunitiesToClose()}}</span> </span> </div> <div ng-show="widget.content.break_even" class="legend">{{widget.content.break_even.eligible_opportunities}} eligible opportunities</div> <div ng-hide="widget.content.break_even" class="block to-breakeven"> <span class="edit-target" editable-text="threshold" buttons="no" onaftersave="updateSettings()"> <div class="define-text">Click to define your sales target</div> </span> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" widget-engine="widget.category"> </div> </div></div></div></div>'),e.put("widgets/sales-comparison.tmpl.html",'<div widget-sales-comparison=""> <div class="edit" ng-show="widget.isEditMode"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div setting-time-range="" parent-widget="widget" class="part" deferred="::timeRangeDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)" class="row"> <div ng-class="widget.isExpanded() ? \'col-md-6\' : \'col-md-12\'"> <div setting-width="" parent-widget="widget" min="6" max="12" class="settings width" deferred="::widthDeferred"> <div class="row legend center"> Compare by: <div setting-param-selector="" parent-widget="widget" style="display: inline;" param="criteria" options="criteriaOptions" selected="criteria" truncate-no="30" deferred="::paramSelectorDeferred1"> | See: <div setting-param-selector="" parent-widget="widget" style="display: inline;" param="filter" options="filterOptions" selected="filter" truncate-no="30" on-select="widget.format()" no-reload="" deferred="::paramSelectorDeferred2"> </div> <div class="widget-lines-container"> <div class="row widget-line header"> <div class="col-xs-12"> Total sales from {{widget.content.dates[0] | mnoDate : widget.metadata.hist_parameters.period}} to {{getLastDate() | mnoDate : widget.metadata.hist_parameters.period}} </div> </div> <div class="row lines-group" ng-repeat="statement in widget.content.sales_comparison"> <div class="col-xs-12"> <div class="row widget-line" ng-class="{selected: isSelected(statement)}"> <div class="col-xs-1" ng-click="toggleCollapsed(statement)"> <i ng-show="(statement.sales && statement.sales.length)" class="fa" ng-class="isCollapsed(statement) ? \'fa-plus-square-o\' : \'fa-minus-square-o\'"> </i></div> <div class="col-xs-7" ng-click="toggleSelectedElement(statement)"> <strong>{{statement.name | titleize}}</strong> </div> <div ng-show="filter.value == \'quantity_sold\'" class="col-xs-4 text-right" ng-click="toggleSelectedElement(statement)"> <strong>{{getTotalForPeriod(statement)}}</strong> </div> <div ng-hide="filter.value == \'quantity_sold\'" class="col-xs-4 text-right" ng-click="toggleSelectedElement(statement)"> <strong>{{getTotalForPeriod(statement) | mnoCurrency : statement.currency}}</strong> </div> </div> <div class="row" collapse="isCollapsed(statement)"> <div class="col-xs-12"> <div class="row widget-line" ng-click="toggleSelectedElement(sale)" ng-repeat="sale in statement.sales" ng-class="{selected: isSelected(sale)}"> <div class="col-xs-7 col-xs-offset-1"> {{sale.name}} </div> <div ng-show="filter.value == \'quantity_sold\'" class="col-xs-4 text-right"> {{getTotalForPeriod(sale)}} </div> <div ng-hide="filter.value == \'quantity_sold\'" class="col-xs-4 text-right"> {{getTotalForPeriod(sale) | mnoCurrency : sale.currency}} </div> </div> </div> </div> </div> </div> </div> </div> <div class="col-md-6 right-panel text-center" ng-show="widget.isExpanded()"> <div ng-show="hasElements()"> <div class="chart-container"> <div impac-chart="" draw-trigger="::drawTrigger.promise" deferred="::chartDeferred"></div> </div> <div class="widget-lines-container"> <div class="row widget-line header"> <div class="col-xs-12"> Total sales from {{widget.content.dates[0] | mnoDate : widget.metadata.hist_parameters.period}} to {{getLastDate() | mnoDate : widget.metadata.hist_parameters.period}} </div> </div> <div class="row widget-line" ng-repeat="element in selectedElements"> <div class="col-xs-1"> <i class="fa fa-circle" style="color: {{getElementChartColor($index)}}"> </i></div> <div class="col-xs-7"> {{element.name | titleize}} </div> <div class="col-xs-4 text-right"> <i ng-show="filter.value == \'quantity_sold\'">{{getTotalForPeriod(element)}}</i> <i ng-hide="filter.value == \'quantity_sold\'">{{getTotalForPeriod(element) | mnoCurrency : element.currency}}</i> </div> </div> </div> </div> <div ng-hide="hasElements()" class="no-element"> Select one or several sales category(ies) to display the corresponding comparison. </div> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" widget-engine="::widget.category"> </div> </div> </div></div></div></div></div></div>'),e.put("widgets/sales-customer-details.tmpl.html",'<div widget-sales-customer-details=""> <div class="edit" ng-show="widget.isEditMode"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div setting-time-range="" parent-widget="widget" class="part" deferred="::timeRangeDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)" class="row"> <div ng-class="widget.isExpanded() ? \'col-md-6\' : \'col-md-12\'"> <div setting-width="" parent-widget="widget" min="3" max="6" class="settings width" deferred="::widthDeferred"> <div setting-param-selector="" parent-widget="widget" param="customer_uid" options="customersOptions" selected="selectedCustomer" class="row title" deferred="::paramSelectorDeferred"> <div class="details-container"> <div class="row"> <div class="col-md-4"><label>Email</label></div> <div class="col-md-8"><pre>{{getCustomer().email}}</pre></div> </div> <div class="row"> <div class="col-md-4"><label>Phone</label></div> <div class="col-md-8"><pre>{{getCustomer().phone}}</pre></div> </div> <div class="row"> <div class="col-md-4"><label>Website</label></div> <div class="col-md-8"><pre>{{getCustomer().website}}</pre></div> </div> <div class="row"> <div class="col-md-4"><label>Contact</label></div> <div class="col-md-8"><pre>{{getCustomer().contact}}</pre></div> </div> <div class="row"> <div class="col-md-4"><label>City</label></div> <div class="col-md-8"><pre>{{getCustomer().city}}</pre></div> </div> <div class="row"> <div class="col-md-4"><label>Country</label></div> <div class="col-md-8"><pre>{{getCustomer().country}}</pre></div> </div> </div> </div> <div class="col-md-6 right-panel" ng-show="widget.isExpanded()"> <div class="details-container"> <div class="row" style="border-bottom: solid 1px #e6e6e6; margin-bottom: 10px; padding-bottom: 5px;"> <div class="col-md-3"><label>Address</label></div> <div class="col-md-9"><pre>{{formatAddress(getCustomer().full_address)}}</pre></div> </div> <div class="row"> <div class="col-md-12 center legend">From {{getFromDate() | date : \'d MMM yyyy\'}} to {{getToDate() | date : \'d MMM yyyy\'}}:</div> </div> <div class="row"> <div class="col-md-5"><label>Total invoiced</label></div> <div class="col-md-7"><pre>{{getCustomer().total_invoiced | mnoCurrency : getCustomer().currency}}</pre></div> </div> <div class="row"> <div class="col-md-5"><label>Total paid</label></div> <div class="col-md-7"><pre>{{getCustomer().total_paid | mnoCurrency : getCustomer().currency}}</pre></div> </div> <div class="row"> <div class="col-md-5"><label>Total due</label></div> <div class="col-md-7"><pre>{{getCustomer().total_due | mnoCurrency : getCustomer().currency}}</pre></div> </div> </div> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" widget-engine="::widget.category"> </div> </div></div></div></div></div></div>'),e.put("widgets/sales-cycle.tmpl.html",'<div widget-sales-cycle=""> <div class="edit" ng-show="widget.isEditMode"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div setting-params-picker="" options="statusOptions" param="status_selection" parent-widget="widget" class="part" deferred="::paramsPickerDeferred"> <div setting-time-range="" parent-widget="widget" class="part" deferred="::timeRangeDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div align="center" ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)" class="chart-container"> <div impac-chart="" draw-trigger="::drawTrigger.promise" deferred="::chartDeferred"></div> <div class="legend"> <span>Your sales cycle represents how much time your leads stay set to each status</span> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" widget-engine="::widget.category"> </div> </div></div></div></div></div>'),e.put("widgets/sales-forecast.tmpl.html",'<div widget-sales-forecast=""> <div class="edit" ng-show="widget.isEditMode"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)"> <div class="chart-container"> <div impac-chart="" draw-trigger="::drawTrigger.promise" deferred="::chartDeferred"></div> </div> <div class="widget-lines-container"> <div class="row widget-line header"> <div class="col-xs-12">Projection on the next 6 months</div> </div> <div class="row lines-group" ng-repeat="date in widget.content.dates.slice(6) track by $index" ng-init="collapsed = true"> <div class="col-xs-12"> <div class="row widget-line" ng-class="{main: widget.content.opportunities.slice(6)[$index].length > 0}" ng-click="collapsed = !collapsed"> <div class="col-xs-6"> {{date | mnoDate : widget.metadata.hist_parameters.period}} </div> <div class="col-xs-6 text-right"> <strong>{{widget.content.totals.slice(6)[$index] | mnoCurrency : widget.content.currency}}</strong> </div> </div> <div class="row" collapse="collapsed"> <div class="col-xs-12"> <div class="row widget-line" ng-repeat="opp in widget.content.opportunities.slice(6)[$index]"> <div class="col-xs-6"> {{opp.name}} </div> <div class="col-xs-6 text-right"> {{getOpportunityAmount(opp) | mnoCurrency : getOpportunityCurrency(opp)}} </div> </div> </div> </div> </div> </div> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" widget-engine="::widget.category"> </div> </div> </div></div>'),e.put("widgets/sales-growth.tmpl.html",'<div widget-sales-growth=""> <div class="edit" ng-show="widget.isEditMode"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div setting-time-range="" parent-widget="widget" class="part" deferred="::timeRangeDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)"> <div class="selector"> <div setting-param-selector="" parent-widget="widget" param="product" options="productOptions" selected="product" no-reload="" on-select="widget.format()" deferred="::paramSelectorDeferred1"> <div ng-show="product.value != -1" setting-param-selector="" parent-widget="widget" param="filter" options="filterOptions" selected="filter" deferred="::paramSelectorDeferred2"> </div> <div class="chart-container" ng-class="{\'invisible\': product.value==-1}"> <div impac-chart="" draw-trigger="::drawTrigger.promise" deferred="::chartDeferred"></div> </div> <div ng-show="product.value != -1" class="legend text-center">{{getSelectedProduct().name}}</div> <div class="price text-center" ng-hide="isDataQuantity || product.value == -1" tooltip="total for last period">{{getCurrentValue() | mnoCurrency : getSelectedProduct().currency}}</div> <div class="price text-center" ng-show="isDataQuantity && product.value != -1" tooltip="total for last period">{{getCurrentValue()}}</div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" widget-engine="::widget.category"> </div> </div></div></div></div></div></div>'),e.put("widgets/sales-leads-funnel.tmpl.html",'<div widget-sales-leads-funnel=""> <div class="edit" ng-show="widget.isEditMode"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div setting-params-picker="" options="statusOptions" param="status_selection" parent-widget="widget" class="part" deferred="::paramsPickerDeferred"> <div setting-time-range="" parent-widget="widget" class="part" deferred="::timeRangeDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)" class="row"> <div ng-class="widget.isExpanded() ? \'col-md-6\' : \'col-md-12\'"> <div setting-width="" parent-widget="widget" min="6" max="12" class="settings width" deferred="::widthDeferred"> <div class="legend">Your leads sales funnel from {{widget.content.from | date : \'d MMM yyyy\'}} to {{widget.content.to | date : \'d MMM yyyy\'}}</div> <div class="funnel-container"> <div class="tile" ng-repeat="elem in funnel" ng-click="toggleSelectStatus(elem.status)"> <div class="colored-area" ng-style="elem.coloredWidth" ng-class="isSelected(elem.status) ? \'selected\' : \'\'">{{elem.number}}</div> <div class="main-text" ng-style="elem.statusWidth">{{elem.status | titleize}}</div> </div> </div> </div> <div class="col-md-6 right-panel text-center" ng-show="widget.isExpanded()"> <div ng-hide="selectedStatus" class="currency"> Select a status to display a list of the corresponding leads </div> <div ng-show="selectedStatus" class="widget-lines-container"> <div class="row lines-group widget-line" ng-repeat="lead in getSelectedLeads()" tooltip-trigger="mouseenter" tooltip-placement="top" tooltip-html-unsafe="{{getLeadDescription(lead)}}" tooltip-animation="false" tooltip-append-to-body="true" tooltip-class="impac-widgets-tooltip"> <div class="col-sm-7"> {{lead.first_name | titleize}} {{lead.last_name | titleize}} <span ng-show="lead.organization">({{lead.organization}})</span> </div> <div class="col-sm-5 text-right"> <strong>{{lead.lead_status | titleize}}</strong> </div> </div> </div> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" widget-engine="::widget.category"> </div> </div> </div></div></div></div></div>'),e.put("widgets/sales-leads-list.tmpl.html",'<div widget-sales-leads-list=""> <div class="edit" ng-show="widget.isEditMode"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)"> <div class="widget-lines-container"> <div class="row lines-group widget-line" ng-repeat="lead in widget.content.leads" tooltip-trigger="mouseenter" tooltip-placement="top" tooltip-html-unsafe="{{getLeadDescription(lead)}}" tooltip-animation="false" tooltip-append-to-body="true" tooltip-class="impac-widgets-tooltip"> <div class="col-sm-7"> {{lead.first_name | titleize}} {{lead.last_name | titleize}} <span ng-show="lead.organization">({{lead.organization}})</span> </div> <div class="col-sm-5 text-right"> <strong>{{lead.lead_status | titleize}}</strong> </div> </div> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" widget-engine="::widget.category"> </div> </div> </div></div>'),e.put("widgets/sales-list.tmpl.html",'<div widget-sales-list=""> <div class="edit" ng-show="widget.isEditMode"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div class="selector"> <span setting-param-selector="" parent-widget="widget" param="filter" options="filterOptions" selected="filter" deferred="::paramSelectorDeferred"> <span setting-dates-picker="" parent-widget="widget" from="widget.metadata.hist_parameters.from" to="widget.metadata.hist_parameters.to" keep-today="widget.metadata.hist_parameters.keep_today" deferred="::datesPickerDeferred"> </span></span></div> <div class="widget-lines-container" ng-show="(isDataFound==true)"> <div class="row lines-group" ng-repeat="company in widget.content.summary"> <div class="col-xs-12"> <div class="row widget-line"> <div class="col-xs-1" ng-click="toggleCollapsed(company.name)" style="cursor: pointer;"> <i class="fa" ng-class="isCollapsed(company.name) ? \'fa-plus-square-o\' : \'fa-minus-square-o\'"> </i></div> <div class="col-xs-7"> <strong>{{company.name | titleize}}</strong> </div> <div class="col-xs-4 text-right" ng-show="{{filter.value.match(\'quantity\')}}"> <strong>{{company.total}}</strong> </div> <div class="col-xs-4 text-right" ng-hide="{{filter.value.match(\'quantity\')}}"> <strong>{{company.total | mnoCurrency : company.currency}}</strong> </div> </div> <div class="row" collapse="isCollapsed(company.name)"> <div class="col-xs-12"> <div class="row widget-line" ng-repeat="product in company.products"> <div class="col-xs-7 col-xs-offset-1"> {{product.name | titleize}} </div> <div class="col-xs-4 text-right" ng-show="{{filter.value.match(\'quantity\')}}"> <strong>{{product.total}}</strong> </div> <div class="col-xs-4 text-right" ng-hide="{{filter.value.match(\'quantity\')}}"> <strong>{{product.total | mnoCurrency : product.currency}}</strong> </div> </div> </div> </div> </div> </div> <div class="data-not-found" ng-show="(isDataFound==false)"> <div class="message">No data found for this time range<br> Please select another one</div> </div> </div> </div> </div></div>'),e.put("widgets/sales-margin.tmpl.html",'<div widget-sales-margin=""> <div ng-show="widget.isEditMode" class="edit"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div setting-time-range="" parent-widget="widget" class="part" deferred="::timeRangeDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)"> <div setting-hist-mode="" parent-widget="widget" deferred="::histModeDeferred"> <div ng-hide="widget.isHistoryMode" class="current"> <div class="price"> {{ getTotalMargin() | mnoCurrency : getCurrency()}} </div> <div class="legend"> Total sold - Total purchased <br> {{getTimeSpan()}} <br> <div setting-param-selector="" parent-widget="widget" param="filter" options="filterOptions" selected="filter" no-reload="" on-select="widget.format()" deferred="::paramSelectorDeferred"> </div> </div> <div class="history chart-container" ng-class="{\'invisible\': !widget.isHistoryMode}"> <div impac-chart="" draw-trigger="::drawTrigger.promise" deferred="::chartDeferred"></div> <div class="legend">Total sold - Total purchased</div> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" widget-engine="::widget.category"> </div> </div> </div></div></div></div></div>'),e.put("widgets/sales-number-of-leads.tmpl.html",'<div widget-sales-number-of-leads=""> <div class="edit" ng-show="widget.isEditMode"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)" class="align-center"> <div class="selector"> Leads for this <span setting-param-selector="" parent-widget="widget" param="period" options="periodOptions" selected="period" deferred="::paramSelectorDeferred"> </span></div> <div class="stats"> <div class="stat row align-left" ng-repeat="carac in [\'new\', \'converted\', \'lost\']"> <div class="col-md-6 title" style="padding: 0px;">{{carac | titleize}}</div> <div class="col-md-6" style="padding: 0px;"> <span class="variation" ng-class="formatNumberOfLeads(carac).color">{{formatNumberOfLeads(carac).variation}}</span> <span class="nominal">{{formatNumberOfLeads(carac).nominal}}</span> </div> </div> </div> <div class="legend"> {{widget.content.number_of_leads.total[1]}} leads in total </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" widget-engine="::widget.category"> </div> </div></div></div>'),e.put("widgets/sales-opportunities-funnel.tmpl.html",'<div widget-sales-opportunities-funnel=""> <div class="edit" ng-show="widget.isEditMode"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div setting-params-picker="" options="statusOptions" param="sales_stage_selection" parent-widget="widget" class="part" deferred="::paramsPickerDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)" class="row"> <div ng-class="widget.isExpanded() ? \'col-md-6\': \'col-md-12\'"> <div setting-width="" parent-widget="widget" min="6" max="12" class="settings width" deferred="::widthDeferred"> <div class="legend">Your opportunities, sorted by sales stage</div> <div class="funnel-container"> <div class="tile" ng-repeat="elem in funnel" ng-click="toggleSelectStatus(elem.status)"> <div class="colored-area" ng-style="elem.coloredWidth" ng-class="isSelected(elem.status) ? \'selected\' : \'\'">{{elem.number}}</div> <div class="main-text" ng-style="elem.statusWidth">{{elem.status | titleize}}</div> </div> </div> </div> <div class="col-md-6 right-panel text-center" ng-show="widget.isExpanded()"> <div ng-hide="selectedStatus" class="currency"> Select a sales stage to display a list of the corresponding opportunities </div> <div ng-show="selectedStatus" class="widget-lines-container"> <div class="row lines-group widget-line" ng-repeat="opp in getSelectedOpportunities()"> <div class="col-xs-6"> {{opp.name | titleize}} </div> <div class="col-xs-6 text-right"><strong>{{getOppDetails(opp)}}</strong></div> </div> </div> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" widget-engine="::widget.category"> </div> </div> </div></div></div></div>'),e.put("widgets/sales-performance.tmpl.html",'<div widget-sales-performance=""> <div class="edit" ng-show="widget.isEditMode"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)" class="row"> <div ng-class="widget.isExpanded() ? \'col-md-6\' : \'col-md-12\'"> <div setting-width="" parent-widget="widget" min="6" max="12" class="settings width" deferred="::widthDeferred"> <div class="widget-lines-container"> <div class="row widget-line header"> <div class="col-xs-5"> from {{widget.content.dates[0] | mnoDate : widget.metadata.hist_parameters.period}} to {{widget.content.dates[widget.content.dates.length - 1] | mnoDate : widget.metadata.hist_parameters.period}} </div> <div class="col-xs-3 text-right"> Win ratio </div> <div class="col-xs-4 text-right"> Total won </div> </div> <div class="row lines-group" ng-repeat="assignee in widget.content.assignees" ng-click="toggleSelectedElement(assignee)"> <div class="col-xs-12"> <div class="row widget-line" ng-class="{\'selected\': isSelected(assignee)}"> <div class="col-xs-5">{{assignee.name | titleize}}</div> <div class="col-xs-3 text-right">{{assignee.win_ratio | mnoCurrency : \'%\'}}</div> <div class="col-xs-4 text-right">{{assignee.total_won | mnoCurrency}}</div> </div> </div> </div> </div> </div> <div class="col-md-6 right-panel text-center" ng-show="widget.isExpanded()"> <div ng-show="selectedElement"> <h4>{{selectedElement.name | titleize}}</h4> <div class="chart-container"> <div impac-chart="" draw-trigger="::drawTrigger.promise" deferred="::chartDeferred"></div> <div class="legend">Total won (last 12 months): {{selectedElement.total_won | mnoCurrency}}</div> </div> <div class="widget-lines-container"> <div class="row lines-group" ng-init="collapsedWon=false"> <div class="col-xs-12"> <div class="row widget-line" ng-click="collapsedWon=!collapsedWon"> <div class="col-xs-10"> <strong>Closed Won</strong> </div> <div class="col-xs-2 text-right"> <strong>{{getWonOpportunities(selectedElement).length}}</strong> </div> </div> <div class="row" collapse="collapsedWon"> <div class="col-xs-12"> <div class="row widget-line no-select" ng-repeat="opp in getWonOpportunities(selectedElement)"> <div class="col-xs-6">{{opp.name}}</div> <div class="col-xs-3 text-right">{{getCloseDate(opp)}}</div> <div class="col-xs-3 text-right">{{opp.amount.amount | mnoCurrency}}</div> </div> </div> </div> </div> </div> <div class="row lines-group" ng-init="collapsedLost=false"> <div class="col-xs-12"> <div class="row widget-line" ng-click="collapsedLost=!collapsedLost"> <div class="col-xs-10"> <strong>Closed Lost</strong> </div> <div class="col-xs-2 text-right"> <strong>{{getLostOpportunities(selectedElement).length}}</strong> </div> </div> <div class="row" collapse="collapsedLost"> <div class="col-xs-12"> <div class="row widget-line no-select" ng-repeat="opp in getLostOpportunities(selectedElement)"> <div class="col-xs-6">{{opp.name}}</div> <div class="col-xs-3 text-right">{{getCloseDate(opp)}}</div> <div class="col-xs-3 text-right">{{opp.amount.amount | mnoCurrency}}</div> </div> </div> </div> </div> </div> </div> </div> <div ng-hide="selectedElement" class="no-element"> Select an employee or team to display the corresponding opportunities won/lost. </div> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" widget-engine="::widget.category"> </div> </div> </div></div></div>'),e.put("widgets/sales-segmented-turnover.tmpl.html",'<div widget-sales-segmented-turnover=""> <div class="edit" ng-show="widget.isEditMode"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div setting-time-range="" parent-widget="widget" class="part" deferred="::timeRangeDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div align="center" ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)" class="row"> <div ng-class="widget.isExpanded() ? \'col-md-6\' : \'col-md-12\'"> <div setting-width="" parent-widget="widget" min="3" max="6" class="settings width" deferred="::widthDeferred"></div> <div class="selector">Filter: <span setting-param-selector="" parent-widget="widget" param="filter" options="filterOptions" selected="filter" deferred="::paramSelectorDeferred"></span></div> <div class="chart-container"> <div impac-chart="" draw-trigger="::drawTrigger.promise" deferred="::chartDeferred"></div> </div> <div class="widget-lines-container"> <div class="row widget-line header"> <div class="col-xs-12">Average price range</div> </div> <div class="row widget-line" ng-repeat="range in widget.content.ranges"> <div class="col-xs-2"> <i class="fa fa-circle" style="color: {{getColorByIndex($index)}}"> </i></div> <div class="col-xs-6"> {{getRangeLabel(range.label)}} </div> <div class="col-xs-4 text-right"> <i>{{range.percentage}}%</i> </div> </div> </div> </div> <div class="col-md-6 right-panel" ng-show="widget.isExpanded()"> <i class="fa fa-info-circle" style="float: left;" tooltip="This widget segments your revenue by products average price range and propose an analysis of its composition"> <h3 style="margin: 25px 10px; text-align: center;">{{getMaxRange().percentage.toFixed()}}% of your revenue comes from products sold at an average price between {{getMaxRange().label.split(\'-\')[0] | mnoCurrency : widget.content.currency}} and {{getMaxRange().label.split(\'-\')[1] | mnoCurrency : widget.content.currency}}.</h3> <div class="analysis hidden-md">{{getAnalysis()}}</div> </i></div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" widget-engine="::widget.category"> </div> </div> </div></div></div>'),e.put("widgets/sales-summary.tmpl.html",'<div widget-sales-summary=""> <div class="edit" ng-show="widget.isEditMode"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div setting-chart-filters="" parent-widget="widget" class="part" deferred="::chartFiltersDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div align="center" ng-hide="widget.isEditMode"> <div class="selector"> <span setting-param-selector="" parent-widget="widget" param="filter" options="filterOptions" selected="filter" deferred="::paramSelectorDeferred"> <span setting-dates-picker="" parent-widget="widget" from="widget.metadata.hist_parameters.from" to="widget.metadata.hist_parameters.to" keep-today="widget.metadata.hist_parameters.keep_today" deferred="::datesPickerDeferred"> </span></span></div> <div class="chart-container" ng-show="(isDataFound==true)"> <div impac-chart="" draw-trigger="::drawTrigger.promise" deferred="::chartDeferred"></div> </div> <div class="data-not-found" ng-show="(isDataFound==false)"> <div class="message">No data found for this time range<br> Please select another one</div> </div> </div> </div></div></div>'),e.put("widgets/sales-top-opportunities.tmpl.html",'<div widget-sales-top-opportunities=""> <div class="edit" ng-show="widget.isEditMode"> <h4>Widget settings</h4> <div setting-organizations="" parent-widget="widget" class="part" deferred="::orgDeferred"> <div class="bottom-buttons" align="right"> <button class="btn btn-default" ng-click="initSettings()">Cancel</button> <button class="btn btn-warning" ng-click="updateSettings()">Save</button> </div> </div> <div ng-hide="widget.isEditMode"> <div ng-show="(isDataFound==true)"> <div class="legend"> Total potential: <b>{{widget.content.total_potential | mnoCurrency : widget.content.currency || "AUD"}}</b> - <b>{{widget.content.eligible_opportunities}}</b> eligible opportunities </div> <div class="opps-container"> <div class="tile" ng-repeat="opp in widget.content.opportunities track by $index" ng-class="getOppClass($index)"> <div class="colored-area">{{$index +1 }}</div> <div class="main-text"> {{opp.name | titleize}} <br> <i style="font-size: 13px;">{{getOppDetails(opp)}}</i> </div> </div> </div> </div> <div ng-show="(isDataFound==false)" common-data-not-found="" widget-engine="::widget.category"> </div> </div></div></div>'),e.put("widgets-common/data-not-found.tmpl.html",'<div class="data-not-found"> <img id="not-found-bg"> <div class="message"> {{content.mainMessage}} <a ng-show="showAlertsTrigger" ng-click="onDisplayAlerts()"> <i class="fa fa-warning"> Find out why </i></a> <a ng-if="hasCallbackUrl" ng-hide="showAlertsTrigger" ng-click="content.linkUrlCallback()"> {{content.linkMessage}} </a> <a ng-if="!hasCallbackUrl" ng-hide="showAlertsTrigger" ng-href="{{content.linkUrl}}" target="{{content.linkTarget}}"> {{content.linkMessage}} </a> </div> </div> '),e.put("widgets-common/editable-title.tmpl.html",'<div class="visible-lg title-wrapper" ng-if="parentWidget.width >= 3 && parentWidget.width < 6"> <div ng-show="parentWidget.hasEditAbility" class="title" editable-text="parentWidget.name" onaftersave="updateName()"> {{parentWidget.name | truncate:19:"."}} </div> <div ng-hide="parentWidget.hasEditAbility" class="title"> {{parentWidget.name | truncate:19:"."}} </div> </div> <div class="visible-lg title-wrapper" ng-if="parentWidget.width >= 6"> <div ng-show="parentWidget.hasEditAbility" class="title" editable-text="parentWidget.name" onaftersave="updateName()"> {{parentWidget.name | truncate:80:"."}} </div> <div ng-hide="parentWidget.hasEditAbility" class="title"> {{parentWidget.name | truncate:80:"."}} </div> </div> <div class="visible-md visible-sm title-wrapper" ng-if="parentWidget.width == 3 && parentWidget.width < 6"> <div ng-show="parentWidget.hasEditAbility" class="title" editable-text="parentWidget.name" onaftersave="updateName()"> {{parentWidget.name | truncate:13:"."}} </div> <div ng-hide="parentWidget.hasEditAbility" class="title"> {{parentWidget.name | truncate:13:"."}} </div> </div> <div class="visible-md visible-sm title-wrapper" ng-if="parentWidget.width >= 6"> <div ng-show="parentWidget.hasEditAbility" class="title" editable-text="parentWidget.name" onaftersave="updateName()"> {{parentWidget.name | truncate:60:"."}} </div> <div ng-hide="parentWidget.hasEditAbility" class="title"> {{parentWidget.name | truncate:60:"."}} </div> </div> <div class="visible-xs title-wrapper">  <div class="title"> {{parentWidget.name | truncate:25:"."}} </div> </div> '),e.put("widgets-common/top-buttons.tmpl.html",'<div id="module__top-buttons"> <div class="top-buttons-wrapper"> <button class="btn top-button btn-refresh" ng-click="onRefresh({refreshCache: true})"> <i class="fa fa-refresh"></i> <span class="text-hide">Refresh widget</span> </button> <button class="btn top-button btn-edit" ng-click="toggleEditMode()" ng-show="parentWidget.hasEditAbility" ng-class="{\'edit-mode\': parentWidget.isEditMode}"> <i class="fa fa-cog fa-lg"></i> <span class="text-hide">Edit widget</span> </button> <button class="btn top-button btn-close" ng-click="showConfirmDelete = !showConfirmDelete" ng-show="parentWidget.hasDeleteAbility"> <i class="fa fa-times-circle-o fa-lg"></i> <span class="text-hide">Delete widget</span> </button> </div> <div class="confirm-delete-popover" ng-show="showConfirmDelete"> <h4>Are you sure you want to delete this widget ?</h4> <p>(it will not erase your data)</p> <div ng-hide="isDeletePopoverLoading"> <button ng-click="showConfirmDelete = false" class="btn btn-sm btn-default">Cancel</button> <button ng-click="deleteWidget()" class="btn btn-sm btn-danger" style="margin-left: 10px;">Delete</button> </div> <div ng-show="isDeletePopoverLoading" class="loader" align="center"> <div> <i class="fa fa-spinner fa-pulse fa-4x"></i> </div> </div> </div> </div> '),e.put("widgets-settings/account.tmpl.html",'<h5 ng-if="showLabel">{{label}}</h5> <div class="input-group settings select-account"> <select ng-model="parentWidget.selectedAccount" ng-change="onAccountSelected()" ng-options="formatLabel(account) for account in parentWidget.content.account_list track by account.uid" class="form-control"> </select></div> '),e.put("widgets-settings/chart-filters.tmpl.html",'<div class="settings chart-filters"> <h5>Chart filters</h5> <div class="row"> <div class="col-md-6"> <input type="radio" ng-model="filterCriteria" value="number"> <label for="number" ng-click="filterCriteria = \'number\'">Top {{filterValueNumber}} {{entityType}}</label> </div> <div class="col-md-6"> <input type="range" ng-model="filterValueNumber" ng-change="filterCriteria = \'number\'" min="3" max="{{maxEntities}}" step="1"> </div> </div> <div class="row"> <div class="col-md-6"> <input type="radio" ng-model="filterCriteria" value="percentage"> <label for="percentage" ng-click="filterCriteria = \'percentage\'">Top {{filterValuePercentage}}% {{filterLabel}}</label> </div> <div class="col-md-6"> <input type="range" ng-model="filterValuePercentage" ng-change="filterCriteria = \'percentage\'" min="20" max="100" step="5"> </div> </div> </div> '),e.put("widgets-settings/dates-picker.tmpl.html",'<span class="settings dates-picker"> <h5>Time range</h5> <span class="buttons"> <button class="btn btn-sm btn-default" ng-click="calendarFrom.toggle()" datepicker-popup="" ng-model="calendarFrom.value" is-open="calendarFrom.opened" ng-change="showApplyButton()" max-date="calendarTo.value"> {{ calendarFrom.value | date : \'yyyy-MM-dd\' }} </button> to <button class="btn btn-sm btn-default" ng-click="calendarTo.toggle()" datepicker-popup="" ng-model="calendarTo.value" is-open="calendarTo.opened" ng-change="showApplyButton()" min-date="calendarFrom.value" on-open-focus="false"> {{ calendarTo.value | date : \'yyyy-MM-dd\' }} </button> <button class="btn btn-sm btn-success" tooltip="Apply changes" ng-show="changed && !parentWidget.isEditMode" ng-click="applyChanges()"> <i class="fa fa-check"> </i></button> </span> </span>'),e.put("widgets-settings/hist-mode.tmpl.html",'<div class="settings hist-mode-choser"> <div align="center" class="options"> <a ng-click="toggleHistMode(\'current\')" ng-class="!parentWidget.isHistoryMode ? \'active\' : \'inactive\'">current</a> | <a ng-click="toggleHistMode(\'history\')" ng-class="parentWidget.isHistoryMode ? \'active\' : \'inactive\'">history</a> </div> <div class="{{parentWidget.isHistoryMode ? \'arrow-container right\' : \'arrow-container left\'}}"> <div class="arrow"> <div class="arrow-border"> </div> </div></div></div>'),e.put("widgets-settings/limit-entries.tmpl.html",'<div class="settings limit-entries"> {{ entriesLabel ? \'Top\' : \'Display\' }} <span ng-repeat="option in options | filter:isOptionValid:option track by $index"> {{ $index!=0 ? \' |\' : \'\' }} <a target="#" ng-click="selectOption(option)" class="option" ng-class="{badge: option==selected}">{{ option }}</a> </span> <span ng-if="max"> | <a target="#" ng-click="selectOption(max)" class="option" ng-class="{badge: (!selected || selected==max)}">{{ max }}</a> </span> {{entriesLabel || \'entries\'}} </div>'),e.put("widgets-settings/organizations.tmpl.html",'<div class="settings organizations"> <h5>Select Companies</h5> <div class="widget-lines-container"> <div class="widget-line" ng-repeat="org in dashboardOrganizations"> {{org.label}} <i ng-class="isOrganizationSelected(org.uid) ? \'fa fa-toggle-on\' : \'fa fa-toggle-off\'" ng-click="toggleSelectOrganization(org.uid)" tooltip="{{isOrganizationSelected(org.uid) ? \'disable\' : \'enable\'}}" tooltip-append-to-body="true"> </i></div> </div> </div>'),e.put("widgets-settings/param-selector.tmpl.html",'<span class="settings param-selector"> <a ng-click="toggleShowOptions()">{{selected.label | titleize | truncate : getTruncateValue() : "..." : false}} <i class="fa fa-chevron-down"></i></a> <div class="options-container" collapse="!showOptions"> <div ng-repeat="option in options" ng-click="selectOption(option)"> {{option.label | titleize}} </div> </div> </span>'),e.put("widgets-settings/params-checkboxes.tmpl.html",'<div ng-repeat="parameter in options track by $index" class="settings params-checkboxes"> <label> <input type="checkbox" ng-model="parameter.value" ng-change="parameter.onChangeCallback()"> <span>{{parameter.label}}</span> </label> </div> '),e.put("widgets-settings/params-picker.tmpl.html",'<h5>{{formattedParam | titleize}}</h5> <div class="settings params-picker"> <div style="margin-bottom: 8px;"> The selected criteria will be displayed in this order (drag/drop to modify): </div> <div ui:sortable="sortableOptions" ng-model="options" class="input-group"> <span ng-repeat="parameter in options track by $index" class="parameter" ng-class="!parameter.selected ? \'unchecked\' : \'\'"> <span class="badge">{{$index + 1}}</span> {{parameter.label | titleize}} <input type="checkbox" ng-model="parameter.selected"> </span> </div> </div>'),e.put("widgets-settings/time-range.tmpl.html",'<h5>Time range</h5> <div class="settings time-range"> <div class="row"> <div class="col-md-12"> Show last {{numberOfPeriods}} {{periodToUnit()}} </div> </div> <div class="row input-group" align="center" style="margin: 0; margin-top: 3px;"> <div class="col-xs-6" style="padding: 0; padding-right: 5px;"> <select ng-model="selectedPeriod" ng-options="period.toLowerCase() for period in PERIODS track by period" class="form-control" style="height: 22px; margin-top: 0; padding: 0; padding-left: 1px; padding-bottom: 1px;"></select> </div> <div class="col-xs-6" style="padding: 0;"> <input type="range" ng-model="numberOfPeriods" min="1" max="12" step="1"> </div> </div> </div>'),e.put("widgets-settings/width.tmpl.html",'<i class="fa fa-angle-double-left reduce" ng-show="expanded" ng-click="parentWidget.toggleExpanded()" tooltip="reduce"> <i class="fa fa-angle-double-right expand" ng-hide="expanded" ng-click="parentWidget.toggleExpanded()" tooltip="expand"></i></i>')
}])}(),function(){angular.module("impac.filters.mno-currency",[]).filter("mnoCurrency",["$filter",function(e){return function(t,i,a){var n;return null==a&&(a=!0),null==t?"":(n=e("currency")(t),n=n.replace("(","-"),n=n.replace(")",""),null==i?n:"d"===i[i.length-1].toLowerCase()?a?n+" "+i:n:"EUR"===i?(n=n.replace("$",""),n=n.replace(","," "),n=n.replace(".",","),n+" €"):(n=n.replace("$",""),i.match(/[A-Z]{3}/)||"%"===i||"(ratio)"===i||(n=parseInt(n)),a?n+" "+i:n))}}])}.call(this),function(){angular.module("impac.filters.mno-date",[]).filter("mnoDate",["$filter",function(e){return function(t,i){var a;if(a=["DAILY","WEEKLY","MONTHLY","QUARTERLY","YEARLY"],null==t)return"";switch(null!=i&&_.includes(a,i.toUpperCase())||(i="MONTHLY"),i.toUpperCase()){case"DAILY":return e("date")(t,"dd MMM");case"WEEKLY":return e("date")(t,"dd MMM");case"MONTHLY":return e("date")(t,"MMM yyyy");case"QUARTERLY":return e("date")(t,"MMM yyyy");case"YEARLY":return e("date")(t,"yyyy")}}}])}.call(this),function(){angular.module("impac.filters.titleize",[]).filter("titleize",function(){return function(e){return e=void 0===e||null===e?"":e,e.toString().toLowerCase().replace(/\b([a-z])/g,function(e){return e.toUpperCase()})}})}.call(this),function(){angular.module("impac.filters.truncate",[]).filter("truncate",function(){return function(e,t,i,a){var n;return e?(t=parseInt(t,10))?e.length<=t?e:(e=e.substr(0,t),a&&(n=e.lastIndexOf(" "),-1!==n&&(e=e.substr(0,n))),e+(i||"…")):e:""}})}.call(this),function(){angular.module("impac.components.chart",[]).directive("impacChart",["$log","$window",function(e,t){return{restrict:"A",scope:{drawTrigger:"=",deferred:"="},link:function(i,a){return i.draw=function(e){var t,i;return null==e.options.showXLabels||e.options.showXLabels||angular.merge(e.options,{scales:{xAxes:[{display:!1}]}}),a.children().length>0&&a.children().remove(0),a.append("<canvas></canvas>"),t=a.children()[0],i=t.getContext("2d"),new Chart(i,e)},i.drawTrigger.then(function(){return e.warn("chart promise has been resolved: use notify instead")},function(t){return e.error(t)},function(e){var n,s,r;return r=t.navigator.userAgent,n=-1!==r.indexOf("Safari")&&!(-1!==r.indexOf("Chrome")),n?(s=function(){var t;return t=$(a).is(":visible"),t?i.draw(e):setTimeout(function(){return s()},100)},s()):i.draw(e)}),i.deferred.resolve("chart ready")}}}])}.call(this),function(){var e;e=angular.module("impac.components.dashboard",[]),e.controller("ImpacDashboardCtrl",["$scope","$http","$q","$filter","$modal","$log","$timeout","$templateCache","MsgBus","ImpacUtilities","ImpacAssets","ImpacTheming","ImpacRoutes","ImpacMainSvc","ImpacDashboardsSvc","ImpacWidgetsSvc",function(e,t,i,a,n,s,r,o,l,d,c,u,g,h,p,m){var f,v;return e.currentDhb=p.getCurrentDashboard(),e.widgetsList=p.getWidgetsTemplates(),e.impacTitleLogo=c.get("impacTitleLogo"),e.impacDashboardBackground=c.get("impacDashboardBackground"),e.showDhbHeading=u.get().dhbConfig.showDhbHeading,e.dhbHeadingText=u.get().dhbConfig.dhbHeadingText,e.dhbErrorsConfig=u.get().dhbErrorsConfig,e.dhbSettingsConfig=u.get().dhbSettings,e.showKpisBar=u.get().dhbKpisConfig.enableKpis,e.showChooseDhbMsg=function(){return!p.isThereADashboard()},e.showNoWidgetsMsg=function(){return p.isCurrentDashboardEmpty()&&u.get().showNoWidgetMsg},e.starWizardModal={value:!1},l.publish("starWizardModal",e.starWizardModal),e.openStarWizard=function(){return e.starWizardModal.value=!0},e.marketplaceMyobLink=u.get().dhbSubMenuConfig.marketplaceMyobLink,e.showSubMenu=!1,e.displaySubMenu=function(){return e.showSubMenu=!0},e.hideSubMenu=function(){return e.showSubMenu=!1},e.myobMessageConfig=u.get().dhbSubMenuConfig.myobMessage,e.isLoading=!0,p.load(!0).then(function(){return e.activateTimer(),e.hasMyobEssentialsOnly=h.config.currentOrganization.has_myob_essentials_only},function(){return e.isLoading=!1}),e.activateTimer=function(){var t,i;return e.isLoading||(e.isLoading=!0),i=e.currentDhb.widgets,t=null!=i?Math.max(100*i.length,500):500,r(function(){return e.isLoading=!1},t)},e.createDashboardModal=e.$new(),e.createDashboardModal.config={backdrop:"static",template:o.get("dashboard/create.modal.html"),size:"md",windowClass:"inverse",scope:e.createDashboardModal},e.createDashboardModal.open=function(){var t;return t=e.createDashboardModal,t.locked?void 0:(t.model={name:""},t.errors="",t.isLoading=!1,t.instance=n.open(t.config),t.instance.rendered.then(function(){return t.locked=!0}),t.instance.result.then(function(){return t.locked=!1},function(){return t.locked=!1}),h.loadOrganizations().then(function(e){return t.organizations=e.organizations,t.currentOrganization=e.currentOrganization,t.selectMode("single")}))},e.createDashboardModal.proceed=function(){var t,i,a;return a=e.createDashboardModal,a.isLoading=!0,t={name:a.model.name},i=[],i="multi"===a.mode?_.select(a.organizations,function(e){return e.$selected}):[{id:h.config.currentOrganization.id}],i.length>0&&(t.organization_ids=_.pluck(i,"id")),p.create(t).then(function(){return a.errors="",a.instance.close()},function(e){return a.isLoading=!1,a.errors=d.processRailsError(e)})},e.createDashboardModal.isProceedDisabled=function(){var t,i,a;return a=e.createDashboardModal,i=_.select(a.organizations,function(e){return e.$selected}),t=_.isEmpty(a.model.name),t||(t=0===i.length),t||(t=0===_.select(i,function(e){return a.canAccessAnalyticsData(e)}).length),a.isLoading||t},e.createDashboardModal.btnBlassFor=function(t){var i;return i=e.createDashboardModal,t===i.mode?"btn btn-sm btn-warning active":"btn btn-sm btn-default"},e.createDashboardModal.selectMode=function(t){var i;return i=e.createDashboardModal,_.each(i.organizations,function(e){return e.$selected=!1}),i.currentOrganization.$selected="single"===t,i.mode=t},e.createDashboardModal.isSelectOrganizationShown=function(){return"multi"===e.createDashboardModal.mode},e.createDashboardModal.isCurrentOrganizationShown=function(){return"single"===e.createDashboardModal.mode},e.createDashboardModal.canAccessAnalyticsForCurrentOrganization=function(){var t;return t=e.createDashboardModal,t.canAccessAnalyticsData(t.currentOrganization)},e.createDashboardModal.isMultiCompanyAvailable=function(){return e.createDashboardModal.organizations.length>1&&e.createDashboardModal.multiOrganizationReporting},e.createDashboardModal.canAccessAnalyticsData=function(e){return e.current_user_role&&("Super Admin"===e.current_user_role||"Admin"===e.current_user_role)},e.customWidgetSelector=u.get().widgetSelectorConfig,e.forceShowWidgetSelector=!1,e.showCloseWidgetSelectorButton=function(){return!p.isCurrentDashboardEmpty()},e.displayWidgetSelector=function(t){return null==t&&(t=!0),e.forceShowWidgetSelector=t},e.showWidgetSelector=function(){return e.forceShowWidgetSelector||p.isCurrentDashboardEmpty()&&!e.customWidgetSelector.path},e.isAddChartEnabled=u.get().addChartTile.show,e.addChartTileOnClick=function(){var t;return t=u.get().addChartTile.onClickOptions.triggers,_.forEach(t,function(t){switch(t.type){case"objectProperty":return e[t.target][t.property]=t.value}})},e.selectedCategory="accounts",e.isCategorySelected=function(t){return null!=e.selectedCategory&&null!=t?e.selectedCategory===t:!1},e.selectCategory=function(t){return e.selectedCategory=t},e.getSelectedCategoryName=function(){if(null==e.selectedCategory)return!1;switch(e.selectedCategory){case"accounts":return"Accounting";case"invoices":return"Invoicing";case"hr":return"HR / Payroll";case"sales":return"Sales";default:return!1}},e.getSelectedCategoryTop=function(){if(null==e.selectedCategory)return!1;switch(e.selectedCategory){case"accounts":return{top:"33px"};case"invoices":return{top:"64px"};case"hr":return{top:"95px"};case"sales":return{top:"126px"};default:return{top:"9999999px"}}},e.getWidgetsForSelectedCategory=function(){return null!=e.selectedCategory&&null!=e.widgetsList?_.select(e.widgetsList,function(t){return t.path.split("/")[0]===e.selectedCategory}):[]},e.addWidget=function(t,i){var a;return null==i&&(i=null),a={widget_category:t},null!=i&&angular.extend(a,{metadata:i}),angular.element("#widget-selector").css("cursor","progress"),angular.element("#widget-selector .top-container .row.lines p").css("cursor","progress"),m.create(a).then(function(){return e.errors="",angular.element("#widget-selector").css("cursor","auto"),angular.element("#widget-selector .top-container .row.lines p").css("cursor","pointer"),angular.element("#widget-selector .badge.confirmation").fadeTo(250,1),r(function(){return angular.element("#widget-selector .badge.confirmation").fadeTo(700,0)},4e3)},function(t){return e.errors=d.processRailsError(t),angular.element("#widget-selector").css("cursor","auto"),angular.element("#widget-selector .top-container .row.lines p").css("cursor","pointer")})},e.widgetSuggestionModal=e.$new(),e.widgetSuggestionModal.widgetDetails={},e.widgetSuggestionModal.error=!1,e.widgetSuggestionModal.onSuccess=!1,e.widgetSuggestionModal.config={backdrop:"static",template:o.get("dashboard/widget-suggestion.modal.html"),size:"md",windowClass:"inverse impac-widget-suggestion",scope:e.widgetSuggestionModal,apiPath:g.widgets.suggest()},e.widgetSuggestionModal.open=function(){var t;return t=e.widgetSuggestionModal,t.locked?void 0:(h.loadUserData().then(function(e){return t.userName=e.name}),t.instance=n.open(t.config),t.instance.rendered.then(function(){return t.locked=!0}),t.instance.result.then(function(){return t.locked=!1},function(){return t.locked=!1}),t.isLoading=!1)},e.widgetSuggestionModal.proceed=function(){var i,a;return a=e.widgetSuggestionModal,a.isLoading=!0,i={widget_name:a.widgetDetails.name,widget_category:a.widgetDetails.category,widget_description:a.widgetDetails.description},null!=a.config.apiPath?t.post(a.config.apiPath,{template:"widget_suggestion",opts:i}).then(function(){return a.onSuccess=!0,r(function(){return a.instance.close(),a.widgetDetails={},a.isLoading=!1,a.onSuccess=!1},3e3)},function(e){return a.isLoading=!1,a.error=!0,s.error("impac-angular ERROR: Unable to POST widget_suggestion mailer: ",e)}):void 0},e.sortableOptions={stop:f=function(){var t;return t={widgets_order:_.pluck(e.currentDhb.widgets,"id")},p.update(e.currentDhb.id,t)},start:v=function(e,t){return t.placeholder.css("width",t.item.width()-1),t.placeholder.css("height",t.item.height())},cursorAt:{left:100,top:20},opacity:.5,delay:150,tolerance:"pointer",placeholder:"placeHolderBox",cursor:"move",revert:250,cancel:".unsortable",handle:".top-line"}}]),e.directive("impacDashboard",["$templateCache",function(e){return{restrict:"EA",scope:{forceLoad:"=load"},template:e.get("dashboard/dashboard.tmpl.html"),controller:"ImpacDashboardCtrl"}}])}.call(this),function(){angular.module("impac.components.dashboard-selector",[]).directive("dashboardSelector",["$log","$compile","$templateCache","$http","$timeout","$modal","ImpacTheming","ImpacDashboardsSvc","ImpacMainSvc","ImpacUtilities",function(e,t,i,a,n,s,r,o,l,d){return{restrict:"E",scope:{onCreateDashboard:"&",isWidgetSelectorShown:"&",onDisplayWidgetSelector:"&",onSelectDashboard:"&"},controller:["$scope",function(e){return e.organizationsNames=function(){return _.pluck(e.currentDhb.data_sources,"label").join(", ")},e.toggleShowDashboardsDropdown=function(){return e.showChangeDashboardNameBox?void 0:e.showDashboardsDropdown=o.areThereSeveralDashboards()||e.showCreateDashboardButton?!e.showDashboardsDropdown:!1},e.selectDashboard=function(t){return e.currentDhb.id!==t?(e.isLoading=!0,e.showDashboardsDropdown=!1,n(function(){return e.$apply(function(){return o.setCurrentDashboard(t),e.onSelectDashboard(),e.isLoading=!1})},50)):void 0},e.toggleChangeDashboardNameBox=function(t){var i;return i=angular.copy(t),e.dashboardToChange={},e.dashboardToChange.id=i.id,e.dashboardToChange.name=i.full_name,e.showChangeDashboardNameBox=!e.showChangeDashboardNameBox,n(function(){var e;return e=$("#changeDhbNameInput"),e.select(),e.focus()},100)},e.hideChangeDashboardNameBox=function(){return e.showChangeDashboardNameBox=!1},e.checkAndUpdateDashboardName=function(t){return 13===t.keyCode&&e.updateDashboardName(),27===t.keyCode?e.showChangeDashboardNameBox=!1:void 0},e.updateDashboardName=function(){return null==e.dashboardToChange||_.isEmpty(e.dashboardToChange.name)?void 0:o.update(e.dashboardToChange.id,{name:e.dashboardToChange.name}).then(function(){return e.showChangeDashboardNameBox=!1})},e.toggleAccessibilityMode=function(){return e.accessibilityMode=!e.accessibilityMode,angular.forEach(e.currentDhb.widgets,function(e){return e.loadContent()})},e.deleteDashboardModal=e.$new(),e.deleteDashboardModal.config={backdrop:"static",template:i.get("dashboard-selector/delete.modal.html"),size:"md",windowClass:"inverse",scope:e.deleteDashboardModal},e.deleteDashboardModal.open=function(){var t;return t=e.deleteDashboardModal,t.locked?void 0:(t.errors="",t.isLoading=!1,t.instance=s.open(t.config),t.instance.rendered.then(function(){return t.locked=!0}),t.instance.result.then(function(){return t.locked=!1},function(){return t.locked=!1}))},e.deleteDashboardModal.proceed=function(){var t;return t=e.deleteDashboardModal,t.isLoading=!0,o["delete"](e.currentDhb.id).then(function(){return t.errors="",t.instance.close()},function(e){return t.errors=d.processRailsError(e),t.isLoading=!1})},e}],link:function(n,s){var l,d,c,u,g,h,p;switch(n.currentDhb=o.getCurrentDashboard(),n.dashboardsList=o.getDashboards(),n.isThereADashboard=function(){return o.isThereADashboard()},g=r.get().dhbSelectorConfig,n.isAccessibilityEnabled=g.accessibilityEnabled,n.isAddWidgetEnabled=g.addWidgetEnabled,n.isAddDhbEnabled=g.addDhbEnabled,n.isDeleteDhbEnabled=g.deleteDhbEnabled,n.showCreateDashboardButton=!0,n.showDashboardsDropdown=!1,n.showChangeDashboardNameBox=!1,n.accessibilityMode=!1,g.customTmplPath?d=g.customTmplPath:n.selectorType=g.selectorType,h=null,p=function(e){return h=e},n.selectorType){case"dropdown":p("dashboard-selector/dropdown.tmpl.html");break;case"tabs":p("dashboard-selector/bootstrap-tabs.tmpl.html");break;case"pills":p("dashboard-selector/bootstrap-tabs.tmpl.html");break;default:p(d)}return c=function(){return a.get(h,{cache:i}).then(function(t){return t&&t.data&&t.data.length||e.warn("dashboardSelector custom template: no content found"),l(t.data)},function(t){return e.error("Error retrieving custom template: ",t)})},u=function(){return l(i.get(h))},l=function(e){return s.html(e).show(),t(s.contents())(n)},d?c():u()}}}])}.call(this),function(){angular.module("impac.components.kpi",[]).directive("impacKpi",["$log","ImpacKpisSvc",function(e,t){return{restrict:"EA",scope:{onDelete:"&",kpi:"=",editMode:"="},templateUrl:"kpi/kpi.tmpl.html",controller:["$scope",function(e){return e.showEditSettings=!1,e.kpiTemplates=t.getKpisTemplates(),e.possibleExtraParams=[],e.limit={},e.possibleTargets=[{label:"over",mode:"min"},{label:"below",mode:"max"}],e.kpi["static"]||t.show(e.kpi).then(function(){var t,i;return i=_.find(e.kpiTemplates,function(t){return t.endpoint===e.kpi.endpoint}),null!=i&&null!=i.extra_params&&(e.kpi.possibleExtraParams=i.extra_params),(t=e.kpi).targets||(t.targets=[]),_.isEmpty(e.kpi.targets[0])?void 0:(null==e.kpi.limit&&(e.kpi.limit={}),e.kpi.limit.mode=_.keys(e.kpi.targets[0])[0],e.kpi.limit.value=_.values(e.kpi.targets[0])[0])}),e.displayEditSettings=function(){return e.showEditSettings=!0},e.hideEditSettings=function(){return e.showEditSettings=!1},e.updateName=function(){return _.isEmpty(e.kpi.name)?void 0:t.update(e.kpi,{name:e.kpi.name})},e.updateSettings=function(){var i,a;return i={},_.isEmpty(e.kpi.limit.value||_.isEmpty(e.kpi.limit.mode))||(a={},a[e.kpi.limit.mode]=e.kpi.limit.value,i.targets=[a]),_.isEmpty(e.kpi.extra_params)||(i.extra_params=e.kpi.extra_params),_.isEmpty(i)||t.update(e.kpi,i),e.hideEditSettings()},e.deleteKpi=function(){return e.kpi["static"]?void 0:t["delete"](e.kpi).then(function(){return e.onDelete()})}}]}}])}.call(this),function(){angular.module("impac.components.kpis-bar",[]).directive("kpisBar",["$templateCache","ImpacKpisSvc",function(e,t){return{restrict:"E",scope:{kpis:"="},template:e.get("kpis-bar/kpis-bar.tmpl.html"),controller:["$scope","$timeout","$log",function(e,i,a){return e.hideAvailableKpis=!0,e.showKpisExpanded=!1,e.showEditMode=!1,e.isAddingKPI=!1,e.availableKpis=t.getKpisTemplates(),e.toggleAvailableKpis=function(){return e.hideAvailableKpis=!e.hideAvailableKpis},e.formatKpiName=function(e){var t,i;return t=e.split("/"),i=t[0]+" | "+t.slice(1,t.length).join(" "),i=i.replace("_"," ")},e.addKpi=function(i){return e.isAddingKPI=!0,t.create(i.source||"impac",i.endpoint,i.element_watched).then(function(t){return e.kpis.push(t)},function(e){return a.error("Impac Kpis bar can't add a kpi",e)})["finally"](function(){return e.isAddingKPI=!1})},e.removeKpi=function(t){return e.kpis=_.remove(e.kpis,function(e){return e.id!==t})},e.toggleEditMode=function(){return e.showEditMode=!e.showEditMode}}]}}])}.call(this),function(){var e;e=angular.module("impac.components.widget",[]),e.controller("ImpacWidgetCtrl",["$scope","$log","$q","$timeout","ImpacWidgetsSvc",function(e,t,i,a,n){var s;return s=e.widget||{},e.widgetDeferred=i.defer(),e.widgetDeferred.promise.then(function(a){return i.all(a).then(function(){return e.showWidget()},function(e){return s.isLoading=!1,t.error("widget "+s.id+" failed to render"),t.error(e)})}),e.showWidget=function(t){return null==t&&(t=!1),s.isLoading||(s.isLoading=!0),n.show(s,t).then(function(){return e.isAccessibility?(s.initialWidth=s.width,s.width=12):s.initialWidth?s.width=s.initialWidth:void 0})["finally"](function(){return s.isLoading=!1})},e.initSettings=function(){return n.initWidgetSettings(s)},e.updateSettings=function(e){return null==e&&(e=!0),n.updateWidgetSettings(s,e)},s.getColClass=function(){return"col-md-"+s.width}}]),e.directive("impacWidget",["$templateCache",function(e){return{restrict:"A",scope:{parentDashboard:"=",widget:"=",isAccessibility:"=",onDisplayAlerts:"&"},controller:"ImpacWidgetCtrl",link:function(t){return t.widget.isLoading=!0,t.widget.settings=[],t.widget.hasEditAbility=!0,t.widget.hasDeleteAbility=!0,t.widgetContentTemplate=function(){var i,a;return t.widget.metadata.template?t.templateName=t.widget.metadata.template.replace(/\/|_/g,"-"):(i=angular.copy(t.widget.category).split("/"),i.length=2,t.templateName=i.join("-").replace(/_/g,"-")),a="widgets/"+t.templateName+".tmpl.html",t.isAccessibility&&(e.get("widgets/"+t.templateName+".accessible.tmpl.html")&&(a="widgets/"+t.templateName+".accessible.tmpl.html"),t.templateName=t.templateName+" accessible"),a}},template:e.get("widget/widget.tmpl.html")}}])}.call(this),function(){angular.module("impac.filters.url-helper",[]).filter("urlHelper",function(){return function(e,t){var i,a;if(e&&e.length)return i=function(){return e=[e,t.shift()].join("?"),e=[].concat.apply([],[e,t]).join("&")},a=function(){var e,a,n;for(a=0,e=[],n=Object.keys(t);a<n.length;)e.push(n[a]+"="+t[n[a]]),a++;return t=e,i()},Array.isArray(t)&&i(),"object"!=typeof t||Array.isArray(t)||a(),e}})}.call(this),function(){angular.module("impac.services.assets",[]).provider("ImpacAssets",function(){var e,t,i;return i=this,t={dataNotFound:null,impacTitleLogo:null,impacDashboardBackground:null,noWarning:!1},i.configure=function(e){return angular.extend(t,e)},e=function(e){var i;return i=this,i.get=function(i){var a,n;return n="",a="impac-angular warning: There are missing assets ("+i+"), please refer to the including assets section in the docs.",null!=t[i]?n=t[i]:t.noWarning||e.warn(a),n},i},e.$inject=["$log"],i.$get=e,i})}.call(this),function(){angular.module("impac.services.chart-formatter",[]).service("ChartFormatterSvc",["ImpacTheming","$filter","$window","$document","ImpacDashboardsSvc",function(e,t,i,a,n){var s,r,o,l,d,c,u,g;r=this,s=e.get().chartColors,i.onblur=function(){return angular.element(a[0].getElementById("chartjs-tooltip")).remove()},this.getPositiveColor=function(){return s.positive},this.getNegativeColor=function(){return s.negative},this.getOthersColor=function(){return s.others},this.getColor=function(e){return s.array[e%s.array.length]},o=function(e){return e.replace(/#/,"")},c=function(e){return parseInt(o(e).substring(0,2),16)},d=function(e){return parseInt(o(e).substring(2,4),16)},l=function(e){return parseInt(o(e).substring(4,6),16)},u=function(e){return[c(e),d(e),l(e)].join(",")},g=function(e,t){return"rgba("+u(e)+","+t+")"},this.customTooltip=function(e){var t,i,a,n,s,r;return r=angular.element("#chartjs-tooltip"),r[0]||(angular.element("body").append('<div id="chartjs-tooltip"></div>'),r=angular.element("#chartjs-tooltip")),e.opacity?(r.removeClass("above below no-transform"),e.yAlign?r.addClass(e.yAlign):r.addClass("no-transform"),e.body&&(i=_.compact([(e.beforeTitle||[]).join("<br/>"),(e.title||[]).join("<br/>"),(e.afterTitle||[]).join("<br/>"),(e.beforeBody||[]).join("<br/>"),(e.body||[]).join("<br/>"),(e.afterBody||[]).join("<br/>"),(e.beforeFooter||[]).join("<br/>"),(e.footer||[]).join("<br/>"),(e.afterFooter||[]).join("<br/>")]),r.html(i.join("<br/>"))),t=angular.element(this._chart.canvas),n=t.offset(),t.bind("mouseleave",function(e){return"chartjs-tooltip"!==e.relatedTarget.id?r.remove():void 0}),r.bind("mouseleave",function(e){return"CANVAS"!==e.relatedTarget.tagName?r.remove():void 0}),r.css({"background-color":"#17262d",color:"white",opacity:1,transition:"opacity 0.5s, top 0.5s, left 0.5s",position:"absolute",width:null!=(s=e.width)?s:(a={},a[e.width+"px"]="auto",a),left:n.left+e.x+10+"px",top:n.top+e.y+10+"px",fontFamily:e._fontFamily,fontSize:e.fontSize,fontStyle:e._fontStyle,padding:e.yPadding+"px "+e.xPadding+"px","border-radius":"2px"})):(r.css({opacity:.5}),void 0)},angular.merge(Chart.defaults.global,{defaultColor:r.getColor(0),tooltips:{titleFontFamily:"Lato, 'Helvetica Neue', Helvetica, Arial, sans-serif",bodyFontFamily:"Lato, 'Helvetica Neue', Helvetica, Arial, sans-serif",footerFontFamily:"Lato, 'Helvetica Neue', Helvetica, Arial, sans-serif",enabled:!1,custom:r.customTooltip},elements:{point:{hitRadius:8,hoverRadius:8},line:{tension:0,borderWidth:2}}}),angular.merge(Chart.defaults.scale,{ticks:{beginAtZero:!0,minRotation:0,fontFamily:"Lato, 'Helvetica Neue', Helvetica, Arial, sans-serif"},scaleLabel:{fontFamily:"Lato, 'Helvetica Neue', Helvetica, Arial, sans-serif"}}),this.setTooltipsTextLayout=function(e,i){return null==i&&(i=!1),angular.merge(e,{tooltips:{callbacks:{title:function(e,t){var a;return i?(a=[t.labels[e[0].index]],t.datasets[e[0].datasetIndex].label&&a.push(t.datasets[e[0].datasetIndex].label),a.join(" | ")):t.labels[e[0].index]},label:function(i,a){var s;return s=e.currency||n.getCurrentDashboard().currency,"hide"!==s?t("mnoCurrency")(a.datasets[i.datasetIndex].data[i.index],s):a.datasets[i.datasetIndex].data[i.index]}}}})},this.lineChart=function(e,t,i){var a,n,s;return null==t&&(t={}),null==i&&(i=!1),r.setTooltipsTextLayout(t,!0),a=0,n=1===e.length,s=!1,e[0].labels.length<2&&(s=!0,e[0].labels.push(e[0].labels[0])),(e.length>1||null!=t.pointDot&&!t.pointDot||s)&&angular.merge(t,{elements:{point:{radius:1e-4},line:{tension:.3}}}),{type:"line",options:t,data:{labels:e[0].labels,datasets:_.map(e,function(e){var t;return s&&e.values.push(e.values[0]),t=i?0===a?r.getNegativeColor():r.getPositiveColor():r.getColor(a),a++,{label:e.title,data:e.values,fill:n,backgroundColor:g(t,.3),borderColor:t,pointBorderColor:t,pointBackgroundColor:t,pointHoverBackgroundColor:"rgb(255,255,255)"}})}}},this.barChart=function(e,t,i){var a,n,s,o,l,d;for(null==t&&(t={}),null==i&&(i=!0),r.setTooltipsTextLayout(t),s=0,a=[],l=e.values,n=0,o=l.length;o>n;n++)d=l[n],i&&(e.values[s]=Math.abs(d)),a.push(r.getColor(s)),s++;return{type:"bar",options:t,data:{labels:e.labels,datasets:[{backgroundColor:a,data:e.values}]}}},this.combinedBarChart=function(e,t,i){var a,n;return null==t&&(t={}),null==i&&(i=!0),r.setTooltipsTextLayout(t,!0),a=0,n={type:"bar",options:t,data:{labels:e.labels,datasets:_.map(e.datasets,function(e){var t,n,s,o,l;if(t=r.getColor(a),a++,i)for(o=e.values,n=0,s=o.length;s>n;n++)l=o[n],l=Math.abs(l);return{label:e.title,data:e.values,backgroundColor:t}})}}},this.pieChart=function(e,t,i){var a,n,s,o,l,d,c;if(null==t&&(t={}),null==i&&(i=!1),r.setTooltipsTextLayout(t),o=0,a=[],i)for(a.push(r.getNegativeColor()),s=0,d=e.length;d>s;s++)n=e[s],0!==o&&a.push(r.getPositiveColor()),o++;else for(l=0,c=e.length;c>l;l++)n=e[l],a.push(r.getColor(o)),o++;return{type:"doughnut",options:t,data:{datasets:[{data:_.map(e,function(e){return Math.abs(e.value)}),backgroundColor:a}],labels:_.map(e,function(e){return e.label})}}}}])}.call(this),function(){angular.module("impac.services.dashboards",[]).service("ImpacDashboardsSvc",["$q","$http","$log","$timeout","ImpacMainSvc","ImpacRoutes","ImpacKpisSvc","ImpacTheming",function(e,t,i,a,n,s,r,o){var l,d,c,u;return l=this,this.config={},this.config.dashboards=[],this.getDashboards=function(){return l.config.dashboards},this.config.currentDashboard={},this.getCurrentDashboard=function(){return l.config.currentDashboard},this.config.widgetsTemplates=[],this.getWidgetsTemplates=function(){return l.config.widgetsTemplates},this.callbacks={},this.callbacks.dashboardChanged=e.defer(),this.dashboardChanged=function(){return l.callbacks.dashboardChanged.promise},this.callbacks.widgetAdded=e.defer(),this.widgetAdded=function(){return l.callbacks.widgetAdded.promise},c=function(){return _.isEmpty(l.config.dashboards)||_.isEmpty(l.config.currentDashboard)},this.isThereADashboard=function(){return!_.isEmpty(l.config.currentDashboard)},this.areThereSeveralDashboards=function(){return l.config.dashboards.length>1},this.isCurrentDashboardEmpty=function(){return l.isThereADashboard()&&_.isEmpty(l.config.currentDashboard.widgets)},this.areKpisEnabled=function(){return o.get().dhbKpisConfig.enableKpis},this.loadLocked=!1,this.load=function(r){var o;return null==r&&(r=!1),l.loadLocked?(i.warn("ImpacDashboardsSvc.load locked. Trying again in 1s"),a(function(){return l.load(r)},1e3)):(l.loadLocked=!0,o=e.defer(),c()||r?n.loadOrganizations(r).then(function(e){var a;return a=e.currentOrganization.id,t.get(s.dashboards.index(a)).then(function(e){return l.setDashboards(e.data).then(function(){return l.setCurrentDashboard(),l.loadLocked=!1,o.resolve(l.config)}),function(e){return l.loadLocked=!1,o.reject(e)}},function(e){return i.error("Impac - DashboardSvc: cannot retrieve dashboards list for org: "+a),l.loadLocked=!1,o.reject(e)})},function(e){return i.error("Impac - DashboardSvc: cannot retrieve current organization"),l.loadLocked=!1,o.reject(e)}):(l.loadLocked=!1,o.resolve(l.config)),o.promise)},u=function(){return null!=l.config.dashboards&&l.config.dashboards.length>0?(i.info("Impac - DashboardSvc: first dashboard set as current by default"),n.override(l.config.currentDashboard,l.config.dashboards[0]),l.setWidgetsTemplates(l.config.currentDashboard.widgets_templates),l.areKpisEnabled()&&r.initialize(l.config.currentDashboard),l.initializeActiveTabs(),l.callbacks.dashboardChanged.notify(l.config.currentDashboard),!0):(i.warn("Impac - DashboardSvc: cannot set default current dashboard"),n.override(l.config.currentDashboard,{}),l.callbacks.dashboardChanged.notify(!1),!1)},this.setCurrentDashboard=function(e){var t;return null==e&&(e=null),null!=e?(t=_.find(l.config.dashboards,function(t){return e===t.id}),_.isEmpty(t)?(i.error("Impac - DashboardSvc: dashboard: "+e+" not found in dashboards list"),u()):(n.override(l.config.currentDashboard,t),l.setWidgetsTemplates(t.widgets_templates),l.areKpisEnabled()&&r.initialize(l.config.currentDashboard),l.initializeActiveTabs(),l.callbacks.dashboardChanged.notify(l.config.currentDashboard),!0)):u()},d=function(e,t){return _.includes(_.pluck(e.data_sources,"id"),t.id)},this.setDashboards=function(e){return null==e&&(e=[]),n.loadOrganizations().then(function(t){var i,a,n,s,r;for(i=t.currentOrganization,_.remove(l.config.dashboards,function(){return!0}),r=[],n=0,s=e.length;s>n;n++)a=e[n],d(a,i)?r.push(l.config.dashboards.push(a)):r.push(void 0);return r},function(){return i.error("Impac - DashboardSvc: Cannot load user's organizations")})},this.setWidgetsTemplates=function(e){var t,i,a;if(_.isEmpty(e)||!_.isEmpty(l.config.widgetsTemplates))return!1;for(t=0,i=e.length;i>t;t++)a=e[t],l.config.widgetsTemplates.push(a);return!0},this.initializeActiveTabs=function(){var e,t,i,a,n;for(a=l.config.dashboards,n=[],t=0,i=a.length;i>t;t++)e=a[t],n.push(_.merge(e,{active:l.config.currentDashboard.id===e.id}));return n},this.create=function(a){return l.load().then(function(){var r,o,d;return o=e.defer(),d=n.config.currentOrganization,null==a.currency&&(a.currency=d.currency||"USD"),r={dashboard:a},t.post(s.dashboards.create(d.id),r).then(function(e){return l.config.dashboards.push(e.data),l.setCurrentDashboard(e.data.id),o.resolve(e.data)},function(e){return i.error("Impac - DashboardSvc: cannot create dashboard with parameters: "+angular.toJson(a),e),o.reject(e)}),o.promise})},this["delete"]=function(a){var n;return n=e.defer(),t["delete"](s.dashboards["delete"](a)).then(function(e){return _.remove(l.config.dashboards,function(e){return a===e.id}),l.setCurrentDashboard(),n.resolve(e)},function(e){return i.error("Impac - DashboardSvc: cannot delete dashboard: "+a),n.reject(e)}),n.promise},this.update=function(a,n){var r,o;return o=e.defer(),r={dashboard:n},t.put(s.dashboards.update(a),r).then(function(e){return angular.merge(_.find(l.config.dashboards,function(e){return a===e.id}),e.data),a===l.config.currentDashboard.id&&angular.merge(l.config.currentDashboard,e.data),o.resolve(e.data)},function(e){return i.error("Impac - DashboardSvc: cannot update dashboard: "+a+" with parameters: "+n),o.reject(e)}),o.promise},l}])}.call(this),function(){angular.module("impac.services.kpis",[]).service("ImpacKpisSvc",["$log","$http","$filter","$q","ImpacRoutes","ImpacMainSvc",function(e,t,i,a,n,s){var r,o,l,d,c;return r=this,this.config={},this.config.ssoSessionId="",this.getSsoSessionId=function(){return r.config.ssoSessionId},this.config.kpisTemplates=[],this.getKpisTemplates=function(){return r.config.kpisTemplates},this.config.currentDashboardId="",this.getCurrentDashboardId=function(){return r.config.currentDashboardId},o=function(e,t,i,a){var n,s;return n=[e,t,i].join("/"),s=[n,decodeURIComponent($.param(a))].join("?")},c=function(){return!_.isEmpty(r.config.ssoSessionId||_.isEmpty(r.config.kpisTemplates||_.isEmpty(r.config.currentDashboardId)))},d=function(){var e;return e=t.defaults.headers.common.Authorization,e&&"string"==typeof e&&e.length},this.load=function(e){var t;return null==e&&(e=!1),t=a.defer(),_.isEmpty(r.config.ssoSessionId)||e?s.loadUserData(e).then(function(e){return r.config.ssoSessionId=e.sso_session,t.resolve(r.config)},function(e){return t.reject(e)}):t.resolve(r.config),t.promise},this.initialize=function(i){return r.load().then(function(){var s,o,d;return r.config.currentDashboardId=i.id,s=_.pluck(i.data_sources,"uid"),o={},o.metadata={organization_ids:s},r.config.ssoSessionId&&(o.metadata.sso_session=r.config.ssoSessionId),d={impac:l(o)},n.kpis.local()&&(d.local=t.get(n.kpis.local())),a.all(d).then(function(e){var t,i,a,n,s,o,l,d;for(_.remove(r.config.kpisTemplates,function(){return!0}),s=e.impac.data.kpis,t=0,a=s.length;a>t;t++)d=s[t],d.source||(d.source="impac"),r.config.kpisTemplates.push(d);if(e.local){for(o=e.local.data.kpis,l=[],i=0,n=o.length;n>i;i++)d=o[i],d.source="local",l.push(r.config.kpisTemplates.push(d));return l}},function(t){return e.error("ImpacKpisSvc - cannot retrieve kpis templates list",t)})})},l=function(e){var i,a;return i=n.kpis.index(),a=[i,decodeURIComponent($.param(e))].join("?"),t.get(a)},this.show=function(i){var s,l,u,g;if(s=a.defer(),c()||d()){switch(u={},r.config.ssoSessionId&&(u.sso_session=r.config.ssoSessionId),null!=i.targets&&(u.targets=i.targets),null!=i.settings&&(u.metadata=i.settings),null!=i.extra_params&&(u.extra_params=i.extra_params),i.source){case"impac":l=n.kpis.show(r.config.currentDashboardId,i.id);break;case"local":l=n.kpis.local()
}g=o(l,i.endpoint,i.element_watched,u),t.get(g).then(function(e){var t,a;return i.data||(i.data={}),angular.extend(i.data,_.pick(e.data.kpi,["value","unit","results"])),a=e.data.kpi.configuration||{},t=_.select(["targets","extra_params"],function(e){return null==i[e]&&null!=a[e]}),angular.extend(i,_.pick(a,t)),s.resolve(i)},function(t){return e.error("impac-angular ERROR: Could not retrieve KPI at: "+i.endpoint,t),s.reject(t)})}else e.error("ImpacKpisSvc - Service not initialized"),s.reject({error:{message:"ImpacKpisSvc is not initialized"}});return s.promise},this.create=function(e,i,s){var o,l,u;return o=a.defer(),c()||d()?(l={source:e,endpoint:i,element_watched:s},u=n.kpis.create(r.config.currentDashboardId),t.post(u,{kpi:l}).then(function(e){return o.resolve(e.data)},function(e){return o.reject(e)})):o.reject({error:{message:"ImpacKpisSvc is not initialized"}}),o.promise},this.update=function(i,s){var o,l,d;return o=a.defer(),l={},null!=s.name&&(l.name=s.name),null!=s.metadata&&(l.settings=s.metadata),null!=s.targets&&(l.targets=s.targets),null!=s.extra_params&&(l.extra_params=s.extra_params),d=n.kpis.update(r.config.currentDashboardId,i.id),_.isEmpty(l)||t.put(d,{kpi:s}).then(function(e){return angular.extend(i,e.data),r.show(i),o.resolve(i)},function(t){return e.error("impac-angular ERROR: Unable to update KPI ",t),o.reject(t)}),o.promise},this["delete"]=function(e){var i,s;return i=a.defer(),s=n.kpis["delete"](r.config.currentDashboardId,e.id),t["delete"](s).then(function(e){return i.resolve(e)},function(e){return i.reject(e)}),i.promise},this}])}.call(this),function(){angular.module("impac.services.linking",[]).provider("ImpacLinking",function(){var e,t,i;return i=this,t={user:null,organizations:null},i.linkData=function(e){return _.forIn(t,function(i,a){var n;if(n=e[a],null==n)throw new Error("impac-angular linking.svc: Missing core data ("+a+") to run impac-angular.");if("function"!=typeof n)throw new TypeError("impac-angular linking.svc: "+a+" should be a Function.");return t[a]=n})},e=function(e){var i;return i=this,i.getUserData=function(){return t.user().then(function(e){return e},function(t){return e.reject(t)})},i.getOrganizations=function(){return t.organizations().then(function(e){return e},function(t){return e.reject(t)})},i},e.$inject=["$q"],i.$get=e,i})}.call(this),function(){angular.module("impac.services.main",[]).service("ImpacMainSvc",["$q","$log","ImpacLinking",function(e,t,i){var a,n,s;return a=this,this.config={},this.config.organizations=[],this.config.currentOrganization={},this.config.userData={},this.config.currencies=["USD","AUD","CAD","CNY","EUR","GBP","HKD","INR","JPY","NZD","SGD","PHP","AED","IDR"],n=function(){return!(_.isEmpty(a.config.organizations)||_.isEmpty(a.config.currentOrganization||_.isEmpty(a.config.userData)))},this.load=function(i){var s;return null==i&&(i=!1),s=e.defer(),!n()||i?e.all([a.loadOrganizations(i),a.loadUserData(i)]).then(function(){return s.resolve(a.config)},function(e){return t.error("ImpacMainSvc: failed to load configuration"),s.reject(e)}):s.resolve(a.config),s.promise},this.loadOrganizations=function(n){var s;return null==n&&(n=!1),s=e.defer(),_.isEmpty(a.config.organizations)||_.isEmpty(a.config.currentOrganization)||n?i.getOrganizations().then(function(e){return null!=e.organizations&&e.organizations.length>0?(a.config.organizations=e.organizations,a.setCurrentOrganization(e.currentOrgId)):(a.config.organizations=[],a.config.currentOrganization={},t.info("ImpacMainSvc: retrieved empty organizations list")),s.resolve(a.config)},function(e){return t.error("ImpacMainSvc: cannot set organization: "+id+" as currentOrganization"),s.reject(e)}):s.resolve(a.config),s.promise},s=function(){return null!=a.config.organizations&&a.config.organizations.length>0?(a.config.currentOrganization=a.config.organizations[0],t.info("ImpacMainSvc: first organization set as current by default"),!0):(a.config.currentOrganization={},t.error("ImpacMainSvc: cannot set default current organization"),{error:{code:400,message:"cannot set default current organization"}})},this.setCurrentOrganization=function(e){var i;return null==e&&(e=null),null!=e?(i=_.find(a.config.organizations,function(t){return e===t.id}),_.isEmpty(i)?(t.error("ImpacMainSvc: organization: "+e+" not found in organizations list"),s()):(a.config.currentOrganization=i,!0)):s()},this.loadUserData=function(n){var s;return null==n&&(n=!1),s=e.defer(),_.isEmpty(a.config.userData)||n?i.getUserData().then(function(e){return angular.extend(a.config.userData,e),s.resolve(a.config.userData)},function(e){return t.error("ImpacMainSvc: cannot retrieve user data"),s.reject(e)}):s.resolve(a.config.userData),s.promise},this.override=function(e,t){var i,a;for(i in e)a=e[i],delete e[i];for(i in t)a=t[i],e[i]=a;return e},a}])}.call(this),function(){angular.module("impac.services.message-bus",[]).service("MsgBus",function(){var e;e={dashboardGrid:{},controlBarFilter:{},controlBarQuickFilter:{},orgaSharingModal:{},appConnectModal:{},page:{},pane:{},errors:[],autostopQueue:[],notificationQueue:[],params:{}},this.publish=function(t,i){return e[t]=i},this.subscribe=function(t){return function(){return e[t]}}})}.call(this),function(){angular.module("impac.services.routes",[]).provider("ImpacRoutes",function(){var e,t,i;return i=this,t={mnoHub:"/api/v2",impacPrefix:"/impac",impacApi:"http://localhost:4000/api",dashboards:{index:null,show:null,create:null,update:null,del:null},widgets:{index:null,show:null,create:null,update:null,del:null,suggest:null},kpis:{index:null,show:null,create:null,update:null,del:null,local:null},organizations:{appInstancesSync:null}},i.configureRoutes=function(e){return angular.extend(t,e)},e=function(){var e;return e=this,e.dashboards={index:function(e){return null==e&&(e=null),t.dashboards.index?t.dashboards.index.replace(":organization_id",e):""+t.mnoHub+t.impacPrefix+"/dashboards"},create:function(i){return null==i&&(i=null),t.dashboards.create?t.dashboards.create.replace(":organization_id",i):e.dashboards.index(i)},show:function(e){return t.dashboards.show?t.dashboards.show.replace(":id",e):""+t.mnoHub+t.impacPrefix+"/dashboards/"+e},update:function(i){return t.dashboards.update?t.dashboards.update.replace(":id",i):e.dashboards.show(i)},"delete":function(i){return t.dashboards.del?t.dashboards.del.replace(":id",i):e.dashboards.show(i)}},e.widgets={index:function(i){return t.widgets.index?t.widgets.index.replace(":dashboard_id",i):e.dashboards.show(i)+"/widgets"},show:function(e,i){return t.widgets.show?t.widgets.show.replace(":dashboard_id",e).replace(":id",i):t.impacApi+"/v1/get_widget"},create:function(i){return t.widgets.create?t.widgets.create.replace(":dashboard_id",i):e.widgets.index(i)},update:function(i,a){return t.widgets.update?t.widgets.update.replace(":dashboard_id",i).replace(":id",a):e.widgets.index(i)+"/"+a},"delete":function(i,a){return t.widgets.del?t.widgets.del.replace(":dashboard_id",i).replace(":id",a):e.widgets.index(i)+"/"+a},suggest:function(){return t.widgets.suggest}},e.kpis={index:function(e){return t.kpis.index?t.kpis.index.replace(":dashboard_id",e):t.impacApi+"/v2/kpis"},show:function(e,i){return t.kpis.show?t.kpis.show.replace(":dashboard_id",e).replace(":id",i):t.impacApi+"/v2/kpis"},create:function(i){return t.kpis.create?t.kpis.create.replace(":dashboard_id",i):e.dashboards.show(i)+"/kpis"},update:function(i,a){return t.kpis.update?t.kpis.update.replace(":dashboard_id",i).replace(":id",a):e.kpis.create(i)+"/"+a},"delete":function(i,a){return t.kpis.del?t.kpis.del.replace(":dashboard_id",i).replace(":id",a):e.kpis.create(i)+"/"+a},local:function(){return t.kpis.local}},e.organizations={appInstancesSync:function(e){return t.organizations.appInstancesSync?t.organizations.appInstancesSync.replace(":uid",e):t.mnoHub+"/organizations/"+e+"/app_instances_sync"}},e},e.$inject=[],i.$get=e,i})}.call(this),function(){angular.module("impac.services.theming",[]).provider("ImpacTheming",function(){var e,t,i;return i=this,t={chartColors:{positive:"#3FC4FF",negative:"#1DE9B6",array:["#1de9b6","#7c4dff","#ffc928","#3fc4ff","#ff8e01","#c6ff00","#d500fa","#ff6e41","#ffeb3c","#ff1844"]},dhbConfig:{showDhbHeading:!1,dhbHeadingText:"Impac!"},dhbSelectorConfig:{selectorType:"dropdown",customTmplPath:null,accessibilityEnabled:!1,addWidgetEnabled:!0,addDhbEnabled:!0,deleteDhbEnabled:!0},dhbKpisConfig:{enableKpis:!1,parentElementId:""},dataNotFoundConfig:{mainMessage:"Data not found",linkMessage:"Are you missing an app?",linkUrl:"/apps",linkTarget:"_blank",linkUrlCallback:null},dhbErrorsConfig:{firstTimeCreated:{first:"It's time to add a reporting dashboard!",second:"In 2 clicks, you'll be able to visualize how your business is performing.",note:"Note: dashboards you create will only be accessible by you. Dashboard sharing across users will be added soon."},empty:{first:"Now it's time to select the metrics you want to see!",second:"Add widgets to your dashboard to help make an Impac!™ to your business."}},dhbSubMenuConfig:{myobMessage:{show:!0,appLink:{show:!0,url:"#/marketplace",text:">> Check this app on our marketplace"}}},widgetSelectorConfig:{path:null},addChartTile:{show:!1,onClickOptions:{triggers:[]}},showNoWidgetMsg:{show:!0},dhbSettings:{inWidgetsContainer:!1,showSyncApps:function(){return!0},currency:{locked:!1}}},i.configure=function(e){return angular.merge(t,e)},e=function(){var e;return e=this,e.get=function(){return t},e},e.$inject=[],i.$get=e,i})}.call(this),function(){angular.module("impac.services.utilities",[]).service("ImpacUtilities",function(){this.processRailsError=function(e){var t;return t=[],e.status&&401===e.status?t.push("Sorry! You are not authorized to perform this action"):e.data&&" "!==e.data?angular.isArray(e.data)?_.each(e.data,function(e){var i;return i=e.charAt(0).toUpperCase()+e.slice(1),t.push(""+i)}):angular.isObject(e.data)?_.each(e.data,function(e,i){var a;return a=(i.charAt(0).toUpperCase()+i.slice(1)).replace("_"," "),angular.isArray(e)?_.each(e,function(e){return a.match(/base/i)?t.push(e):t.push(a+" "+e)}):a.match(/base/i)?t.push(e):t.push(a+" "+e)}):angular.isString(e.data)?t.push(e.data):t.push("Potentially a system or communication error. Please retry later."):t.push("Potentially a system or communication error. Please retry later."),t}})}.call(this),function(){angular.module("impac.services.widgets",[]).service("ImpacWidgetsSvc",["$q","$http","$log","ImpacRoutes","ImpacMainSvc","ImpacDashboardsSvc",function(e,t,i,a,n,s){var r,o;return r=this,this.config={},this.config.ssoSessionId="",this.load=function(t){var i;return null==t&&(t=!1),i=e.defer(),_.isEmpty(r.config.ssoSessionId)||t?e.all([n.loadUserData(t),s.load(t)]).then(function(e){return r.config.ssoSessionId=e[0].sso_session,i.resolve(r.config)},function(e){return i.reject(e)}):i.resolve(r.config),i.promise},this.create=function(n){var o;return o=e.defer(),r.load().then(function(){var e,r;return e=s.getCurrentDashboard(),r={widget:n},t.post(a.widgets.create(e.id),r).then(function(t){var i;return i=t.data,e.widgets.push(i),s.callbacks.widgetAdded.notify(i),o.resolve(i)},function(t){return i.error("ImpacWidgetsSvc: cannot create widget on dashboard "+e.id),o.reject(t)})},function(e){return i.error("ImpacWidgetsSvc: error while trying to load the service"),o.reject(e)}),o.promise},o=function(e){var t;return t=s.getCurrentDashboard(),_.isEmpty(t)||_.isEmpty(t.widgets)?!1:_.contains(_.pluck(t.widgets,"id"),e)},this.initWidgetSettings=function(e){var t,i,a,n;if(e.isEditMode=!1,!_.isEmpty(e.settings)){for(a=e.settings,t=0,i=a.length;i>t;t++)n=a[t],n.initialize();return!0}},this.updateWidgetSettings=function(t,i){var a,n,s,o,l,d;if(null==i&&(i=!0),t.isEditMode=!1,a=e.defer(),_.isEmpty(t.settings))a.reject("no setting to update");else{for(i&&(t.isLoading=!0),o={},l=t.settings,n=0,s=l.length;s>n;n++)d=l[n],angular.merge(o,d.toMetadata());r.update(t,{metadata:o}).then(function(e){return i?r.show(e).then(function(e){return e.isLoading=!1,a.resolve(e)},function(t){return e.isLoading=!1,a.reject(t)}):a.resolve(e)},function(e){return a.reject(e)})}return a.promise},this.massAssignAll=function(t){return _.isEmpty(t)?void 0:r.load().then(function(){var a,n,o,l,d,c,u;if(a=s.getCurrentDashboard(),d=[],null!=a&&null!=a.widgets){if(_.isEmpty(a.widgets))return e.resolve([]);for(c=a.widgets,n=0,o=c.length;o>n;n++)u=c[n],l=angular.merge({},u.metadata,t),_.isEqual(u.metadata,l)||d.push(r.update(u,{metadata:l}).then(function(e){return e.isLoading=!0,r.show(e).then(function(e){return e.isLoading=!1})}));return e.all(d)}return i.error("ImpacWidgetsSvc - currentDhb.widgets is null",a),e.reject(null)})},this.refreshAll=function(){return s.load().then(function(e){var t;return t=e.currentDashboard.widgets,_.forEach(t,function(e){return e.isLoading||(e.isLoading=!0),r.show(e,!0).then(function(){return e.isLoading=!1},function(t){return e.isLoading=!1,null!=t.data&&t.data.error?i.error(t.data.error):void 0})})})},this.show=function(n,l){var d;return null==l&&(l=!1),d=e.defer(),r.load().then(function(){var e,c;return o(n.id)?(c={owner:n.owner,sso_session:r.config.ssoSessionId,metadata:n.metadata,engine:n.category},l&&angular.extend(c,{refresh_cache:!0}),e=s.getCurrentDashboard(),t.post(a.widgets.show(e.id,n.id),c).then(function(e){var t,i,a,s,r,o;for(t=e.data.content||{},s=e.data.name,angular.extend(n,{content:t,originalName:s}),angular.isDefined(n.initContext)&&n.initContext(),r=n.settings,i=0,a=r.length;a>i;i++)o=r[i],angular.isDefined(o.initialize)&&o.initialize();return angular.isDefined(n.format)&&n.format(),d.resolve(n)},function(e){var t,i,a,s;for(angular.isDefined(n.initContext)&&n.initContext(),a=n.settings,t=0,i=a.length;i>t;t++)s=a[t],angular.isDefined(s.initialize)&&s.initialize();return angular.isDefined(n.processError)&&null!=e.data&&e.data.error&&n.processError(e.data.error),d.reject(e)})):(i.info("ImpacWidgetsSvc: trying to load a widget (id: "+n.id+") that is not in currentDashboard"),d.reject("trying to load a widget (id: "+n.id+") that is not in currentDashboard"))},function(e){return i.error("ImpacWidgetsSvc: error while trying to load the service"),d.reject(e)}),d.promise},this.update=function(n,l){var d,c,u;return u=e.defer(),r.load().then(function(){},o(n.id)?(c={widget:l},d=s.getCurrentDashboard(),t.put(a.widgets.update(d.id,n.id),c).then(function(e){var t;return t=e.data,angular.extend(n,t),u.resolve(n)},function(e){return i.error("ImpacWidgetsSvc: cannot update widget: "+n.id),u.reject(e)})):(i.info("ImpacWidgetsSvc: trying to update a widget (id: "+n.id+") that is not in currentDashboard"),u.reject("trying to update a widget (id: "+n.id+") that is not in currentDashboard")),function(e){return i.error("ImpacWidgetsSvc: error while trying to load the service"),u.reject(e)}),u.promise},this["delete"]=function(n){var o;return o=e.defer(),r.load().then(function(){var e;return e=s.getCurrentDashboard(),t["delete"](a.widgets["delete"](e.id,n.id)).then(function(t){return _.remove(e.widgets,function(e){return e.id===n.id}),o.resolve(t)},function(e){return i.error("ImpacWidgetsSvc: error while trying to delete widget: "+n.id),o.reject(e)})},function(e){return i.error("ImpacWidgetsSvc: error while trying to load the service"),o.reject(e)}),o.promise},r}])}.call(this),function(){var e;e=angular.module("impac.components.dashboard-settings.currency",[]),e.directive("dashboardSettingCurrency",["$templateCache","$log","ImpacMainSvc","ImpacDashboardsSvc","ImpacWidgetsSvc","ImpacTheming",function(e,t,i,a,n,s){return{restrict:"A",scope:{currency:"="},link:function(e){return e.locked=s.get().dhbSettings.currency.locked,i.load().then(function(t){return a.load().then(function(){return e.currentDhb=a.getCurrentDashboard(),e.currencies=t.currencies})}),e.massAssignCurrency=function(){var t;return t={currency:e.currency},a.update(e.currentDhb.id,t),n.massAssignAll(t)}},template:e.get("dashboard-settings/currency.tmpl.html")}}])}.call(this),function(){var e;e=angular.module("impac.components.dashboard-settings.sync-apps",[]),e.directive("dashboardSettingSyncApps",["$templateCache","$log","$http","$filter","$modal","ImpacMainSvc","ImpacRoutes","ImpacWidgetsSvc","ImpacTheming","poller","$timeout",function(e,t,i,a,n,s,r,o,l,d,c){return{restrict:"A",scope:{},template:e.get("dashboard-settings/sync-apps.tmpl.html"),link:function(e){var l,u,g;return e.isSyncing=!1,e.hasConnectors=!1,u=function(t){var i,a,n,s;if(e.isSyncing=t.is_syncing,e.hasConnectors=t.connectors&&t.connectors.length>0,e.hasConnectors)for(e.lastConnector=t.connectors[0],e.otherConnectors=_.slice(t.connectors,1),e.failedConnectors=[],e.disconnectedConnectors=[],s=t.connectors,a=0,n=s.length;n>a;a++)i=s[a],"FAILED"===i.status?e.failedConnectors.push(angular.copy(i)):"DISCONNECTED"===i.status&&e.disconnectedConnectors.push(angular.copy(i));else e.lastConnector={status:"SUCCESS",last_sync_date:new Date};return e.isSyncing?void 0:g()},g=function(){var t;return e.syncingPoller.stop(),e.isDashboardRefreshAuthorized?(o.refreshAll(),_.isEmpty(e.failedConnectors)&&_.isEmpty(e.disconnectedConnectors)||(t=n.open({animation:!0,size:"md",templateUrl:"alerts.tmpl.html",appendTo:angular.element("impac-dashboard"),controller:["$scope","connectors",function(e,i){return e.failedConnectors=i.failed,e.disconnectedConnectors=i.disconnected,e.ok=function(){return t.close()}}],resolve:{connectors:function(){return{disconnected:e.disconnectedConnectors,failed:e.failedConnectors}}}})),e.isDashboardRefreshAuthorized=!1):void 0},l=function(){var e,t,i,a;return a=(new Date).getTimezoneOffset(),i=["+","00","00"],0>a||(i[0]="-"),e=""+Math.abs(Math.floor(a/60)),i[1]=e.length<2?"0"+e:e,t=""+Math.abs(a%60),i[2]=t.length<2?"0"+t:t,i.join("")},e.synchronize=function(){return e.isSyncing?void 0:(e.isSyncing=!0,e.isDashboardRefreshAuthorized=!0,i.post(r.organizations.appInstancesSync(e.orgUID)).then(function(t){return u(t.data),t.data.is_syncing?c(function(){return e.syncingPoller.start()},5e3):void 0},function(i){return t.error("Unable to sync apps",i),e.isSyncing=!1}))},e.formatStatus=function(e){var t,i,n;if(e){if(i=e.name,n="",e.last_sync_date)switch(t=a("date")(e.last_sync_date,"yyyy-MM-dd 'at' h:mma",l()),e.status){case"SUCCESS":n="Last sync: "+t;break;case"FAILED":n="Last sync failed: "+t;break;case"DISCONNECTED":n="Disconnected - previous sync was: "+t}else switch(e.status){case"FAILED":n="Sync failed";break;case"DISCONNECTED":n="Sync failed - Disconnected";break;case"NOT SYNCED":n="Not synced yet"}return _.isEmpty(n)||_.isEmpty(i)||(n=n+" ("+i+")"),n}},s.load(!0).then(function(t){return e.orgUID=t.currentOrganization.uid,e.syncingPoller=d.get(r.organizations.appInstancesSync(e.orgUID),{delay:5e3,smart:!0}),e.syncingPoller.promise.then(null,null,function(e){return u(e.data)})}),e.$on("$destroy",function(){return e.syncingPoller?e.syncingPoller.stop()&&e.syncingPoller.remove():void 0})}}}])}.call(this),function(){var e;e=angular.module("impac.components.widgets.accounts-accounting-values",[]),e.controller("WidgetAccountsAccountingValuesCtrl",["$scope","$q","ChartFormatterSvc","$filter",function(e,t,i,a){var n,s;return s=e.widget,e.orgDeferred=t.defer(),e.timeRangeDeferred=t.defer(),e.histModeDeferred=t.defer(),e.chartDeferred=t.defer(),n=[e.orgDeferred.promise,e.timeRangeDeferred.promise,e.histModeDeferred.promise,e.chartDeferred.promise],s.initContext=function(){return e.isDataFound=null!=s.content&&null!=s.content.accounting},e.getCurrentPrice=function(){return e.isDataFound?_.last(s.content.accounting.values):void 0},e.getCurrency=function(){return e.isDataFound?s.content.accounting.currency:void 0},e.getLegend=function(){return e.isDataFound?s.content.accounting.legend:void 0},e.drawTrigger=t.defer(),s.format=function(){var t,n,r,o,l,d,c;return e.isDataFound?(r=angular.copy(s.content.accounting),c=null,null!=s.metadata&&null!=s.metadata.hist_parameters&&(c=s.metadata.hist_parameters.period),o=_.map(r.dates,function(e){return a("mnoDate")(e,c)}),l={title:r.type,labels:o,values:r.values},t=!0,angular.forEach(r.values,function(e){return t&&(t=e>=0)}),d={scaleBeginAtZero:t,showXLabels:!1,currency:r.currency},n=i.lineChart([l],d),e.drawTrigger.notify(n)):void 0},e.widgetDeferred.resolve(n)}]),e.directive("widgetAccountsAccountingValues",function(){return{restrict:"A",controller:"WidgetAccountsAccountingValuesCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.accounts-assets-liability-summary",[]),e.controller("WidgetAccountsAssetsLiabilitySummaryCtrl",["$scope","$q","ChartFormatterSvc",function(e,t,i){var a,n;return n=e.widget,e.orgDeferred=t.defer(),e.chartDeferred=t.defer(),e.paramSelectorDeferred=t.defer(),a=[e.orgDeferred.promise,e.chartDeferred.promise,e.paramSelectorDeferred.promise],n.initContext=function(){switch(e.isDataFound=angular.isDefined(n.content)&&!_.isEmpty(n.content.summary),(n.metadata.classification||"asset").toLowerCase()){case"liability":e.classification="Liabilities";break;default:e.classification="Assets"}return e.accountsOptions=[{label:"Assets Accounts",value:"ASSET"},{label:"Liability Accounts",value:"LIABILITY"}],e.selectedAccountsOption||(e.selectedAccountsOption=angular.copy(_.find(e.accountsOptions,{value:n.metadata.classification||"ASSET"}))),e.isDataFound?e.dataSource=n.metadata.organization_ids.length>1?n.content.repartition:n.content.summary:void 0},e.getCurrency=function(){return e.isDataFound?n.content.currency:void 0},e.getAccountColor=function(t){return e.isDataFound?i.getColor(_.indexOf(e.dataSource,t)):void 0},e.drawTrigger=t.defer(),n.format=function(){var t,a,n;return e.isDataFound?(a=_.map(e.dataSource,function(e){return{label:e.label,value:e.total}}),n={percentageInnerCutout:50,tooltipFontSize:12},t=i.pieChart(a,n),e.drawTrigger.notify(t)):void 0},e.widgetDeferred.resolve(a)}]),e.directive("widgetAccountsAssetsLiabilitySummary",function(){return{restrict:"A",controller:"WidgetAccountsAssetsLiabilitySummaryCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.accounts-assets-summary",[]),e.controller("WidgetAccountsAssetsSummaryCtrl",["$scope","$q","ChartFormatterSvc",function(e,t,i){var a,n;return n=e.widget,e.orgDeferred=t.defer(),e.chartDeferred=t.defer(),a=[e.orgDeferred.promise,e.chartDeferred.promise],n.initContext=function(){switch(e.isDataFound=angular.isDefined(n.content)&&!_.isEmpty(n.content.summary),e.isDataFound&&(e.dataSource=n.metadata.organization_ids.length>1?n.content.repartition:n.content.summary),(n.metadata.classification||"assets").toLowerCase()){case"liability":return e.classification="Liabilities";default:return e.classification="Assets"}},e.getCurrency=function(){return e.isDataFound?n.content.currency:void 0},e.getAccountColor=function(t){return e.isDataFound?i.getColor(_.indexOf(e.dataSource,t)):void 0},e.drawTrigger=t.defer(),n.format=function(){var t,a,n;return e.isDataFound?(a=_.map(e.dataSource,function(e){return{label:e.label,value:e.total}}),n={percentageInnerCutout:50,tooltipFontSize:12},t=i.pieChart(a,n),e.drawTrigger.notify(t)):void 0},e.widgetDeferred.resolve(a)}]),e.directive("widgetAccountsAssetsSummary",function(){return{restrict:"A",controller:"WidgetAccountsAssetsSummaryCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.accounts-assets-vs-liabilities",[]),e.controller("WidgetAccountsAssetsVsLiabilitiesCtrl",["$scope","$q","ChartFormatterSvc","$filter",function(e,t,i){var a,n;return n=e.widget,e.orgDeferred=t.defer(),e.chartDeferred=t.defer(),a=[e.orgDeferred.promise,e.chartDeferred.promise],n.initContext=function(){var t;return e.isDataFound=null!=n.content&&!_.isEmpty(n.content.summary)&&!_.isEmpty(n.content.companies),e.isDataFound?(t=0,e.companiesList=_.map(n.content.companies,function(e){var i,a,s;return i=_.find(n.content.summary,function(e){return"ASSET"===e.classification}),a=_.find(n.content.summary,function(e){return"LIABILITY"===e.classification}),s={company:e,assets:null!=i?i.totals[t]:0,liabilities:null!=a?a.totals[t]:0,currency:n.content.currency},t++,s})):void 0},e.assetsColor=i.getColor(0),e.liabilitiesColor=i.getColor(1),e.drawTrigger=t.defer(),n.format=function(){var t,a,s,r;return e.isDataFound?(a=_.map(n.content.summary,function(e){return _.includes(["ASSET","LIABILITY"],e.classification)?{title:e.classification,values:e.totals}:void 0}),a=_.sortByOrder(a,["title"]),s={labels:n.content.companies,datasets:_.compact(a)},r={showTooltips:!1,showXLabels:!1,barValueSpacing:Math.max(8-n.content.companies.length,1)},t=i.combinedBarChart(s,r),e.drawTrigger.notify(t)):void 0},e.widgetDeferred.resolve(a)}]),e.directive("widgetAccountsAssetsVsLiabilities",function(){return{restrict:"A",controller:"WidgetAccountsAssetsVsLiabilitiesCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.accounts-balance",[]),e.controller("WidgetAccountsBalanceCtrl",["$scope","$q","ChartFormatterSvc","$filter",function(e,t,i,a){var n,s;return s=e.widget,e.orgDeferred=t.defer(),e.accountBackDeferred=t.defer(),e.accountFrontDeferred=t.defer(),e.timeRangeDeferred=t.defer(),e.histModeDeferred=t.defer(),e.chartDeferred=t.defer(),n=[e.orgDeferred.promise,e.accountBackDeferred,e.accountFrontDeferred,e.timeRangeDeferred.promise,e.histModeDeferred.promise,e.chartDeferred.promise],e.isDataFound=!0,s.initContext=function(){return e.isDataFound=null!=s.content&&!_.isEmpty(s.content.account_list)},e.getName=function(){return null!=s.selectedAccount?s.selectedAccount.name:void 0},e.getCurrentBalance=function(){return null!=s.selectedAccount?s.selectedAccount.current_balance:void 0},e.getCurrency=function(){return null!=s.selectedAccount?s.selectedAccount.currency:void 0},e.displayAccount=function(){return e.updateSettings(!1),s.format()},e.drawTrigger=t.defer(),s.format=function(){var t,n,r,o,l,d,c;return e.isDataFound&&null!=s.selectedAccount?(r=angular.copy(s.selectedAccount),c=null,null!=s.metadata&&null!=s.metadata.hist_parameters&&(c=s.metadata.hist_parameters.period),o=_.map(s.content.dates,function(e){return a("mnoDate")(e,c)}),l={title:r.name,labels:o,values:r.balances},t=!0,angular.forEach(r.balances,function(e){return t&&(t=e>=0)}),d={scaleBeginAtZero:t,showXLabels:!1},n=i.lineChart([l],d),e.drawTrigger.notify(n)):void 0},e.widgetDeferred.resolve(n)}]),e.directive("widgetAccountsBalance",function(){return{restrict:"A",controller:"WidgetAccountsBalanceCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.accounts-balance-sheet",[]),e.controller("WidgetAccountsBalanceSheetCtrl",["$scope","$q","ImpacWidgetsSvc",function(e,t,i){var a,n,s;return s=e.widget,e.orgDeferred=t.defer(),e.paramSelectorFrontDeferred=t.defer(),e.paramSelectorBackDeferred=t.defer(),a=[e.orgDeferred.promise,e.paramSelectorFrontDeferred.promise,e.paramSelectorBackDeferred.promise],e.periodOptions=[{label:"Year",value:"YEARLY"},{label:"Quarter",value:"QUARTERLY"},{label:"Month",value:"MONTHLY"},{label:"Week",value:"WEEKLY"},{label:"Day",value:"DAILY"}],e.period=angular.copy(e.periodOptions[2]),s.initContext=function(){return null!=s.content&&null!=s.content.period&&_.contains(_.pluck(e.periodOptions,"value"),s.content.period)&&(e.period=angular.copy(_.find(e.periodOptions,function(e){return e.value===s.content.period}))),(e.isDataFound=angular.isDefined(s.content)&&!_.isEmpty(s.content.summary)&&!_.isEmpty(s.content.dates))?(e.dates=s.content.dates,e.unCollapsed=s.metadata.unCollapsed||[],e.categories=Object.keys(s.content.summary)):void 0},e.toggleCollapsed=function(t){return null!=t?(_.find(e.unCollapsed,function(e){return t===e})?e.unCollapsed=_.reject(e.unCollapsed,function(e){return e===t}):e.unCollapsed.push(t),i.updateWidgetSettings(s,!1)):void 0},e.isCollapsed=function(t){return null!=t?_.find(e.unCollapsed,function(e){return t===e})?!1:!0:void 0},n={},n.initialized=!1,n.initialize=function(){return n.initialized=!0},n.toMetadata=function(){return{unCollapsed:e.unCollapsed}},s.settings.push(n),e.widgetDeferred.resolve(a)}]),e.directive("widgetAccountsBalanceSheet",function(){return{restrict:"A",controller:"WidgetAccountsBalanceSheetCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.accounts-cash-summary",[]),e.controller("WidgetAccountsCashSummaryCtrl",["$scope","$q","ChartFormatterSvc","$filter","ImpacWidgetsSvc",function(e,t,i,a,n){var s,r,o,l;return l=e.widget,e.orgDeferred=t.defer(),e.timeRangeDeferred=t.defer(),e.widthDeferred=t.defer(),e.chartDeferred=t.defer(),r=[e.orgDeferred.promise,e.timeRangeDeferred.promise,e.widthDeferred.promise,e.chartDeferred.promise],l.initContext=function(){return(e.isDataFound=angular.isDefined(l.content)&&!_.isEmpty(l.content.summary)&&!_.isEmpty(l.content.dates))&&(e.dates=l.content.dates,e.unCollapsed=l.metadata.unCollapsed||[],l.metadata.selectedElement&&(e.selectedElement=_.find(l.content.summary,function(e){return e.name===l.metadata.selectedElement.name}),!e.selectedElement))?angular.forEach(l.content.summary,function(t){return null!=t.accounts?e.selectedElement||(e.selectedElement=_.find(t.accounts,function(e){return e.id===l.metadata.selectedElement.id})):void 0}):void 0},e.getLastDate=function(){return null!=e.dates?e.dates[e.dates.length-1]:void 0},e.getPrevDate=function(){return null!=e.dates?e.dates[e.dates.length-2]:void 0},e.getLastValue=function(e){return null!=e.cash_flows?_.last(e.cash_flows):void 0},e.formatVariance=function(e){return null!=e?e>0?"+"+e+" %":e+" %":"-"},e.getLastVariance=function(t){return null!=t.variances&&null!=_.last(t.variances)?e.formatVariance(_.last(t.variances)):"-"},e.getVarianceClassColor=function(e){return parseInt(e)>0?"positive":parseInt(e)<0?"negative":null},e.getName=function(e){return null!=e&&null!=e.name?e.name.replace(/_/g," "):void 0},e.toggleSelectedElement=function(t){return e.isSelected(t)?(e.selectedElement=null,l.isExpanded()?l.toggleExpanded():n.updateWidgetSettings(l,!1)):(e.selectedElement=angular.copy(t),l.format(),l.isExpanded()?n.updateWidgetSettings(l,!1):l.toggleExpanded())},e.isSelected=function(t){return null!=t&&null!=e.selectedElement?null!=t.id&&e.selectedElement.id&&t.id===e.selectedElement.id||t.name===e.selectedElement.name?!0:!1:!1},e.toggleCollapsed=function(t){return null!=t&&null!=t.name?(_.find(e.unCollapsed,function(e){return t.name===e})?e.unCollapsed=_.reject(e.unCollapsed,function(e){return e===t.name}):e.unCollapsed.push(t.name),n.updateWidgetSettings(l,!1)):void 0},e.isCollapsed=function(t){return null!=t&&null!=t.name?_.find(e.unCollapsed,function(e){return t.name===e})?!1:!0:void 0},e.drawTrigger=t.defer(),l.format=function(){var t,n,s,r,o,d,c;return e.isDataFound&&null!=e.selectedElement?(s=angular.copy(e.selectedElement),c=null,null!=l.metadata&&null!=l.metadata.hist_parameters&&(c=l.metadata.hist_parameters.period),r=_.map(l.content.dates,function(e){return a("mnoDate")(e,c)}),o={labels:r,datasets:[{title:s.name,values:s.cash_flows}]},t=!0,angular.forEach(s.cash_flows,function(e){return t&&(t=e>=0)}),d={scaleBeginAtZero:t,showXLabels:!0},n=i.combinedBarChart(o,d),e.drawTrigger.notify(n)):void 0},o={},o.initialized=!1,o.initialize=function(){return o.initialized=!0},o.toMetadata=function(){return{unCollapsed:e.unCollapsed}},l.settings.push(o),s={},s.initialized=!1,s.initialize=function(){return s.initialized=!0},s.toMetadata=function(){return{selectedElement:e.selectedElement}},l.settings.push(s),e.widgetDeferred.resolve(r)}]),e.directive("widgetAccountsCashSummary",function(){return{restrict:"A",controller:"WidgetAccountsCashSummaryCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.accounts-class-comparison",[]),e.controller("WidgetAccountsClassComparisonCtrl",["$scope","$q","$filter","ChartFormatterSvc",function(e,t,i,a){var n,s;return s=e.widget,e.orgDeferred=t.defer(),e.chartDeferred=t.defer(),e.paramSelectorDeferred=t.defer(),n=[e.orgDeferred.promise,e.chartDeferred.promise,e.paramSelectorDeferred.promise],s.initContext=function(){return e.isDataFound=angular.isDefined(s.content)&&!_.isEmpty(s.content.summary)&&!_.isEmpty(s.content.companies),e.isDataFound&&(e.classifications=_.map(s.content.summary,function(e){var t;
return t=e.classification,{label:_.capitalize(t.toLowerCase()),value:t}}),!e.selectedClassification)?e.selectedClassification=angular.copy(_.find(e.classifications,{value:s.metadata.classification||e.classifications[0].value})):void 0},e.getTotals=function(){var t;return t=_.find(s.content.summary,function(t){return t.classification===e.selectedClassification.value}).totals},e.getAmount=function(t){var a;return a=e.getTotals()[t],i("mnoCurrency")(a,s.content.currency)},e.getAccountColor=function(e){return a.getColor(_.indexOf(s.content.companies,e))},e.drawTrigger=t.defer(),s.format=function(){var t,i,n;return e.isDataFound?(i={},i.labels=s.content.companies,i.values=e.getTotals(),i.labels.length>15&&(i.labels.length=15),i.values.length>15&&(i.values.length=15),n={showTooltips:!1,showXLabels:!1,barValueSpacing:Math.max(8-s.content.companies.length,1)},t=a.barChart(i,n),e.drawTrigger.notify(t)):void 0},e.widgetDeferred.resolve(n)}]),e.directive("widgetAccountsClassComparison",function(){return{restrict:"A",controller:"WidgetAccountsClassComparisonCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.accounts-comparison",[]),e.controller("WidgetAccountsComparisonCtrl",["$scope","$q","ChartFormatterSvc","$filter",function(e,t,i,a){var n,s,r;return r=e.widget,e.orgDeferred=t.defer(),e.accountsListDeferred=t.defer(),e.chartDeferred=t.defer(),e.paramsCheckboxesDeferred=t.defer(),s=[e.orgDeferred.promise,e.accountsListDeferred.promise,e.chartDeferred.promise,e.paramsCheckboxesDeferred.promise],r.initContext=function(){return e.movedAccount={},e.comparisonModeOptions=[{id:"compare_accounts",label:"Compare matching accounts across your companies",value:!1,onChangeCallback:e.updateSettings}],angular.isDefined(r.metadata.comparison_mode)&&null!=r.metadata.organization_ids&&r.metadata.organization_ids.length>1&&angular.merge(e.comparisonModeOptions,r.metadata.comparison_mode),e.isDataFound=null!=r.content&&!_.isEmpty(r.content.complete_list)||e.isComparisonMode(),e.noComparableAccounts=e.isComparisonMode()&&null!=r.content&&_.isEmpty(r.content.complete_list),e.canSelectComparisonMode=n()},n=function(){return null==r.content?!1:_.uniq(_.pluck(r.content.complete_list,"org_name")).length>1},e.isComparisonMode=function(){return _.result(_.find(e.comparisonModeOptions,"id","compare_accounts"),"value")||!1},e.hasAccountsSelected=function(){return r.selectedAccounts&&r.selectedAccounts.length>0},e.getAccountColor=function(t){return e.isComparisonMode()?i.getColor(_.indexOf(r.selectedAccounts[0].accounts,t)):i.getColor(_.indexOf(r.selectedAccounts,t))},e.addAccount=function(e){return r.moveAccountToAnotherList(e,r.remainingAccounts,r.selectedAccounts),r.format()},e.removeAccount=function(e){return r.moveAccountToAnotherList(e,r.selectedAccounts,r.remainingAccounts),r.format()},e.formatAmount=function(e){return a("mnoCurrency")(e.current_balance,e.currency)},e.drawTrigger=t.defer(),r.format=function(){var t,a,n;for(a={labels:[],values:[]},_.forEach(r.selectedAccounts,function(t){return e.isComparisonMode()?_.forEach(t.accounts,function(e){return a.labels.push(e.name),a.values.push(e.current_balance)}):(a.labels.push(t.name),a.values.push(t.current_balance))});a.values.length<15;)a.labels.push(""),a.values.push(null);return n={showTooltips:!1,showXLabels:!1,barDatasetSpacing:9},t=i.barChart(a,n),e.drawTrigger.notify(t)},e.widgetDeferred.resolve(s)}]),e.directive("widgetAccountsComparison",function(){return{restrict:"A",controller:"WidgetAccountsComparisonCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.accounts-custom-calculation",[]),e.controller("WidgetAccountsCustomCalculationCtrl",["$scope","$timeout","$modal","$q","$templateCache","ImpacWidgetsSvc",function(e,t,i,a,n,s){var r,o;return o=e.widget,e.orgDeferred=a.defer(),e.accountsListDeferred=a.defer(),e.formulaDeferred=a.defer(),r=[e.orgDeferred.promise,e.accountsListDeferred.promise,e.formulaDeferred.promise],o.initContext=function(){return e.movedAccount={},e.isDataFound=null!=o.content&&!_.isEmpty(o.content.complete_list)},e.addAccountToFormula=function(e){return null!=e?(o.selectedAccounts.length>0?o.formula+=" + {"+(o.selectedAccounts.length+1)+"}":o.formula="{1}",o.moveAccountToAnotherList(e,o.remainingAccounts,o.selectedAccounts,!1)):void 0},e.removeAccountFromFormula=function(e){var t,i,a,n,s,r,l,d;for(l=_.map(o.selectedAccounts,function(e){return e.uid}),r=_.reject(l,function(t){return t===e.uid}),i=_.first(_.difference(l,r)),t=_.indexOf(l,i)+1,d=1===t?"{"+t+"\\}\\s*(-|\\*|\\/|\\+)*\\s*":"\\s*(-|\\*|\\/|\\+)*\\s*\\{"+t+"\\}",s=angular.copy(o.formula).replace(new RegExp(d,"g"),""),a=t+1;a<=l.length;)n="\\{"+a+"\\}",s=s.replace(new RegExp(n,"g"),"{"+(a-1)+"}"),a++;return o.formula=angular.copy(s),o.moveAccountToAnotherList(e,o.selectedAccounts,o.remainingAccounts,!1)},e.formulaModal=e.$new(),e.formulaModal.config={backdrop:"static",template:n.get("widgets/accounts-custom-calculation/formula.modal.html"),size:"lg",scope:e.formulaModal,keyboard:!1},e.formulaModal.open=function(){var t;return t=e.formulaModal,t.modalOrgDeferred=a.defer(),_.remove(o.settings,function(e){return"organizations"===e.key}),t.instance=i.open(t.config),t.modalOrgDeferred.promise.then(function(){return e.initSettings()})},e.$watch(function(){return o.selectedOrganizations},function(e){return _.isEmpty(e)?void 0:s.updateWidgetSettings(o)},!0),e.formulaModal.cancel=function(){return e.initSettings(),e.formulaModal.close()},e.formulaModal.proceed=function(){return s.updateWidgetSettings(o,!1),e.formulaModal.close()},e.formulaModal.close=function(){return e.formulaModal.instance.close()},e.$watch(function(){return o.isEditMode},function(t,i){return t&&!i?e.formulaModal.open():void 0}),e.widgetDeferred.resolve(r)}]),e.directive("widgetAccountsCustomCalculation",function(){return{restrict:"A",controller:"WidgetAccountsCustomCalculationCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.accounts-detailed-classifications",[]),e.controller("WidgetAccountsDetailedClassificationsCtrl",["$scope","$q","ImpacWidgetsSvc",function(e,t,i){var a,n,s;return s=e.widget,e.orgDeferred=t.defer(),a=[e.orgDeferred.promise],s.initContext=function(){return e.isDataFound=angular.isDefined(s.content)&&!_.isEmpty(s.content.companies),e.isDataFound?(e.unCollapsed=s.metadata.unCollapsed||[],1===s.content.companies.length?(e.multiEntity=!1,e.dataSource=_.map(s.content.companies[0].classifications,function(e){return{label:e.name,value:e.total,currency:e.currency,entries:_.map(e.accounts,function(e){return{label:e.name,value:e.balance,currency:e.currency}})}})):(e.multiEntity=!0,e.dataSource=_.map(s.content.companies,function(e){return{label:e.name,entries:_.map(e.classifications,function(e){return{label:e.name,value:e.total,currency:e.currency}})}}))):void 0},e.toggleCollapsed=function(t){return null!=t?(_.find(e.unCollapsed,function(e){return t===e})?e.unCollapsed=_.reject(e.unCollapsed,function(e){return e===t}):e.unCollapsed.push(t),i.updateWidgetSettings(s,!1)):void 0},e.isCollapsed=function(t){return null!=t?_.find(e.unCollapsed,function(e){return t===e})?!1:!0:void 0},n={},n.initialized=!1,n.initialize=function(){return n.initialized=!0},n.toMetadata=function(){return{unCollapsed:e.unCollapsed}},s.settings.push(n),e.widgetDeferred.resolve(a)}]),e.directive("widgetAccountsDetailedClassifications",function(){return{restrict:"A",controller:"WidgetAccountsDetailedClassificationsCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.accounts-expense-weight",[]),e.controller("WidgetAccountsExpenseWeightCtrl",["$scope","$q","ChartFormatterSvc",function(e,t,i){var a,n;return n=e.widget,e.orgDeferred=t.defer(),e.accountBackDeferred=t.defer(),e.accountFrontDeferred=t.defer(),e.chartDeferred=t.defer(),a=[e.orgDeferred.promise,e.accountBackDeferred,e.accountFrontDeferred,e.chartDeferred.promise],n.initContext=function(){return e.isDataFound=null!=n.content&&!_.isEmpty(n.content.account_list)},e.getName=function(){return null!=n.selectedAccount?n.selectedAccount.name:void 0},e.getComparator=function(){switch(n.metadata.comparator){case"turnover":return"turnover";default:return"total expenses"}},e.drawTrigger=t.defer(),n.format=function(){var t,a,s,r,o;return e.isDataFound&&null!=n.content.summary?(a=_.map(n.content.summary,function(e){return e.company}),o=_.map(n.content.summary,function(e){return e.ratio}),1===a.length&&(a.push(a[0]),o.push(o[0])),s={labels:a,values:o},r={scales:{yAxes:[{ticks:{suggestedMin:0,suggestedMax:100,maxTicksLimit:5}}]},showXLabels:!1,pointDot:!1,currency:"%"},t=i.lineChart([s],r),e.drawTrigger.notify(t)):void 0},e.widgetDeferred.resolve(a)}]),e.directive("widgetAccountsExpenseWeight",function(){return{restrict:"A",controller:"WidgetAccountsExpenseWeightCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.accounts-expenses-revenue",[]),e.controller("WidgetAccountsExpensesRevenueCtrl",["$scope","$q","ChartFormatterSvc","$filter",function(e,t,i,a){var n,s;return s=e.widget,e.orgDeferred=t.defer(),e.timeRangeDeferred=t.defer(),e.histModeDeferred=t.defer(),e.chartDeferred=t.defer(),e.paramsCheckboxesDeferred=t.defer(),n=[e.orgDeferred.promise,e.timeRangeDeferred.promise,e.histModeDeferred.promise,e.chartDeferred.promise,e.paramsCheckboxesDeferred.promise],s.initContext=function(){return e.isDataFound=null!=s.content&&null!=s.content.values,e.displayOptions=[{id:"show_net_profit",label:"Show net profit",value:!1,onChangeCallback:e.toggleDisplayNetProfit}],angular.isDefined(null!=s.metadata&&null!=s.metadata.display)&&angular.merge(e.displayOptions,s.metadata.display),e.isNetProfitDisplayed=!!e.displayOptions[0].value},e.getCurrentRevenue=function(){return e.isDataFound?_.last(s.content.values.revenue):void 0},e.getCurrentExpenses=function(){return e.isDataFound?_.last(s.content.values.expenses):void 0},e.getCurrency=function(){return e.isDataFound?s.content.currency:void 0},e.toggleDisplayNetProfit=function(){return e.isNetProfitDisplayed=!!e.displayOptions[0].value,e.updateSettings(!1),s.format()},e.drawTrigger=t.defer(),s.format=function(){var t,n,r,o,l,d,c,u;return e.isDataFound?(s.isHistoryMode?(d=null,null!=s.metadata&&null!=s.metadata.hist_parameters&&(d=s.metadata.hist_parameters.period),r=_.map(s.content.dates,function(e){return a("mnoDate")(e,d)}),e.isNetProfitDisplayed?(o=[{title:"Net Profit ("+e.getCurrency()+")",labels:r,values:s.content.values.net_profit}],t=!0,angular.forEach(s.content.values.net_profit,function(e){return t&&(t=e>=0)})):(o=[{title:"Expenses ("+e.getCurrency()+")",labels:r,values:s.content.values.expenses},{title:"Revenue ("+e.getCurrency()+")",labels:r,values:s.content.values.revenue}],t=!0,angular.forEach(s.content.values.expenses,function(e){return t&&(t=e>=0)}),angular.forEach(s.content.values.revenue,function(e){return t&&(t=e>=0)})),l={scaleBeginAtZero:t,showXLabels:!1},n=i.lineChart(o,l,!0)):(c=[{label:"Expenses ("+e.getCurrency()+")",value:e.getCurrentExpenses()},{label:"Revenue ("+e.getCurrency()+")",value:e.getCurrentRevenue()}],u={tooltipFontSize:12,percentageInnerCutout:0},n=i.pieChart(c,u,!0)),e.drawTrigger.notify(n)):void 0},e.widgetDeferred.resolve(n)}]),e.directive("widgetAccountsExpensesRevenue",function(){return{restrict:"A",controller:"WidgetAccountsExpensesRevenueCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.accounts-payable-receivable",[]),e.controller("WidgetAccountsPayableReceivableCtrl",["$scope","$q","ChartFormatterSvc","$filter",function(e,t,i,a){var n,s;return s=e.widget,e.orgDeferred=t.defer(),e.timeRangeDeferred=t.defer(),e.histModeDeferred=t.defer(),e.chartDeferred=t.defer(),n=[e.orgDeferred.promise,e.timeRangeDeferred.promise,e.histModeDeferred.promise,e.chartDeferred.promise],s.initContext=function(){return e.isDataFound=null!=s.content&&null!=s.content.values},e.getCurrentPayable=function(){return e.isDataFound?_.last(s.content.values.payables):void 0},e.getCurrentReceivable=function(){return e.isDataFound?_.last(s.content.values.receivables):void 0},e.getCurrency=function(){return e.isDataFound?s.content.currency:void 0},e.drawTrigger=t.defer(),s.format=function(){var t,n,r,o,l,d,c,u,g,h,p,m,f;if(e.isDataFound){for(h=null,null!=s.metadata&&null!=s.metadata.hist_parameters&&(h=s.metadata.hist_parameters.period),r=_.map(s.content.dates,function(e){return a("mnoDate")(e,h)}),u=[{title:"Payable",labels:r,values:s.content.values.payables},{title:"Receivable",labels:r,values:s.content.values.receivables}],t=!0,p=s.content.values.payables,o=0,d=p.length;d>o;o++)f=p[o],t&&(t=f>=0);for(m=s.content.values.receivables,l=0,c=m.length;c>l;l++)f=m[l],t&&(t=f>=0);return g={scaleBeginAtZero:t,showXLabels:!1},n=i.lineChart(u,g,!0),e.drawTrigger.notify(n)}},e.widgetDeferred.resolve(n)}]),e.directive("widgetAccountsPayableReceivable",function(){return{restrict:"A",controller:"WidgetAccountsPayableReceivableCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.accounts-profit-and-loss",[]),e.controller("WidgetAccountsProfitAndLossCtrl",["$scope","$q","ChartFormatterSvc","$filter","ImpacWidgetsSvc",function(e,t,i,a,n){var s,r,o,l;return l=e.widget,e.orgDeferred=t.defer(),e.timeRangeDeferred=t.defer(),e.widthDeferred=t.defer(),e.chartDeferred=t.defer(),r=[e.orgDeferred.promise,e.timeRangeDeferred.promise,e.widthDeferred.promise,e.chartDeferred.promise],l.initContext=function(){return!(e.isDataFound=angular.isDefined(l.content)&&!_.isEmpty(l.content.summary)&&!_.isEmpty(l.content.dates))||(e.dates=l.content.dates,e.unCollapsed=l.metadata.unCollapsed||[],l.metadata.selectedElements&&(e.selectedElements=[],angular.forEach(l.metadata.selectedElements,function(t){var i;return i=_.find(l.content.summary,function(e){return e.name===t.name}),i||angular.forEach(l.content.summary,function(e){return null!=e.accounts?i||(i=_.find(e.accounts,function(e){return t.id===e.id})):void 0}),i?e.selectedElements.push(i):void 0})),null!=e.selectedElements&&e.selectedElements.length>0)?void 0:l.width=6},e.getElementChartColor=function(e){return i.getColor(e)},e.getLastDate=function(){return null!=e.dates?e.dates[e.dates.length-1]:void 0},e.getPrevDate=function(){return null!=e.dates?e.dates[e.dates.length-2]:void 0},e.getLastValue=function(e){return null!=e.totals?_.last(e.totals):void 0},e.getPeriod=function(){var e;switch(e="MONTHLY",null!=l.metadata&&null!=l.metadata.hist_parameters&&null!=l.metadata.hist_parameters.period&&(e=l.metadata.hist_parameters.period),e.toUpperCase()){case"DAILY":return"day";default:return e.toLowerCase().replace("ly","")}},e.getClassColor=function(e){return parseInt(e)>0?"positive":parseInt(e)<0?"negative":null},e.getName=function(e){return null!=e&&null!=e.name?e.name.replace(/_/g," "):void 0},e.toggleSelectedElement=function(t){return e.isSelected(t)?(e.selectedElements=_.reject(e.selectedElements,function(e){return t.id?e.id===t.id:e.name===t.name}),l.format(),l.isExpanded()&&0===e.selectedElements.length?l.toggleExpanded():n.updateWidgetSettings(l,!1)):(e.selectedElements||(e.selectedElements=[]),e.selectedElements.push(t),l.format(),l.isExpanded()?n.updateWidgetSettings(l,!1):l.toggleExpanded())},e.isSelected=function(t){return null!=t&&null!=e.selectedElements?_.find(e.selectedElements,function(e){return t.id?e.id===t.id:e.name===t.name})?!0:!1:!1},e.toggleCollapsed=function(t){return null!=t&&null!=t.name?(_.find(e.unCollapsed,function(e){return t.name===e})?e.unCollapsed=_.reject(e.unCollapsed,function(e){return e===t.name}):e.unCollapsed.push(t.name),n.updateWidgetSettings(l,!1)):void 0},e.isCollapsed=function(t){return null!=t&&null!=t.name?_.find(e.unCollapsed,function(e){return t.name===e})?!1:!0:void 0},e.hasElements=function(){return null!=e.selectedElements&&e.selectedElements.length>0},e.drawTrigger=t.defer(),l.format=function(){var t,n,s,r;return e.isDataFound&&null!=e.selectedElements&&e.selectedElements.length>0?(t=!0,s=[],angular.forEach(e.selectedElements,function(e){var i,n,r;return i=angular.copy(e),r=null,null!=l.metadata&&null!=l.metadata.hist_parameters&&(r=l.metadata.hist_parameters.period),n=_.map(l.content.dates,function(e){return a("mnoDate")(e,r)}),s.push({title:i.name,labels:n,values:i.totals}),angular.forEach(i.totals,function(e){return t&&(t=e>=0)})}),r={scaleBeginAtZero:t,showXLabels:!0,datasetFill:1===e.selectedElements.length,pointDot:1===e.selectedElements.length},n=i.lineChart(s,r),e.drawTrigger.notify(n)):void 0},o={},o.initialized=!1,o.initialize=function(){return o.initialized=!0},o.toMetadata=function(){return{unCollapsed:e.unCollapsed}},l.settings.push(o),s={},s.initialized=!1,s.initialize=function(){return s.initialized=!0},s.toMetadata=function(){return{selectedElements:e.selectedElements}},l.settings.push(s),e.widgetDeferred.resolve(r)}]),e.directive("widgetAccountsProfitAndLoss",function(){return{restrict:"A",controller:"WidgetAccountsProfitAndLossCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.hr-employee-details",[]),e.controller("WidgetHrEmployeeDetailsCtrl",["$scope","$q","$filter",function(e,t,i){var a,n;return n=e.widget,e.orgDeferred=t.defer(),e.widthDeferred=t.defer(),e.paramSelectorDeferred1=t.defer(),e.paramSelectorDeferred2=t.defer(),a=[e.orgDeferred.promise,e.widthDeferred.promise,e.paramSelectorDeferred1.promise,e.paramSelectorDeferred2.promise],n.initContext=function(){return(e.isDataFound=!_.isEmpty(n.content)&&!_.isEmpty(n.content.employees))?(e.periodOptions=[{label:"Yearly",value:"yearly"},{label:"Monthly",value:"monthly"},{label:"Weekly",value:"weekly"},{label:"Hourly",value:"hourly"}],e.period=n.metadata&&n.metadata.period?angular.copy(_.find(e.periodOptions,function(e){return e.value===n.metadata.period.toLowerCase()})||e.periodOptions[0]):angular.copy(e.periodOptions[0]),e.employeesOptions=_.map(n.content.employees,function(e){return{value:e.uid,label:e.lastname+" "+e.firstname}}),e.selectedEmployee={value:e.getEmployee().uid,label:e.getEmployee().lastname+" "+e.getEmployee().firstname}):void 0},e.getSingleCompanyName=function(){var t,i;return n.content&&n.content.organizations&&(i=n.content.organizations[0],t=_.find(e.parentDashboard.data_sources,function(e){return e.uid===i}),null!=t)?t.label:void 0},e.getEmployee=function(){var t;return e.isDataFound?(t=n.metadata&&n.metadata.employee_uid?angular.copy(_.find(n.content.employees,function(e){return e.uid===n.metadata.employee_uid})||n.content.employees[0]):angular.copy(n.content.employees[0]),t.salary&&(t.salary=i("mnoCurrency")(t.salary.amount,t.salary.currency)),t):!1},e.formatAddress=function(e){return angular.isDefined(e)?e.replace(/, /g,",\n"):void 0},e.widgetDeferred.resolve(a)}]),e.directive("widgetHrEmployeeDetails",function(){return{restrict:"A",controller:"WidgetHrEmployeeDetailsCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.hr-employees-list",[]),e.controller("WidgetHrEmployeesListCtrl",["$scope","$q","$filter",function(e,t,i){var a,n;return n=e.widget,e.orgDeferred=t.defer(),e.paramSelectorDeferred=t.defer(),a=[e.orgDeferred.promise,e.paramSelectorDeferred.promise],n.initContext=function(){return(e.isDataFound=!_.isEmpty(n.content)&&!_.isEmpty(n.content.total)&&!_.isEmpty(n.content.employees))?(e.periodOptions=[{label:"Yearly",value:"yearly"},{label:"Monthly",value:"monthly"},{label:"Weekly",value:"weekly"},{label:"Hourly",value:"hourly"}],e.period=angular.copy(_.find(e.periodOptions,function(e){return e.value===n.content.total.period.toLowerCase()})||e.periodOptions[0])):void 0},e.getSingleCompanyName=function(){var t,i;return n.content&&n.content.organizations?(i=n.content.organizations[0],t=_.find(e.parentDashboard.data_sources,function(e){return e.uid===i}),t.label):void 0},e.getEmployeeSalary=function(e){return null!=e.salary?i("mnoCurrency")(e.salary.amount,n.content.total.currency):"-"},e.widgetDeferred.resolve(a)}]),e.directive("widgetHrEmployeesList",function(){return{restrict:"A",controller:"WidgetHrEmployeesListCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.hr-leaves-balance",[]),e.controller("WidgetHrLeavesBalanceCtrl",["$scope","$q",function(e,t){var i,a;return a=e.widget,e.orgDeferred=t.defer(),e.paramSelectorDeferred=t.defer(),i=[e.orgDeferred.promise,e.paramSelectorDeferred.promise],a.initContext=function(){return(e.isDataFound=!_.isEmpty(a.content)&&!_.isEmpty(a.content.employees))?(e.employeesOptions=_.map(a.content.employees,function(e){return{value:e.uid,label:e.lastname+" "+e.firstname}}),e.selectedEmployee={value:e.getEmployee().uid,label:e.getEmployee().lastname+" "+e.getEmployee().firstname}):void 0},e.getEmployee=function(){var t;return e.isDataFound?(t=a.content.employees[0],a.metadata&&a.metadata.employee_id&&(t=_.find(a.content.employees,function(e){return e.uid===a.metadata.employee_id})||a.content.employees[0]),angular.copy(t)):!1},e.widgetDeferred.resolve(i)}]),e.directive("widgetHrLeavesBalance",function(){return{restrict:"A",controller:"WidgetHrLeavesBalanceCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.hr-leaves-schedule",[]),e.controller("WidgetHrLeavesScheduleCtrl",["$scope","$q","ChartFormatterSvc",function(e,t){var i,a;return a=e.widget,e.orgDeferred=t.defer(),i=[e.orgDeferred.promise],a.initContext=function(){var t;return(e.isDataFound=angular.isDefined(a.content)&&!_.isEmpty(a.content.summary))?(t=[],angular.forEach(a.content.summary,function(e){return t.push({title:e.employee_name+" - "+e.title,start:e.start_date,end:e.end_date})}),e.eventSources=angular.copy(t)):void 0},e.widgetDeferred.resolve(i)}]),e.directive("widgetHrLeavesSchedule",function(){return{restrict:"A",controller:"WidgetHrLeavesScheduleCtrl"}}),e.directive("widgetComponentCalendar",function(){return{scope:{events:"=ngModel"},restrict:"A",link:function(e,t){var i,a;return e.eventSources=[],i={header:{left:"prev",center:"title",right:"next"},contentHeight:204},a=function(){return e.events},e.$watch(a,function(a){return a.length>0?(t.fullCalendar("destroy"),angular.extend(i,{events:e.events}),t.fullCalendar(i)):void 0},!0)}}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.hr-payroll-summary",[]),e.controller("WidgetHrPayrollSummaryCtrl",["$scope","$q","ChartFormatterSvc","$filter","ImpacWidgetsSvc",function(e,t,i,a,n){var s,r,o,l;return l=e.widget,e.orgDeferred=t.defer(),e.timeRangeDeferred=t.defer(),e.widthDeferred=t.defer(),e.histModeDeferred=t.defer(),e.chartDeferred=t.defer(),r=[e.orgDeferred.promise,e.timeRangeDeferred.promise,e.widthDeferred.promise,e.histModeDeferred.promise,e.chartDeferred.promise],l.initContext=function(){return!(e.isDataFound=angular.isDefined(l.content)&&!_.isEmpty(l.content.summary)&&!_.isEmpty(l.content.dates))||(e.unCollapsed=l.metadata.unCollapsed||[],l.metadata.selectedElements&&(e.selectedElements=[],angular.forEach(l.metadata.selectedElements,function(t){var i;return i=_.find(l.content.summary,function(e){return e.name===t.name}),i||angular.forEach(l.content.summary,function(e){return null!=e.employees?i||(i=_.find(e.employees,function(e){return t.id===e.id})):void 0}),i?e.selectedElements.push(i):void 0})),null!=e.selectedElements&&e.selectedElements.length>0)?void 0:l.width=6},e.getElementChartColor=function(e){return i.getColor(e)},e.getLastValue=function(e){return null!=e.totals?e.totals[e.totals.length-2]:void 0},e.getTotalSum=function(e){return null!=e.totals?_.reduce(e.totals,function(e,t){return e+t},0):void 0},e.getName=function(e){return null!=e&&null!=e.name?"total_leaves"===e.name?"Total Leaves Accruals":"total_super"===e.name?"Total Superannuation Accruals":"total_reimbursement"===e.name?"Total Reimbursements":"total_tax"===e.name?"Total Taxes":"total_timeoff"===e.name?"Total Time Off":e.name.replace(/_/g," "):void 0},e.getTrackedField=function(){var t,i;return _.isEmpty(e.selectedElements)||null==e.selectedElements[0].id?void 0:(i=e.selectedElements[0].id.split("-")[0],t=!0,angular.forEach(e.selectedElements,function(e){return t&&(t=e.id&&i===e.id.split("-")[0])}),t?e.getName({name:i}):null)},e.formatDate=function(e){if(null==l.content.hist_parameters)return a("date")(e,"MMM");switch(l.content.hist_parameters.period){case"DAILY":return a("date")(e,"dd-MMM");case"WEEKLY":return a("date")(e,"dd-MMM");case"MONTHLY":return a("date")(e,"MMM");case"QUARTERLY":return a("date")(e,"MMM-yy");case"YEARLY":return a("date")(e,"yyyy");default:return a("date")(e,"MMM")}},e.toggleSelectedElement=function(t){return e.isSelected(t)?(e.selectedElements=_.reject(e.selectedElements,function(e){return t.id?e.id===t.id:e.name===t.name}),l.format(),l.isExpanded()&&0===e.selectedElements.length?l.toggleExpanded():n.updateWidgetSettings(l,!1)):(e.selectedElements||(e.selectedElements=[]),e.selectedElements.push(t),l.format(),l.isExpanded()?n.updateWidgetSettings(l,!1):l.toggleExpanded())},e.isSelected=function(t){return null!=t&&null!=e.selectedElements?_.find(e.selectedElements,function(e){return t.id?e.id===t.id:e.name===t.name})?!0:!1:!1},e.toggleCollapsed=function(t){return null!=t&&null!=t.name?(_.find(e.unCollapsed,function(e){return t.name===e})?e.unCollapsed=_.reject(e.unCollapsed,function(e){return e===t.name}):e.unCollapsed.push(t.name),n.updateWidgetSettings(l,!1)):void 0},e.isCollapsed=function(t){return null!=t&&null!=t.name?_.find(e.unCollapsed,function(e){return t.name===e})?!1:!0:void 0},e.hasElements=function(){return null!=e.selectedElements&&e.selectedElements.length>0},e.drawTrigger=t.defer(),l.format=function(){var t,n,s,r,o,d,c;return e.isDataFound&&e.hasElements()?(l.isHistoryMode?(t=!0,s=[],r=_.map(l.content.dates,function(e){return l.metadata.hist_parameters&&"YEARLY"===l.metadata.hist_parameters.period?a("date")(e,"yyyy"):l.metadata.hist_parameters&&"QUARTERLY"===l.metadata.hist_parameters.period?a("date")(e,"MMM-yy"):!l.metadata.hist_parameters||"WEEKLY"!==l.metadata.hist_parameters.period&&"DAILY"!==l.metadata.hist_parameters.period?a("date")(e,"MMM"):a("date")(e,"dd-MMM")}),angular.forEach(e.selectedElements,function(e){var i;return i=angular.copy(e),s.push({title:i.name,labels:r,values:i.totals}),angular.forEach(i.totals,function(e){return t&&(t=e>=0)})}),o={scaleBeginAtZero:t,showXLabels:!0,datasetFill:1===e.selectedElements.length,pointDot:1===e.selectedElements.length,currency:"hide"},n=i.lineChart(s,o)):(d=_.map(e.selectedElements,function(t){return{label:a("titleize")(e.getName({name:t.name})),value:e.getLastValue(t)}}),c={showTooltips:!0,percentageInnerCutout:50,tooltipFontSize:12,currency:"hide"},n=i.pieChart(d,c)),e.drawTrigger.notify(n)):void 0},o={},o.initialized=!1,o.initialize=function(){return o.initialized=!0},o.toMetadata=function(){return{unCollapsed:e.unCollapsed}},l.settings.push(o),s={},s.initialized=!1,s.initialize=function(){return s.initialized=!0},s.toMetadata=function(){return{selectedElements:e.selectedElements}},l.settings.push(s),e.widgetDeferred.resolve(r)}]),e.directive("widgetHrPayrollSummary",function(){return{restrict:"A",controller:"WidgetHrPayrollSummaryCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.hr-payroll-taxes",[]),e.controller("WidgetHrPayrollTaxesCtrl",["$scope","$q","ChartFormatterSvc","$filter",function(e,t,i,a){var n,s;return s=e.widget,e.orgDeferred=t.defer(),e.timeRangeDeferred=t.defer(),e.histModeDeferred=t.defer(),e.chartDeferred=t.defer(),n=[e.orgDeferred.promise,e.timeRangeDeferred.promise,e.histModeDeferred.promise,e.chartDeferred.promise],s.initContext=function(){return e.isDataFound=null!=s.content&&!_.isEmpty(s.content.total_tax)&&!_.isEmpty(s.content.dates)},e.getCurrentPrice=function(){return e.isDataFound?_.last(s.content.total_tax):void 0},e.getCurrency=function(){return e.isDataFound?s.content.currency||"USD":void 0},e.getPeriod=function(){var t,i;return e.isDataFound&&s.content.hist_parameters?(i=s.content.hist_parameters.period||"MONTHLY",t="day","DAILY"!==i&&(t=i.substr(0,i.length-2).toLowerCase()),"(current "+t+")"):void 0},e.drawTrigger=t.defer(),s.format=function(){var t,n,r,o,l,d;return e.isDataFound?(d=null,null!=s.metadata&&null!=s.metadata.hist_parameters&&(d=s.metadata.hist_parameters.period),r=_.map(s.content.dates,function(e){return a("mnoDate")(e,d)}),o={title:"Payroll Taxes",labels:r,values:s.content.total_tax},t=!0,angular.forEach(s.content.total_tax,function(e){return t&&(t=e>=0)}),l={scaleBeginAtZero:t,showXLabels:!1},n=i.lineChart([o],l),e.drawTrigger.notify(n)):void 0},e.widgetDeferred.resolve(n)}]),e.directive("widgetHrPayrollTaxes",function(){return{restrict:"A",controller:"WidgetHrPayrollTaxesCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.hr-salaries-summary",[]),e.controller("WidgetHrSalariesSummaryCtrl",["$scope","$q","ChartFormatterSvc",function(e,t,i){var a,n;return n=e.widget,e.orgDeferred=t.defer(),e.widthDeferred=t.defer(),e.paramSelectorDeferred1=t.defer(),e.paramSelectorDeferred2=t.defer(),e.chartDeferred=t.defer(),a=[e.orgDeferred.promise,e.widthDeferred.promise,e.paramSelectorDeferred1.promise,e.paramSelectorDeferred2.promise,e.chartDeferred.promise],n.initContext=function(){return(e.isDataFound=!_.isEmpty(n.content)&&null!=n.content.summary&&!_.isEmpty(n.content.summary.data))?(e.periodOptions=[{label:"Yearly",value:"yearly"},{label:"Monthly",value:"monthly"},{label:"Weekly",value:"weekly"},{label:"Hourly",value:"hourly"}],e.period=angular.copy(_.find(e.periodOptions,function(e){return e.value===n.content.total.period.toLowerCase()})||e.periodOptions[0]),e.filterOptions=[{label:"Gender",value:"gender"},{label:"Age Range",value:"age_range"},{label:"Job Title",value:"job_title"}],e.filter=angular.copy(_.find(e.filterOptions,function(e){return e.value===n.content.summary.filter})||e.filterOptions[0])):void 0},e.getColorByIndex=function(e){return i.getColor(e)},e.drawTrigger=t.defer(),n.format=function(){var t,a,s,r,o;if(e.isDataFound){if(t={labels:_.map(n.content.summary.data,function(e){return e.label}),values:_.map(n.content.summary.data,function(e){return e.value})},"gender"===e.filter.value)a={showTooltips:!1},s=i.barChart(t,a);else if("job_title"===e.filter.value)a={showTooltips:!1,showXLabels:!1,barDatasetSpacing:15},s=i.barChart(t,a);else{if("age_range"!==e.filter.value)return{error:{message:"wrong filter",code:400}};"unknown"===_.last(t.labels)&&(t.labels.pop(),t.values.pop()),r=[{title:"Average salary",labels:t.labels,values:t.values}],o={scaleBeginAtZero:!0,showXLabels:!1},s=i.lineChart(r,o)}return e.drawTrigger.notify(s)}},e.widgetDeferred.resolve(a)}]),e.directive("widgetHrSalariesSummary",function(){return{restrict:"A",controller:"WidgetHrSalariesSummaryCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.hr-superannuation-accruals",[]),e.controller("WidgetHrSuperannuationAccrualsCtrl",["$scope","$q",function(e,t){var i,a;return a=e.widget,e.orgDeferred=t.defer(),e.paramSelectorDeferred=t.defer(),i=[e.orgDeferred.promise,e.paramSelectorDeferred.promise],a.initContext=function(){return(e.isDataFound=!_.isEmpty(a.content)&&!_.isEmpty(a.content.employees))?(e.employeesOptions=_.map(a.content.employees,function(e){return{value:e.uid,label:e.lastname+" "+e.firstname}}),e.selectedEmployee={value:e.getEmployee().uid,label:e.getEmployee().lastname+" "+e.getEmployee().firstname}):void 0},e.getEmployee=function(){var t;return e.isDataFound?(t=a.content.employees[0],a.metadata&&a.metadata.employee_id&&(t=_.find(a.content.employees,function(e){return e.uid===a.metadata.employee_id})||a.content.employees[0]),angular.copy(t)):!1},e.widgetDeferred.resolve(i)}]),e.directive("widgetHrSuperannuationAccruals",function(){return{restrict:"A",controller:"WidgetHrSuperannuationAccrualsCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.hr-timesheets",[]),e.controller("WidgetHrTimesheetsCtrl",["$scope","$q","ChartFormatterSvc","ImpacWidgetsSvc",function(e,t,i,a){var n,s,r;return r=e.widget,e.orgDeferred=t.defer(),e.timeRangeDeferred=t.defer(),e.paramSelectorDeferred=t.defer(),n=[e.orgDeferred.promise,e.timeRangeDeferred.promise,e.paramSelectorDeferred.promise],r.initContext=function(){return(e.isDataFound=angular.isDefined(r.content)&&!_.isEmpty(r.content.employees)&&!_.isEmpty(r.content.dates))?(e.employeesOptions=_.map(r.content.employees,function(e){return{value:e.id,label:e.lastname+" "+e.firstname}
}),e.selectedEmployee={value:e.getEmployee().id,label:e.getEmployee().lastname+" "+e.getEmployee().firstname},e.unCollapsed=r.metadata.unCollapsed||[]):void 0},e.toggleCollapsed=function(t){return null!=t?(_.find(e.unCollapsed,function(e){return t===e})?e.unCollapsed=_.reject(e.unCollapsed,function(e){return e===t}):e.unCollapsed.push(t),a.updateWidgetSettings(r,!1)):void 0},e.isCollapsed=function(t){return null!=t?_.find(e.unCollapsed,function(e){return t===e})?!1:!0:void 0},e.getEmployee=function(){return e.isDataFound?r.metadata&&r.metadata.employee_id?_.find(r.content.employees,function(e){return e.id===r.metadata.employee_id})||r.content.employees[0]:r.content.employees[0]:!1},e.getEmployeeTimeWorked=function(){var t;return(t=e.getEmployee())?_.find(r.content.employees,function(e){return e.id===t.id}).total_time_worked:void 0},e.getEmployeeTimeOff=function(){var t;return(t=e.getEmployee())?_.find(r.content.employees,function(e){return e.id===t.id}).total_time_off:void 0},s={},s.initialized=!1,s.initialize=function(){return s.initialized=!0},s.toMetadata=function(){return{unCollapsed:e.unCollapsed}},r.settings.push(s),e.widgetDeferred.resolve(n)}]),e.directive("widgetHrTimesheets",function(){return{restrict:"A",controller:"WidgetHrTimesheetsCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.hr-workforce-summary",[]),e.controller("WidgetHrWorkforceSummaryCtrl",["$scope","$q","ChartFormatterSvc","$filter",function(e,t,i,a){var n,s;return s=e.widget,e.orgDeferred=t.defer(),e.widthDeferred=t.defer(),e.paramSelectorDeferred1=t.defer(),e.paramSelectorDeferred2=t.defer(),e.chartDeferred=t.defer(),n=[e.orgDeferred.promise,e.widthDeferred.promise,e.paramSelectorDeferred1.promise,e.paramSelectorDeferred2.promise,e.chartDeferred.promise],s.initContext=function(){return(e.isDataFound=!_.isEmpty(s.content)&&null!=s.content.summary&&!_.isEmpty(s.content.summary.data))?(e.periodOptions=[{label:"Yearly",value:"yearly"},{label:"Monthly",value:"monthly"},{label:"Weekly",value:"weekly"},{label:"Hourly",value:"hourly"}],e.period=angular.copy(_.find(e.periodOptions,function(e){return e.value===s.content.total.period.toLowerCase()})||e.periodOptions[0]),e.filterOptions=[{label:"Gender",value:"gender"},{label:"Age Range",value:"age_range"},{label:"Salary Range",value:"salary_range"},{label:"Job Title",value:"job_title"}],e.filter=angular.copy(_.find(e.filterOptions,function(e){return e.value===s.content.summary.filter})||e.filterOptions[0])):void 0},e.getTotalWorkforce=function(){return e.isDataFound?s.content.total.amount:void 0},e.getNumberOfEmployees=function(){return e.isDataFound?s.content.total.employees:void 0},e.getCurrency=function(){return e.isDataFound?s.content.total.currency:void 0},e.formatSalaryRange=function(e){var t,i;return t=a("mnoCurrency")(e.label.split("-")[0],e.currency,!1),i=a("mnoCurrency")(e.label.split("-")[1],e.currency,!1),[t,i].join(" - ")},e.getColorByIndex=function(e){return i.getColor(e)},e.drawTrigger=t.defer(),s.format=function(){var t,a,n,r,o;return e.isDataFound?("salary_range"===e.filter.value?(t={labels:_.map(s.content.summary.data,function(t){return e.formatSalaryRange(t)}),values:_.map(s.content.summary.data,function(e){return e.value})},a={showTooltips:!1,showXLabels:!1,barDatasetSpacing:15},n=i.barChart(t,a)):(r=_.map(s.content.summary.data,function(e){return{label:e.label,value:e.value}}),o={showTooltips:!0,percentageInnerCutout:50,tooltipFontSize:12},n=i.pieChart(r,o)),e.drawTrigger.notify(n)):void 0},e.widgetDeferred.resolve(n)}]),e.directive("widgetHrWorkforceSummary",function(){return{restrict:"A",controller:"WidgetHrWorkforceSummaryCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.invoices-list",[]),e.controller("WidgetInvoicesListCtrl",["$scope","$q","$filter",function(e,t,i){var a,n;return n=e.widget,e.orgDeferred=t.defer(),e.limitEntriesDeferred=t.defer(),e.datesPickerDeferred=t.defer(),a=[e.orgDeferred.promise,e.limitEntriesDeferred.promise,e.datesPickerDeferred.promise],n.initContext=function(){var t,a,s,r,o,l,d,c,u,g,h;if(e.isDataFound=!_.isEmpty(n.content)&&!_.isEmpty(n.content.entities),e.isDataFound&&"due "===e.orderBy&&(e.limitEntriesLabel="suppliers"===e.entityType?"creditors":"debtors"),null!=n.metadata&&null!=n.metadata.limit_entries&&(e.limitEntriesSelected=n.metadata.limit_entries),e.isDataFound){for(d=new Date,c=!1,s=_.flatten(_.map(n.content.entities,function(e){return _.map(e.invoices,function(e){return e.invoice_date})})),r=0,o=s.length;o>r;r++)a=s[r],_.isEmpty(a)||(g=a.split("-"),h=g[0],l=g[1]-1,t=g[2],u=new Date(h,l,t),c||(c=u),c=Math.min(c,u),d=Math.max(d,u));return c||(c=new Date((new Date).getFullYear()-10,0,1)),e.defaultFrom=i("date")(c,"yyyy-MM-dd"),e.defaultTo=i("date")(d,"yyyy-MM-dd")}},e.entityType=n.metadata.entity,e.entityTypeCap=_.capitalize(n.metadata.entity),e.orderBy=_.isEmpty(n.metadata.order_by)||"name"===n.metadata.order_by||"total_invoiced"===n.metadata.order_by?"":_.last(n.metadata.order_by.split("_")).concat(" "),e.getInvoices=function(e){var t,a;return a=["<strong>"+e.name+"</strong>"],t=1,angular.forEach(e.invoices,function(e){var n,s;return s=""!==e.transaction_no?" ("+e.transaction_no+")":"",n="partially paid"===e.tooltip_status?" ("+i("mnoCurrency")(e.paid,e.currency,!0)+" over "+i("mnoCurrency")(e.invoiced,e.currency,!0)+")":" ("+i("mnoCurrency")(e.invoiced,e.currency,!0)+")",a.push("#"+t+s+" - "+e.tooltip_status+n),t++}),a.join("<br />")},e.widgetDeferred.resolve(a)}]),e.directive("widgetInvoicesList",function(){return{restrict:"A",controller:"WidgetInvoicesListCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.invoices-aged-payables-receivables",[]),e.controller("WidgetInvoicesAgedPayablesReceivablesCtrl",["$scope","$q","$log","$filter","ChartFormatterSvc","ImpacWidgetsSvc",function(e,t,i,a,n,s){var r,o,l,d;return d=e.widget,e.orgDeferred=t.defer(),e.timeRangeDeferred=t.defer(),e.widthDeferred=t.defer(),e.chartDeferred=t.defer(),o=[e.orgDeferred.promise,e.timeRangeDeferred.promise,e.widthDeferred.promise,e.chartDeferred.promise],d.initContext=function(){return!(e.isDataFound=!(!angular.isDefined(d.content)||_.isEmpty(d.content.payables)&&_.isEmpty(d.content.receivables)||_.isEmpty(d.content.dates)))||(e.unCollapsed=d.metadata.unCollapsed||[],d.metadata.selectedElements&&(e.selectedElements=[],angular.forEach(d.metadata.selectedElements,function(t){var i;return"aged_payables"===t.name&&(i=d.content.payables),"aged_receivables"!==t.name||i||(i=d.content.receivables),i||(i=_.find(d.content.payables.suppliers,function(e){return e.id===t.id})),i||(i=_.find(d.content.receivables.customers,function(e){return e.id===t.id})),i?e.selectedElements.push(i):void 0})),null!=e.selectedElements&&e.selectedElements.length>0)?void 0:d.width=6},e.getElementChartColor=function(e){return null!=e?n.getColor(e):void 0},e.getLastValue=function(e){return null!=e&&null!=e.totals?_.last(e.totals):void 0},e.getTotalSum=function(e){return null!=e&&null!=e.totals?_.reduce(e.totals,function(e,t){return e+t},0):void 0},e.getName=function(e){return null!=e&&null!=e.name?e.name.replace(/_/g," "):void 0},e.getPeriod=function(){var t,i;return e.isDataFound&&d.content.hist_parameters?(i=d.content.hist_parameters.period||"MONTHLY",t="day","DAILY"!==i&&(t=i.substr(0,i.length-2).toLowerCase()),"current "+t):"current month"},e.toggleSelectedElement=function(t){return e.isSelected(t)?(e.selectedElements=_.reject(e.selectedElements,function(e){return t.id?e.id===t.id:e.name===t.name}),d.format(),d.isExpanded()&&0===e.selectedElements.length?d.toggleExpanded():s.updateWidgetSettings(d,!1)):(e.selectedElements||(e.selectedElements=[]),e.selectedElements.push(t),d.format(),d.isExpanded()?s.updateWidgetSettings(d,!1):d.toggleExpanded())},e.isSelected=function(t){return null!=t&&null!=e.selectedElements?_.find(e.selectedElements,function(e){return t.id?e.id===t.id:e.name===t.name})?!0:!1:!1},e.toggleCollapsed=function(t){return null!=t&&null!=t.name?(_.find(e.unCollapsed,function(e){return t.name===e})?e.unCollapsed=_.reject(e.unCollapsed,function(e){return e===t.name}):e.unCollapsed.push(t.name),s.updateWidgetSettings(d,!1)):void 0},e.isCollapsed=function(t){return null!=t&&null!=t.name?_.find(e.unCollapsed,function(e){return t.name===e})?!1:!0:void 0},e.hasElements=function(){return null!=e.selectedElements&&e.selectedElements.length>0},e.drawTrigger=t.defer(),d.format=function(){var t,i,s,r,o,l;return e.isDataFound&&null!=e.selectedElements&&e.selectedElements.length>0?(t=!0,r=[],l=null,null!=d.metadata&&null!=d.metadata.hist_parameters&&(l=d.metadata.hist_parameters.period),s=_.map(d.content.dates,function(e){return a("mnoDate")(e,l)}),angular.forEach(e.selectedElements,function(e){var i;return i=angular.copy(e),r.push({title:i.name,labels:s,values:i.totals}),angular.forEach(i.totals,function(e){return t&&(t=e>=0)})}),o={scaleBeginAtZero:t,showXLabels:!0,datasetFill:1===e.selectedElements.length,pointDot:1===e.selectedElements.length},i=n.lineChart(r,o),e.drawTrigger.notify(i)):void 0},l={},l.initialized=!1,l.initialize=function(){return l.initialized=!0},l.toMetadata=function(){return{unCollapsed:e.unCollapsed}},d.settings.push(l),r={},r.initialized=!1,r.initialize=function(){return r.initialized=!0},r.toMetadata=function(){return{selectedElements:e.selectedElements}},d.settings.push(r),e.widgetDeferred.resolve(o)}]),e.directive("widgetInvoicesAgedPayablesReceivables",function(){return{restrict:"A",controller:"WidgetInvoicesAgedPayablesReceivablesCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.invoices-summary",[]),e.controller("WidgetInvoicesSummaryCtrl",["$scope","$q","ChartFormatterSvc",function(e,t,i){var a,n;return n=e.widget,e.orgDeferred=t.defer(),e.chartFiltersDeferred=t.defer(),e.chartDeferred=t.defer(),e.datesPickerDeferred=t.defer(),a=[e.orgDeferred.promise,e.chartFiltersDeferred.promise,e.chartDeferred.promise,e.datesPickerDeferred.promise],e.defaultFrom=(new Date).getFullYear()-10+"-01-01",n.initContext=function(){return e.isDataFound=!_.isEmpty(n.content)&&!_.isEmpty(n.content.summary)},e.drawTrigger=t.defer(),n.format=function(){var t,a,s;return e.isDataFound?(a=_.map(n.content.summary,function(e){return{label:e.name,value:e.total}}),s={percentageInnerCutout:50,tooltipFontSize:12},t=i.pieChart(a,s),e.drawTrigger.notify(t)):void 0},e.widgetDeferred.resolve(a)}]),e.directive("widgetInvoicesSummary",function(){return{restrict:"A",controller:"WidgetInvoicesSummaryCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.sales-aged",[]),e.controller("WidgetSalesAgedCtrl",["$scope","$q","ChartFormatterSvc","$filter",function(e,t,i,a){var n,s;return s=e.widget,e.orgDeferred=t.defer(),e.timeRangeDeferred=t.defer(),e.paramSelectorDeferred=t.defer(),e.chartDeferred=t.defer(),n=[e.orgDeferred.promise,e.timeRangeDeferred.promise,e.paramSelectorDeferred.promise,e.chartDeferred.promise],s.initContext=function(){return(e.isDataFound=angular.isDefined(s.content)&&!_.isEmpty(s.content.aged_sales)&&!_.isEmpty(s.content.dates))?(e.filterOptions=[{label:"value sold (incl. taxes)",value:"gross_value_sold"},{label:"value sold (excl. taxes)",value:"net_value_sold"},{label:"quantity sold",value:"quantity_sold"}],e.filter=angular.copy(_.find(e.filterOptions,function(e){return s.metadata&&s.metadata.filter===e.value})||e.filterOptions[0])):void 0},e.getTotal=function(t){return e.isDataFound&&t>=0&&t<s.content.aged_sales[e.filter.value].length?s.content.aged_sales[e.filter.value][t]:void 0},e.getLastDate=function(){return e.isDataFound?_.last(s.content.dates):void 0},e.getClassColor=function(e,t){return e>t?"negative":t>e?"positive":null},e.drawTrigger=t.defer(),s.format=function(){var t,n,r,o,l,d;return e.isDataFound?(t=!0,r=[],d=s.content.aged_sales[e.filter.value],l=null,null!=s.metadata&&null!=s.metadata.hist_parameters&&(l=s.metadata.hist_parameters.period),e.formattedDates=_.map(s.content.dates,function(e){return a("mnoDate")(e,l)}),r.push({title:e.filter.label,labels:e.formattedDates,values:d}),angular.forEach(d,function(e){return t&&(t=e>=0)}),o={scaleBeginAtZero:t,showXLabels:!0,datasetFill:!0,pointDot:!0},e.filter.value.indexOf("quantity")>-1&&angular.merge(o,{currency:"hide"}),n=i.lineChart(r,o),e.drawTrigger.notify(n)):void 0},e.widgetDeferred.resolve(n)}]),e.directive("widgetSalesAged",function(){return{restrict:"A",controller:"WidgetSalesAgedCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.sales-break-even",[]),e.controller("WidgetSalesBreakEvenCtrl",["$scope","$q","ChartFormatterSvc","$filter",function(e,t,i,a){var n,s,r;return r=e.widget,e.orgDeferred=t.defer(),e.timeRangeDeferred=t.defer(),n=[e.orgDeferred.promise,e.timeRangeDeferred.promise],r.initContext=function(){return e.isDataFound=angular.isDefined(r.content)&&!_.isEmpty(r.content.sales),e.threshold=r.metadata.threshold},r.processError=function(t){return 404===t.code?e.isDataFound=!1:void 0},e.getProjectedDate=function(){var t;return e.isDataFound&&r.content.break_even?(""+r.content.break_even.projected_date).match("After")?(t=angular.copy(r.content.break_even.projected_date).replace("After ",""),"> "+a("date")(t,"d-MM-yy")):r.content.break_even.projected_date:void 0},e.getOpportunitiesToClose=function(){var t;return e.isDataFound&&r.content.break_even?(""+r.content.break_even.opportunities_to_close).match(">")?(t=angular.copy(r.content.break_even.opportunities_to_close).replace(">",""),"> "+t):r.content.break_even.opportunities_to_close:void 0},e.isTargetMet=function(){return e.isDataFound&&r.content.break_even?r.content.break_even.variance<0:void 0},e.getVariance=function(){return e.isDataFound&&r.content.break_even?Math.abs(r.content.break_even.variance):void 0},s={},s.initialized=!1,s.initialize=function(){return s.initialized=!0},s.toMetadata=function(){return{threshold:e.threshold}},r.settings.push(s),e.widgetDeferred.resolve(n)}]),e.directive("widgetSalesBreakEven",function(){return{restrict:"A",controller:"WidgetSalesBreakEvenCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.sales-comparison",[]),e.controller("WidgetSalesComparisonCtrl",["$scope","$q","$filter","ChartFormatterSvc","ImpacWidgetsSvc",function(e,t,i,a,n){var s,r,o,l;return l=e.widget,e.orgDeferred=t.defer(),e.timeRangeDeferred=t.defer(),e.widthDeferred=t.defer(),e.paramSelectorDeferred1=t.defer(),e.paramSelectorDeferred2=t.defer(),e.chartDeferred=t.defer(),r=[e.orgDeferred.promise,e.timeRangeDeferred.promise,e.widthDeferred.promise,e.paramSelectorDeferred1,e.paramSelectorDeferred2,e.chartDeferred.promise],l.initContext=function(){return e.isDataFound=angular.isDefined(l.content)&&!_.isEmpty(l.content.sales_comparison)&&!_.isEmpty(l.content.dates),e.isDataFound&&(e.unCollapsed=l.metadata.unCollapsed||[],e.filterOptions=[{label:"value sold (incl. taxes)",value:"gross_value_sold"},{label:"value sold (excl. taxes)",value:"net_value_sold"},{label:"quantity sold",value:"quantity_sold"}],e.filter=angular.copy(_.find(e.filterOptions,function(e){return l.metadata&&l.metadata.filter===e.value})||e.filterOptions[0]),e.criteriaOptions=[{label:"products",value:"default"},{label:"locations",value:"location"},{label:"industries",value:"industry"},{label:"customers",value:"customer"}],e.criteria=angular.copy(_.find(e.criteriaOptions,function(e){return l.metadata&&l.metadata.criteria===e.value})||e.criteriaOptions[0]),l.metadata.selectedElements)?(e.selectedElements=[],angular.forEach(l.metadata.selectedElements,function(t){var i;return i=_.find(l.content.sales_comparison,function(e){return e.name===t.name}),i||angular.forEach(l.content.sales_comparison,function(e){return null!=e.sales?i||(i=_.find(e.sales,function(e){return t.id===e.id})):void 0}),i?e.selectedElements.push(i):void 0})):void 0},e.getLastDate=function(){return e.isDataFound?_.last(l.content.dates):void 0},e.getTotalForPeriod=function(t){return null!=t.totals&&e.filter?_.reduce(t.totals[e.filter.value],function(e,t){return e+t},0):void 0},e.getElementChartColor=function(e){return a.getColor(e)},e.toggleSelectedElement=function(t){return e.isSelected(t)?(e.selectedElements=_.reject(e.selectedElements,function(e){return t.id?e.id===t.id:e.name===t.name}),l.format(),l.isExpanded()&&0===e.selectedElements.length?l.toggleExpanded():n.updateWidgetSettings(l,!1)):(e.selectedElements||(e.selectedElements=[]),e.selectedElements.push(t),l.format(),l.isExpanded()?n.updateWidgetSettings(l,!1):l.toggleExpanded())},e.isSelected=function(t){return null!=t&&null!=e.selectedElements?_.find(e.selectedElements,function(e){return t.id?e.id===t.id:e.name===t.name})?!0:!1:!1},e.toggleCollapsed=function(t){return null!=t&&null!=t.name?(_.find(e.unCollapsed,function(e){return t.name===e})?e.unCollapsed=_.reject(e.unCollapsed,function(e){return e===t.name}):e.unCollapsed.push(t.name),n.updateWidgetSettings(l,!1)):void 0},e.isCollapsed=function(t){return null!=t&&null!=t.name?_.find(e.unCollapsed,function(e){return t.name===e})?!1:!0:void 0},e.hasElements=function(){return null!=e.selectedElements&&e.selectedElements.length>0},e.drawTrigger=t.defer(),l.format=function(){var t,n,s,r;return e.isDataFound&&null!=e.selectedElements&&e.selectedElements.length>0?(t=!0,s=[],angular.forEach(e.selectedElements,function(a){var n,r,o;return n=angular.copy(a),o=null,null!=l.metadata&&null!=l.metadata.hist_parameters&&(o=l.metadata.hist_parameters.period),r=_.map(l.content.dates,function(e){return i("mnoDate")(e,o)}),s.push({title:n.name,labels:r,values:n.totals[e.filter.value]}),angular.forEach(n.totals,function(e){return t&&(t=e>=0)})}),r={scaleBeginAtZero:t,showXLabels:!0,datasetFill:!1,pointDot:!1},e.filter.value.indexOf("quantity")>-1&&angular.merge(r,{currency:"hide"}),n=a.lineChart(s,r),e.drawTrigger.notify(n)):void 0},o={},o.initialized=!1,o.initialize=function(){return o.initialized=!0},o.toMetadata=function(){return{unCollapsed:e.unCollapsed}},l.settings.push(o),s={},s.initialized=!1,s.initialize=function(){return s.initialized=!0},s.toMetadata=function(){return{selectedElements:e.selectedElements}},l.settings.push(s),e.widgetDeferred.resolve(r)}]),e.directive("widgetSalesComparison",function(){return{restrict:"A",controller:"WidgetSalesComparisonCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.sales-customer-details",[]),e.controller("WidgetSalesCustomerDetailsCtrl",["$scope","$q",function(e,t){var i,a;return a=e.widget,e.orgDeferred=t.defer(),e.timeRangeDeferred=t.defer(),e.widthDeferred=t.defer(),e.paramSelectorDeferred=t.defer(),i=[e.orgDeferred.promise,e.timeRangeDeferred.promise,e.widthDeferred.promise,e.paramSelectorDeferred.promise],a.initContext=function(){return e.isDataFound=null!=a.content&&!_.isEmpty(a.content.customers),e.isDataFound?(e.customersOptions=_.map(a.content.customers,function(e){return{value:e.uid,label:e.name}}),e.selectedCustomer={value:e.getCustomer().uid,label:e.getCustomer().name}):void 0},e.getCustomer=function(){var t;return e.isDataFound?t=a.metadata&&a.metadata.customer_uid?angular.copy(_.find(a.content.customers,function(e){return e.uid===a.metadata.customer_uid})||a.content.customers[0]):angular.copy(a.content.customers[0]):!1},e.formatAddress=function(e){return angular.isDefined(e)?e.replace(/, /g,",\n"):void 0},e.getFromDate=function(){return e.isDataFound?a.content.from:void 0},e.getToDate=function(){return e.isDataFound?a.content.to:void 0},e.widgetDeferred.resolve(i)}]),e.directive("widgetSalesCustomerDetails",function(){return{restrict:"A",controller:"WidgetSalesCustomerDetailsCtrl"}})}.call(this),function(){var e,t=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};e=angular.module("impac.components.widgets.sales-cycle",[]),e.controller("WidgetSalesCycleCtrl",["$scope","$q","ChartFormatterSvc","$filter",function(e,i,a,n){var s,r;return r=e.widget,e.orgDeferred=i.defer(),e.paramsPickerDeferred=i.defer(),e.timeRangeDeferred=i.defer(),e.chartDeferred=i.defer(),s=[e.orgDeferred.promise,e.paramsPickerDeferred.promise,e.timeRangeDeferred.promise,e.chartDeferred.promise],r.initContext=function(){return(e.isDataFound=angular.isDefined(r.content)&&!_.isEmpty(r.content.status_average_durations))?(e.unit=(r.metadata.unit||r.content.unit||"days").toLowerCase(),e.statusOptions=_.compact(_.map(r.metadata.status_selection,function(e){return angular.isDefined(r.content.status_average_durations[e])?{label:e,selected:!0}:void 0})),angular.forEach(r.content.status_average_durations,function(i,a){return!r.metadata.status_selection||t.call(r.metadata.status_selection,a)>=0?_.isEmpty(r.metadata.status_selection)?e.statusOptions.push({label:a,selected:!0}):void 0:e.statusOptions.push({label:a,selected:!1})})):void 0},r.processError=function(t){return 404===t.code?e.isDataFound=!1:void 0},e.drawTrigger=i.defer(),r.format=function(){var t,i,s;return e.isDataFound?(i=_.compact(_.map(e.statusOptions,function(t){var i;return i=r.content.status_average_durations[t.label],t.selected&&angular.isDefined(i)?{label:n("titleize")(t.label)+": "+i+" "+e.unit,value:i}:void 0})),s={percentageInnerCutout:50,tooltipFontSize:12,currency:r.content.unit},t=a.pieChart(i,s),e.drawTrigger.notify(t)):void 0},e.widgetDeferred.resolve(s)}]),e.directive("widgetSalesCycle",function(){return{restrict:"A",controller:"WidgetSalesCycleCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.sales-forecast",[]),e.controller("WidgetSalesForecastCtrl",["$scope","$q","ChartFormatterSvc","$filter",function(e,t,i,a){var n,s;return s=e.widget,e.orgDeferred=t.defer(),e.chartDeferred=t.defer(),n=[e.orgDeferred.promise,e.chartDeferred.promise],s.initContext=function(){return e.isDataFound=angular.isDefined(s.content)&&!_.isEmpty(s.content.dates)&&!_.isEmpty(s.content.totals)},s.processError=function(t){return 404===t.code?e.isDataFound=!1:void 0},e.getOpportunityAmount=function(t){return e.isDataFound&&!_.isEmpty(t)?t.amount&&t.amount.amount?t.amount.amount:"-":void 0},e.getOpportunityCurrency=function(t){return e.isDataFound&&!_.isEmpty(t)?t.amount&&t.amount.currency?t.amount.currency:s.content.currency?s.content.currency:"AUD":void 0},e.drawTrigger=t.defer(),s.format=function(){var t,n,r,o,l,d;return e.isDataFound?(t=!0,d=null,null!=s.metadata&&null!=s.metadata.hist_parameters&&(d=s.metadata.hist_parameters.period),r=_.map(s.content.dates,function(e){return a("mnoDate")(e,d)}),o=[{title:"Sales Performance",labels:r,values:s.content.totals}],angular.forEach(s.content.totals,function(e){return t&&(t=e>=0)}),l={scaleBeginAtZero:t,showXLabels:!0,datasetFill:!0,pointDot:!1},n=i.lineChart(o,l),e.drawTrigger.notify(n)):void 0},e.widgetDeferred.resolve(n)}]),e.directive("widgetSalesForecast",function(){return{restrict:"A",controller:"WidgetSalesForecastCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.sales-growth",[]),e.controller("WidgetSalesGrowthCtrl",["$scope","$q","ChartFormatterSvc","$filter",function(e,t,i,a){var n,s;return s=e.widget,e.orgDeferred=t.defer(),e.timeRangeDeferred=t.defer(),e.paramSelectorDeferred1=t.defer(),e.paramSelectorDeferred2=t.defer(),e.chartDeferred=t.defer(),n=[e.orgDeferred.promise,e.timeRangeDeferred.promise,e.paramSelectorDeferred1.promise,e.paramSelectorDeferred2.promise,e.chartDeferred.promise],e.isDataQuantity=!0,s.initContext=function(){return(e.isDataFound=angular.isDefined(s.content)&&!_.isEmpty(s.content.summary)&&!_.isEmpty(s.content.dates))?(e.productOptions=_.flatten(_.map(s.content.summary,function(e){return{label:e.code,value:e.id}})),e.product=angular.copy(_.find(e.productOptions,function(e){return e.value===s.content.product})||{label:"SELECT PRODUCT",value:-1}),e.filterOptions=[{label:"value sold (incl. taxes)",value:"gross_value_sold"},{label:"value sold (excl. taxes)",value:"net_value_sold"},{label:"quantity sold",value:"quantity_sold"},{label:"value purchased (incl. taxes)",value:"gross_value_purchased"},{label:"value purchased (excl. taxes)",value:"net_value_purchased"},{label:"quantity purchased",value:"quantity_purchased"}],e.filter=angular.copy(_.find(e.filterOptions,function(e){return e.value===s.content.filter})||e.filterOptions[0]),e.isDataQuantity=e.filter.value.match("quantity")):void 0},e.getSelectedProduct=function(){return e.isDataFound?_.find(s.content.summary,function(t){return t.id===e.product.value}):void 0},e.getCurrentValue=function(){return null!=e.getSelectedProduct()?_.last(e.getSelectedProduct().totals):void 0},e.getCurrentDate=function(){return e.isDataFound?_.last(s.content.dates):void 0},e.drawTrigger=t.defer(),s.format=function(){var t,n,r,o,l,d,c;return e.isDataFound&&e.product&&(r=e.getSelectedProduct())?(c=null,null!=s.metadata&&null!=s.metadata.hist_parameters&&(c=s.metadata.hist_parameters.period),o=_.map(s.content.dates,function(e){return a("mnoDate")(e,c)}),l={title:r.name,labels:o,values:r.totals},t=!0,angular.forEach(r.totals,function(e){return t&&(t=e>=0)}),d={scaleBeginAtZero:t,showXLabels:!1},e.filter.value.indexOf("quantity")>-1&&angular.merge(d,{currency:"hide"}),n=i.lineChart([l],d),e.drawTrigger.notify(n)):void 0},e.widgetDeferred.resolve(n)}]),e.directive("widgetSalesGrowth",function(){return{restrict:"A",controller:"WidgetSalesGrowthCtrl"}})}.call(this),function(){var e,t=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};e=angular.module("impac.components.widgets.sales-leads-funnel",[]),e.controller("WidgetSalesLeadsFunnelCtrl",["$scope","$q","ChartFormatterSvc","$filter","ImpacWidgetsSvc",function(e,i,a,n,s){var r,o,l,d;return d=e.widget,e.orgDeferred=i.defer(),e.timeRangeDeferred=i.defer(),e.paramsPickerDeferred=i.defer(),e.widthDeferred=i.defer(),l=[e.orgDeferred.promise,e.timeRangeDeferred.promise,e.paramsPickerDeferred.promise,e.widthDeferred.promise],r=function(e){var t,i,a;return t=_.mapValues(e,function(e){return e.total}),a=_.compact(_.values(t)),i=_.reduce(a,function(e,t){return null==e&&(e=0),e+t}),null!=i&&i>0},d.initContext=function(){return(e.isDataFound=angular.isDefined(d.content)&&!_.isEmpty(d.content.leads_per_status)&&r(d.content.leads_per_status))?(e.statusOptions=_.compact(_.map(d.metadata.status_selection,function(e){return angular.isDefined(d.content.leads_per_status[e])?{label:e,selected:!0}:void 0})),angular.forEach(d.content.leads_per_status,function(i,a){return!d.metadata.status_selection||t.call(d.metadata.status_selection,a)>=0?_.isEmpty(d.metadata.status_selection)?e.statusOptions.push({label:a,selected:!0}):void 0:e.statusOptions.push({label:a,selected:!1})})):void 0},d.processError=function(t){return 404===t.code?e.isDataFound=!1:void 0},e.getImpacColor=function(e){return a.getColor(e)},e.toggleSelectStatus=function(t){return e.selectedStatus=e.selectedStatus&&e.selectedStatus===t?null:t,!d.isExpanded()&&e.selectedStatus?d.toggleExpanded():s.updateWidgetSettings(d,!1)},e.isSelected=function(t){return e.selectedStatus&&t===e.selectedStatus},e.getSelectedLeads=function(){return e.isDataFound&&e.selectedStatus?d.content.leads_per_status[e.selectedStatus].leads:void 0},e.getLeadDescription=function(e){var t,i;return i=[],t=["<strong>"],e.first_name&&t.push(n("titleize")(e.first_name)),e.last_name&&t.push(n("titleize")(e.last_name)),t.push("</strong>"),i.push(t.join(" ")),i.push("Status: "+n("titleize")(e.lead_status)),e.organization&&i.push("Organization: "+n("titleize")(e.organization)),e.opportunities&&(i.push("<strong>Opportunities:</strong>"),angular.forEach(e.opportunities,function(e){var t;return t=[],e.code&&t.push("#"+e.code),e.name&&t.push(""+e.name),e.amount&&t.push(n("mnoCurrency")(e.amount.total_amount,"USD",!1)),e.probability&&t.push(e.probability+"%"),e.sales_stage&&t.push(""+e.sales_stage),i.push(t.join(" - "))})),i.join("<br />")},o={},o.initialized=!1,o.initialize=function(){return!_.isEmpty(d.content)&&angular.isDefined(d.content.leads_per_status[d.metadata.selected_status])&&(e.selectedStatus=d.metadata.selected_status),o.initialized=!0},o.toMetadata=function(){return{selected_status:e.selectedStatus}},d.settings.push(o),d.format=function(){var t;return e.isDataFound&&(t=0,angular.forEach(e.statusOptions,function(e){var i;return i=d.content.leads_per_status[e.label].total,e.selected&&angular.isDefined(i)&&i>t?t=i:void 0}),t>0)?e.funnel=_.compact(_.map(e.statusOptions,function(e){var i,a,n;return n=d.content.leads_per_status[e.label].total,i=(100*(n/t)-10).toFixed(),a=8>i?92:100-i,e.selected&&angular.isDefined(n)?{status:e.label,number:n,coloredWidth:{width:i+"%"},statusWidth:{width:a+"%"}}:void 0})):void 0},e.widgetDeferred.resolve(l)}]),e.directive("widgetSalesLeadsFunnel",function(){return{restrict:"A",controller:"WidgetSalesLeadsFunnelCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.sales-leads-list",[]),e.controller("WidgetSalesLeadsListCtrl",["$scope","$q","ChartFormatterSvc","$filter",function(e,t,i,a){var n,s;return s=e.widget,e.orgDeferred=t.defer(),n=[e.orgDeferred.promise],s.initContext=function(){return e.isDataFound=angular.isDefined(s.content)&&!_.isEmpty(s.content.leads)},s.processError=function(t){return 404===t.code?e.isDataFound=!1:void 0},e.getLeadDescription=function(e){var t,i;return i=[],t=["<strong>"],e.first_name&&t.push(a("titleize")(e.first_name)),e.last_name&&t.push(a("titleize")(e.last_name)),t.push("</strong>"),i.push(t.join(" ")),i.push("Status: "+a("titleize")(e.lead_status)),e.organization&&i.push("Organization: "+a("titleize")(e.organization)),e.opportunities&&(i.push("<strong>Opportunities:</strong>"),angular.forEach(e.opportunities,function(e){var t;return t=[],e.code&&t.push("#"+e.code),e.name&&t.push(""+e.name),e.amount&&t.push(a("mnoCurrency")(e.amount.total_amount,"USD",!1)),e.probability&&t.push(e.probability+"%"),e.sales_stage&&t.push(""+e.sales_stage),i.push(t.join(" - "))})),i.join("<br />")},e.widgetDeferred.resolve(n)}]),e.directive("widgetSalesLeadsList",function(){return{restrict:"A",controller:"WidgetSalesLeadsListCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.sales-list",[]),e.controller("WidgetSalesListCtrl",["$scope","$q","ChartFormatterSvc","ImpacWidgetsSvc",function(e,t,i,a){var n,s,r;return r=e.widget,e.orgDeferred=t.defer(),e.paramSelectorDeferred=t.defer(),e.datesPickerDeferred=t.defer(),n=[e.orgDeferred.promise,e.paramSelectorDeferred.promise,e.datesPickerDeferred.promise],r.initContext=function(){return e.isDataFound=angular.isDefined(r.content)&&!_.isEmpty(r.content.summary),e.filterOptions=[{label:"value sold (incl. taxes)",value:"gross_value_sold"},{label:"value sold (excl. taxes)",value:"net_value_sold"},{label:"quantity sold",value:"quantity_sold"},{label:"value purchased (incl. taxes)",value:"gross_value_purchased"},{label:"value purchased (excl. taxes)",value:"net_value_purchased"},{label:"quantity purchased",value:"quantity_purchased"}],e.filter=angular.copy(_.find(e.filterOptions,function(e){return e.value===r.metadata.filter})||e.filterOptions[0]),e.unCollapsed=r.metadata.unCollapsed||[]},e.toggleCollapsed=function(t){return null!=t?(_.find(e.unCollapsed,function(e){return t===e})?e.unCollapsed=_.reject(e.unCollapsed,function(e){return e===t}):e.unCollapsed.push(t),a.updateWidgetSettings(r,!1)):void 0},e.isCollapsed=function(t){return null!=t?_.find(e.unCollapsed,function(e){return t===e})?!1:!0:void 0},s={},s.initialized=!1,s.initialize=function(){return s.initialized=!0},s.toMetadata=function(){return{unCollapsed:e.unCollapsed}},r.settings.push(s),e.widgetDeferred.resolve(n)}]),e.directive("widgetSalesList",function(){return{restrict:"A",controller:"WidgetSalesListCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.sales-margin",[]),e.controller("WidgetSalesMarginCtrl",["$scope","$q","ChartFormatterSvc","$filter",function(e,t,i,a){var n,s;return s=e.widget,e.orgDeferred=t.defer(),e.timeRangeDeferred=t.defer(),e.histModeDeferred=t.defer(),e.paramSelectorDeferred=t.defer(),e.chartDeferred=t.defer(),n=[e.orgDeferred.promise,e.timeRangeDeferred.promise,e.histModeDeferred.promise,e.paramSelectorDeferred.promise,e.chartDeferred.promise],s.initContext=function(){return e.isDataFound=null!=s.content&&null!=s.content.margins&&null!=s.content.dates,e.filterOptions=[{label:"Including taxes",value:"gross_margin"},{label:"Excluding taxes",value:"net_margin"}],e.filter=null!=s.metadata&&"net_margin"===s.metadata.filter?angular.copy(e.filterOptions[1]):angular.copy(e.filterOptions[0])
},e.getTotalMargin=function(){return e.isDataFound?null!=s.metadata&&"net_margin"===s.metadata.filter?_.reduce(s.content.margins.net,function(e,t){return e+t},0):_.reduce(s.content.margins.gross,function(e,t){return e+t},0):void 0},e.getCurrency=function(){return e.isDataFound?s.content.currency||"USD":void 0},e.getTimeSpan=function(){var t;return e.isDataFound?(t=null,null!=s.metadata&&null!=s.metadata.hist_parameters&&(t=s.metadata.hist_parameters.period),"From "+a("mnoDate")(_.first(s.content.dates),t)+" to "+a("mnoDate")(_.last(s.content.dates),t)):void 0},e.drawTrigger=t.defer(),s.format=function(){var t,n,r,o,l,d,c;return e.isDataFound?(c=null!=s.metadata&&"net_margin"===s.metadata.filter?s.content.margins.net:s.content.margins.gross,d=null,null!=s.metadata&&null!=s.metadata.hist_parameters&&(d=s.metadata.hist_parameters.period),r=_.map(s.content.dates,function(e){return a("mnoDate")(e,d)}),o={title:"Gross margin",labels:r,values:c},t=!0,angular.forEach(c,function(e){return t&&(t=e>=0)}),l={scaleBeginAtZero:t,showXLabels:!1},n=i.lineChart([o],l),e.drawTrigger.notify(n)):void 0},e.widgetDeferred.resolve(n)}]),e.directive("widgetSalesMargin",function(){return{restrict:"A",controller:"WidgetSalesMarginCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.sales-number-of-leads",[]),e.controller("WidgetSalesNumberOfLeadsCtrl",["$scope","$q","ChartFormatterSvc","$filter",function(e,t){var i,a,n;return n=e.widget,e.orgDeferred=t.defer(),e.paramSelectorDeferred=t.defer(),a=[e.orgDeferred.promise,e.paramSelectorDeferred.promise],n.initContext=function(){return(e.isDataFound=angular.isDefined(n.content)&&!_.isEmpty(n.content.number_of_leads))?(e.periodOptions=[{label:"year",value:"YEARLY"},{label:"quarter",value:"QUARTERLY"},{label:"month",value:"MONTHLY"},{label:"week",value:"WEEKLY"},{label:"day",value:"DAILY"}],e.period=angular.copy(_.find(e.periodOptions,function(e){return e.value===n.metadata.period})||e.periodOptions[3])):void 0},n.processError=function(t){return 404===t.code?e.isDataFound=!1:void 0},e.formatNumberOfLeads=function(t){var a,s,r,o,l,d;if(s=0,r="- %",!e.isDataFound)return{nominal:s,variation:r,color:""};if(o=angular.copy(n.content.number_of_leads),l=0,a="","new"===t&&o.total&&2===o.total.length)l=o.total[1]-o.total[0],d=i(o.total),d>0?a="green":0>d&&(a="red");else if("converted"===t&&o.converted&&2===o.converted.length)l=o.converted[1],d=i(o.converted),d>0?a="green":0>d&&(a="red");else{if("lost"!==t||!o.lost||2!==o.lost.length)return{nominal:s,variation:r,color:a};l=o.lost[1],d=i(o.lost),0>d?a="green":d>0&&(a="red")}return l>0?s="+"+l:0>l&&(s=l),d&&d>0?r="+"+d.toFixed(0)+"%":d&&0>d&&(r=d.toFixed(0)+"%"),{nominal:s,variation:r,color:a}},i=function(e){var t;return t=0!==e[0]?100*(e[1]/e[0]-1):"- "},e.widgetDeferred.resolve(a)}]),e.directive("widgetSalesNumberOfLeads",function(){return{restrict:"A",controller:"WidgetSalesNumberOfLeadsCtrl"}})}.call(this),function(){var e,t=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};e=angular.module("impac.components.widgets.sales-opportunities-funnel",[]),e.controller("WidgetSalesOpportunitiesFunnelCtrl",["$scope","$q","ChartFormatterSvc","$filter","ImpacWidgetsSvc",function(e,i,a,n,s){var r,o,l,d;return d=e.widget,e.orgDeferred=i.defer(),e.paramsPickerDeferred=i.defer(),e.widthDeferred=i.defer(),l=[e.orgDeferred.promise,e.paramsPickerDeferred.promise,e.widthDeferred.promise],r=function(e){var t,i,a;return t=_.mapValues(e,function(e){return e.total}),a=_.compact(_.values(t)),i=_.reduce(a,function(e,t){return null==e&&(e=0),e+t}),null!=i&&i>0},d.initContext=function(){return(e.isDataFound=angular.isDefined(d.content)&&!_.isEmpty(d.content.opps_per_sales_stage)&&r(d.content.opps_per_sales_stage))?(e.statusOptions=_.compact(_.map(d.metadata.sales_stage_selection,function(e){return angular.isDefined(d.content.opps_per_sales_stage[e])?{label:e,selected:!0}:void 0})),angular.forEach(d.content.opps_per_sales_stage,function(i,a){return!d.metadata.sales_stage_selection||t.call(d.metadata.sales_stage_selection,a)>=0?_.isEmpty(d.metadata.sales_stage_selection)?e.statusOptions.push({label:a,selected:!0}):void 0:e.statusOptions.push({label:a,selected:!1})})):void 0},d.processError=function(t){return 404===t.code?e.isDataFound=!1:void 0},e.getImpacColor=function(e){return a.getColor(e)},e.toggleSelectStatus=function(t){return e.selectedStatus=e.selectedStatus&&e.selectedStatus===t?null:t,!d.isExpanded()&&e.selectedStatus?d.toggleExpanded():s.updateWidgetSettings(d,!1)},e.isSelected=function(t){return e.selectedStatus&&t===e.selectedStatus},e.getSelectedOpportunities=function(){return e.isDataFound&&e.selectedStatus?d.content.opps_per_sales_stage[e.selectedStatus].opps:void 0},e.getOppDetails=function(e){var t;return t=[],e.amount&&t.push(n("mnoCurrency")(e.amount.amount,e.amount.currency||"AUD")),e.probability&&t.push("prob. "+e.probability+"%"),t.join(" / ")},o={},o.initialized=!1,o.initialize=function(){return!_.isEmpty(d.content)&&angular.isDefined(d.content.opps_per_sales_stage[d.metadata.selected_status])&&(e.selectedStatus=d.metadata.selected_status),o.initialized=!0},o.toMetadata=function(){return{selected_status:e.selectedStatus}},d.settings.push(o),d.format=function(){var t;return e.isDataFound&&(t=0,angular.forEach(e.statusOptions,function(e){var i;return i=d.content.opps_per_sales_stage[e.label].total,e.selected&&angular.isDefined(i)&&i>t?t=i:void 0}),t>0)?e.funnel=_.compact(_.map(e.statusOptions,function(e){var i,a,n;return n=d.content.opps_per_sales_stage[e.label].total,i=(100*(n/t)-10).toFixed(),a=8>i?92:100-i,e.selected&&angular.isDefined(n)?{status:e.label,number:n,coloredWidth:{width:i+"%"},statusWidth:{width:a+"%"}}:void 0})):void 0},e.widgetDeferred.resolve(l)}]),e.directive("widgetSalesOpportunitiesFunnel",function(){return{restrict:"A",controller:"WidgetSalesOpportunitiesFunnelCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.sales-performance",[]),e.controller("WidgetSalesPerformanceCtrl",["$scope","$q","$filter","ChartFormatterSvc","ImpacWidgetsSvc",function(e,t,i,a,n){var s,r,o;return o=e.widget,e.orgDeferred=t.defer(),e.widthDeferred=t.defer(),e.chartDeferred=t.defer(),r=[e.orgDeferred.promise,e.widthDeferred.promise,e.chartDeferred.promise],o.initContext=function(){return e.isDataFound=angular.isDefined(o.content)&&!_.isEmpty(o.content.assignees),e.isDataFound&&o.metadata.selectedElement?e.selectedElement=_.find(o.content.assignees,function(e){return e.name===o.metadata.selectedElement.name}):void 0},o.processError=function(t){return 404===t.code?e.isDataFound=!1:void 0},e.getWonOpportunities=function(e){return null!=e&&null!=e.opportunities?_.select(e.opportunities,function(e){return e.sales_stage.toLowerCase().match(/won/)}):void 0},e.getLostOpportunities=function(e){return null!=e&&null!=e.opportunities?_.select(e.opportunities,function(e){return!e.sales_stage.toLowerCase().match(/won/)}):void 0},e.getCloseDate=function(e){var t,a;return null!=e&&null!=e.sales_stage_changes&&e.sales_stage_changes.length>0?(a=e.sales_stage_changes[e.sales_stage_changes.length-1].updated_at,a.split(" ").length>0&&(a=a.split(" ")[0]),t=null,null!=o.metadata&&null!=o.metadata.hist_parameters&&(t=o.metadata.hist_parameters.period),i("mnoDate")(a,t)):void 0},e.toggleSelectedElement=function(t){return e.isSelected(t)?(e.selectedElement=null,o.isExpanded()?o.toggleExpanded():n.updateWidgetSettings(o,!1)):(e.selectedElement=angular.copy(t),o.format(),o.isExpanded()?n.updateWidgetSettings(o,!1):o.toggleExpanded())},e.isSelected=function(t){return null!=t&&null!=e.selectedElement&&null!=t.name&&t.name===e.selectedElement.name},s={},s.initialized=!1,s.initialize=function(){return s.initialized=!0},s.toMetadata=function(){return{selectedElement:e.selectedElement}},o.settings.push(s),e.drawTrigger=t.defer(),o.format=function(){var t,n,s,r,l,d,c;return e.isDataFound&&null!=e.selectedElement?(s=angular.copy(e.selectedElement),c=null,null!=o.metadata&&null!=o.metadata.hist_parameters&&(c=o.metadata.hist_parameters.period),r=_.map(o.content.dates,function(e){return i("mnoDate")(e,c)}),l={title:s.name,labels:r,values:s.totals},t=!0,angular.forEach(s.totals,function(e){return t&&(t=e>=0)}),d={scaleBeginAtZero:t,showXLabels:!0},n=a.lineChart([l],d),e.drawTrigger.notify(n)):void 0},e.widgetDeferred.resolve(r)}]),e.directive("widgetSalesPerformance",function(){return{restrict:"A",controller:"WidgetSalesPerformanceCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.sales-segmented-turnover",[]),e.controller("WidgetSalesSegmentedTurnoverCtrl",["$scope","$q","$filter","ChartFormatterSvc",function(e,t,i,a){var n,s;return s=e.widget,e.orgDeferred=t.defer(),e.timeRangeDeferred=t.defer(),e.widthDeferred=t.defer(),e.paramSelectorDeferred=t.defer(),e.chartDeferred=t.defer(),n=[e.orgDeferred.promise,e.timeRangeDeferred.promise,e.widthDeferred.promise,e.paramSelectorDeferred.promise,e.chartDeferred.promise],s.initContext=function(){return(e.isDataFound=!_.isEmpty(s.content)&&!_.isEmpty(s.content.dates)&&!_.isEmpty(s.content.ranges))?(e.filterOptions=[{label:"Gross revenue (incl. taxes)",value:"gross"},{label:"Net revenue (excl. taxes)",value:"net"}],e.filter=angular.copy(_.find(e.filterOptions,function(e){return e.value===s.content.filter})||e.filterOptions[0])):void 0},e.getAnalysis=function(){return e.isDataFound?s.content.ranges[0].percentage+s.content.ranges[1].percentage>50?"Your less expensive products bring you most of your revenue.":s.content.ranges[3].percentage+s.content.ranges[4].percentage>50?"Your most expensive products bring you most of your revenue.":"Your revenue is balanced between your different products segments.":void 0},e.getColorByIndex=function(e){return a.getColor(e)},e.getRangeLabel=function(e){var t;return t=e.split("-"),_.map(t,function(e){return i("mnoCurrency")(e,s.content.currency,!1)}).join(" - ")},e.getMaxRange=function(){var t,i;return e.isDataFound?(t=0,i=s.content.ranges[0],angular.forEach(s.content.ranges,function(e){return e.percentage>t&&(i=angular.copy(e)),t=Math.max(t,e.percentage)}),i):void 0},e.drawTrigger=t.defer(),s.format=function(){var t,i,n;return e.isDataFound?(t={labels:_.map(s.content.ranges,function(e){return e.label}),values:_.map(s.content.ranges,function(e){return e.value})},i={showTooltips:!1,showXLabels:!1,barDatasetSpacing:15},n=a.barChart(t,i),e.drawTrigger.notify(n)):void 0},e.widgetDeferred.resolve(n)}]),e.directive("widgetSalesSegmentedTurnover",function(){return{restrict:"A",controller:"WidgetSalesSegmentedTurnoverCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.sales-summary",[]),e.controller("WidgetSalesSummaryCtrl",["$scope","$q","ChartFormatterSvc",function(e,t,i){var a,n;return n=e.widget,e.orgDeferred=t.defer(),e.chartFiltersDeferred=t.defer(),e.paramSelectorDeferred=t.defer(),e.datesPickerDeferred=t.defer(),e.chartDeferred=t.defer(),a=[e.orgDeferred.promise,e.chartFiltersDeferred.promise,e.paramSelectorDeferred.promise,e.datesPickerDeferred.promise,e.chartDeferred.promise],n.initContext=function(){return e.isDataFound=!_.isEmpty(n.content)&&!_.isEmpty(n.content.hist_parameters),e.filterOptions=[{label:"value sold (incl. taxes)",value:"gross_value_sold"},{label:"value sold (excl. taxes)",value:"net_value_sold"},{label:"quantity sold",value:"quantity_sold"},{label:"value purchased (incl. taxes)",value:"gross_value_purchased"},{label:"value purchased (excl. taxes)",value:"net_value_purchased"},{label:"quantity purchased",value:"quantity_purchased"}],"customer"===n.metadata.criteria&&(e.filterOptions=[e.filterOptions[0],e.filterOptions[1],e.filterOptions[2]]),e.filter=angular.copy(_.find(e.filterOptions,function(e){return e.value===n.metadata.filter})||e.filterOptions[0])},e.drawTrigger=t.defer(),n.format=function(){var t,a,s;return e.isDataFound?(a=_.map(n.content.summary,function(e){var t;return t=e.company?(e.code||e.name||e.location||e.industry||e.customer)+" ("+e.company+")":e.code||e.name||e.location||e.industry||e.customer,{label:t,value:e.total}}),s={percentageInnerCutout:50,tooltipFontSize:12},e.filter.value.indexOf("quantity")>-1&&angular.merge(s,{currency:"hide"}),t=i.pieChart(a,s),e.drawTrigger.notify(t)):void 0},e.widgetDeferred.resolve(a)}]),e.directive("widgetSalesSummary",function(){return{restrict:"A",controller:"WidgetSalesSummaryCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets.sales-top-opportunities",[]),e.controller("WidgetSalesTopOpportunitiesCtrl",["$scope","$q","ChartFormatterSvc","$filter",function(e,t,i,a){var n,s;return s=e.widget,e.orgDeferred=t.defer(),n=[e.orgDeferred.promise],s.initContext=function(){return e.isDataFound=angular.isDefined(s.content)&&!_.isEmpty(s.content.opportunities)},s.processError=function(t){return 404===t.code?e.isDataFound=!1:void 0},e.getOppDetails=function(e){var t;return t=[],e.amount&&t.push(a("mnoCurrency")(e.amount.amount,e.amount.currency||"AUD")),e.probability&&t.push("proba "+e.probability+"%"),e.sales_stage&&t.push(e.sales_stage),t.join(" / ")},e.getOppClass=function(e){switch(e){case 0:return"first";case 1:return"second";case 2:return"second";default:return""}},e.widgetDeferred.resolve(n)}]),e.directive("widgetSalesTopOpportunities",function(){return{restrict:"A",controller:"WidgetSalesTopOpportunitiesCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets-common.data-not-found",[]),e.directive("commonDataNotFound",["$templateCache","$log","$http","ImpacAssets","ImpacTheming","ImpacMainSvc",function(e,t,i,a,n,s){return{restrict:"A",scope:{widgetEngine:"=",onDisplayAlerts:"&"},link:function(e,i){var r,o,l,d;return e.content=n.get().dataNotFoundConfig,r=a.get("dataNotFound"),e.widgetEngine&&r.length>0&&(o=r.split(""),o="/"!==o[o.length-1]?o.concat("/").join(""):o.join(""),d=_.find(i.children().first().children(),function(e){return"not-found-bg"===e.id}),d.onerror=function(){return t.warn("Missing data-not-found image for "+e.widgetEngine),d.remove()},d.src=o+e.widgetEngine+".png"),l=s.config.currentOrganization.has_myob_essentials_only,e.showAlertsTrigger=l&&e.widgetEngine.match(/.*accounts\/.*/),e.hasCallbackUrl=null!=e.content.linkUrlCallback},template:e.get("widgets-common/data-not-found.tmpl.html")}}])}.call(this),function(){var e;e=angular.module("impac.components.widgets-common.editable-title",[]),e.controller("CommonEditableTitleCtrl",["$scope","ImpacWidgetsSvc",function(e,t){var i;return i=e.parentWidget,e.updateName=function(){var e;return 0===i.name.length?(i.name=i.originalName,"Incorrect name"):(e={name:i.name},t.update(i,e).then(function(){return!0},function(){return i.name=i.originalName}))}}]),e.directive("commonEditableTitle",["$templateCache",function(e){return{restrict:"A",scope:{parentWidget:"="},template:e.get("widgets-common/editable-title.tmpl.html"),controller:"CommonEditableTitleCtrl"}}])}.call(this),function(){var e;e=angular.module("impac.components.widgets-common.top-buttons",[]),e.controller("CommonTopButtonsCtrl",["$scope","$rootScope","$log","ImpacWidgetsSvc","ImpacAssets","ImpacUtilities",function(e,t,i,a,n,s){var r;return r=e.parentWidget,e.showConfirmDelete=!1,e.isDeletePopoverLoading=!1,r.isEditMode=!1,e.deleteWidget=function(){return e.isDeletePopoverLoading=!0,a["delete"](r).then(function(){return!0},function(e){return r.errors=s.processRailsError(e)})["finally"](function(){return e.isDeletePopoverLoading=!1})},e.toggleEditMode=function(){return r.isLoading?void 0:r.isEditMode?(r.isEditMode=!1,a.initWidgetSettings(r)):r.isEditMode=!0}}]),e.directive("commonTopButtons",["$templateCache",function(e){return{restrict:"A",scope:{parentWidget:"=",onRefresh:"="},template:e.get("widgets-common/top-buttons.tmpl.html"),controller:"CommonTopButtonsCtrl"}}])}.call(this),function(){var e;e=angular.module("impac.components.widgets-settings.account",[]),e.controller("SettingAccountCtrl",["$scope","$filter",function(e,t){var i,a,n;return n=e.parentWidget,a={},a.key="account",a.isInitialized=!1,a.initialize=function(){return n.selectedAccount=n.selectedAccount||null,null!=n.content&&null!=n.content.account_list&&null!=n.metadata&&null!=n.metadata.account_uid?(n.selectedAccount=_.find(n.content.account_list,function(e){return e.uid===n.metadata.account_uid}),a.isInitialized=!0):void 0},a.toMetadata=function(){return null!=n.selectedAccount?{account_uid:n.selectedAccount.uid}:void 0},i=function(e){var i;return i=e.current_balance||e.balance,t("mnoCurrency")(i,e.currency)},e.formatLabel=function(e){return null!=e.company?e.company+" - "+e.name+" ("+i(e)+")":e.name+" ("+i(e)+")"},n.settings.push(a),e.deferred.resolve(e.parentWidget)}]),e.directive("settingAccount",["$templateCache",function(e){return{restrict:"A",scope:{parentWidget:"=",deferred:"=",label:"@",showLabel:"=?",onAccountSelected:"&"},link:function(e){return e.label?void 0:e.label="Account to monitor"},template:e.get("widgets-settings/account.tmpl.html"),controller:"SettingAccountCtrl"}}])}.call(this),function(){var e;e=angular.module("impac.components.widgets-settings.accounts-list",[]),e.controller("SettingAccountsListCtrl",["$scope","ImpacWidgetsSvc",function(e,t){var i,a;return a=e.parentWidget,a.moveAccountToAnotherList=function(e,i,n,s){return null==s&&(s=!0),_.isEmpty(i)||_.isEmpty(e)?void 0:(n||(n=[]),_.remove(i,function(t){return e.uid===t.uid}),n.push(e),s&&t.updateWidgetSettings(a,!1),null)},i={},i.key="accounts-list",i.initialize=function(){var e;return i.isInitialized=!1,a.remainingAccounts=[],a.selectedAccounts=[],null==a.content||_.isEmpty(a.content.complete_list)?void 0:(a.remainingAccounts=angular.copy(a.content.complete_list),_.isEmpty(a.metadata.accounts_list)||angular.forEach(a.metadata.accounts_list,function(e){var t;return t=_.find(a.content.complete_list,function(t){return t.uid===e}),a.moveAccountToAnotherList(t,a.remainingAccounts,a.selectedAccounts,!1)}),e=angular.copy(a.remainingAccounts),i.isInitialized=!0)},i.toMetadata=function(){return i.isInitialized?{accounts_list:_.map(a.selectedAccounts,function(e){return e.uid})}:void 0},a.settings.push(i),e.deferred.resolve(e.parentWidget)}]),e.directive("settingAccountsList",function(){return{restrict:"A",scope:{parentWidget:"=",deferred:"="},controller:"SettingAccountsListCtrl"}})}.call(this),function(){var e;e=angular.module("impac.components.widgets-settings.chart-filters",[]),e.controller("SettingChartFiltersCtrl",["$scope",function(e){var t,i;return i=e.parentWidget,t={},t.key="chart-filters",t.isInitialized=!1,t.initialize=function(){return null!=i.content&&null!=i.content.chart_filter&&(e.filterCriteria=i.content.chart_filter.criteria)?(e.maxEntities=i.content.chart_filter.max,e.entityType=i.content.chart_filter.entity_type,e.filterLabel=i.content.chart_filter.filter_label.replace(/_/g," "),"number"===e.filterCriteria?(e.filterValuePercentage=80,e.filterValueNumber=i.content.chart_filter.value):(e.filterValuePercentage=i.content.chart_filter.value,e.filterValueNumber=Math.round(e.maxEntities/2)),t.isInitialized=!0):void 0},t.toMetadata=function(){var t;return null!=i.content&&null!=i.content.chart_filter?(t="percentage"===e.filterCriteria?e.filterValuePercentage:e.filterValueNumber,{chart_filter:{criteria:e.filterCriteria,value:t}}):{}},i.settings.push(t),e.deferred.resolve(e.parentWidget)}]),e.directive("settingChartFilters",["$templateCache",function(e){return{restrict:"A",scope:{parentWidget:"=",deferred:"="},template:e.get("widgets-settings/chart-filters.tmpl.html"),controller:"SettingChartFiltersCtrl"}}])}.call(this),function(){var e;e=angular.module("impac.components.widgets-settings.dates-picker",[]),e.directive("settingDatesPicker",["$templateCache","$filter","ImpacWidgetsSvc","$timeout",function(e,t,i,a){return{restrict:"A",scope:{parentWidget:"=",deferred:"=",fromDate:"=from",toDate:"=to",keepToday:"="},template:e.get("widgets-settings/dates-picker.tmpl.html"),link:function(e){var n,s,r;return r=e.parentWidget,s={},s.key="dates-picker",e.calendarFrom={opened:!1,value:new Date((new Date).getFullYear(),0,1),toggle:function(){return e.calendarFrom.opened=!e.calendarFrom.opened,e.calendarTo.opened=!1}},e.calendarTo={opened:!1,value:new Date,toggle:function(){return e.calendarFrom.opened=!1,e.calendarTo.opened=!e.calendarTo.opened}},s.initialize=function(){return a(function(){var t,i,a,n,s;return e.changed=!1,Date.parse(e.fromDate)?(a=e.fromDate.split("-"),s=a[0],i=a[1]-1,t=a[2],e.calendarFrom.value=new Date(s,i,t)):e.calendarFrom.value=new Date((new Date).getFullYear(),0,1),Date.parse(e.toDate)&&!e.keepToday?(n=e.toDate.split("-"),s=n[0],i=n[1]-1,t=n[2],e.calendarTo.value=new Date(s,i,t)):e.calendarTo.value=new Date})},n=function(){return e.calendarTo.value.getFullYear()===(new Date).getFullYear()&&e.calendarTo.value.getMonth()===(new Date).getMonth()&&e.calendarTo.value.getDate()===(new Date).getDate()},s.toMetadata=function(){return{hist_parameters:{from:t("date")(e.calendarFrom.value,"yyyy-MM-dd"),to:t("date")(e.calendarTo.value,"yyyy-MM-dd"),period:"RANGE",keep_today:n()}}},e.showApplyButton=function(){return e.changed=!0},e.applyChanges=function(){return i.updateWidgetSettings(r,!0),e.changed=!1},r.settings.push(s),e.deferred.resolve(s)}}}])}.call(this),function(){var module;module=angular.module("impac.components.widgets-settings.formula",[]),module.controller("SettingFormulaCtrl",["$scope","$filter",function($scope,$filter){var authorized_regex,evaluateFormula,formatFormula,getFormula,setting,w;return w=$scope.parentWidget,w.formula="",authorized_regex=new RegExp("^(\\{|\\d|\\}|\\/|\\+|-|\\*|\\(|\\)|\\s|\\.)*$"),setting={},setting.key="formula",setting.isInitialized=!1,setting.initialize=function(){return null!=w.metadata&&null!=w.metadata.formula?(w.formula=w.metadata.formula,evaluateFormula(),setting.isInitialized=!0):w.formula=""},setting.toMetadata=function(){return evaluateFormula(),w.isFormulaCorrect?{formula:w.formula}:{formula:""}},getFormula=function(){return w.formula},w.formatAmount=function(e){return $filter("mnoCurrency")(e.current_balance,e.currency)},$scope.$watch(getFormula,function(){return evaluateFormula()}),evaluateFormula=function(){var e,error,i,legend,str;str=angular.copy(w.formula),legend=angular.copy(w.formula),i=1,angular.forEach(w.selectedAccounts,function(e){var t;return t="\\{"+i+"\\}",str=str.replace(new RegExp(t,"g")," "+e.current_balance_no_format+" "),legend=legend.replace(new RegExp(t,"g"),e.name),i++}),str.match(authorized_regex)||(w.isFormulaCorrect=!1,w.evaluatedFormula="invalid expression");try{w.evaluatedFormula=eval(str).toFixed(2)}catch(error){e=error,w.evaluatedFormula="invalid expression"}return null==w.evaluatedFormula||"invalid expression"===w.evaluatedFormula||"Infinity"===w.evaluatedFormula||"-Infinity"===w.evaluatedFormula?w.isFormulaCorrect=!1:(formatFormula(),w.legend=legend,w.isFormulaCorrect=!0)},formatFormula=function(){var e,t;return!w.formula.match(/\//g)&&null!=w.selectedAccounts&&(t=w.selectedAccounts[0])&&(e=t.currency)?w.evaluatedFormula=$filter("mnoCurrency")(w.evaluatedFormula,e):void 0},w.settings.push(setting),$scope.deferred.resolve($scope.parentWidget)}]),module.directive("settingFormula",function(){return{restrict:"A",scope:{parentWidget:"=",deferred:"="},controller:"SettingFormulaCtrl"}})}.call(this),function(){var e,t=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};e=angular.module("impac.components.widgets-settings.hist-mode",[]),e.controller("SettingHistModeCtrl",["$scope","ImpacWidgetsSvc",function(e,i){var a,n;return n=e.parentWidget,n.isHistoryMode=!1,e.toggleHistMode=function(a){var s;if(!(n.isHistoryMode&&"history"===a||!n.isHistoryMode&&"current"===a))return n.isHistoryMode=!n.isHistoryMode,i.updateWidgetSettings(n,!1),s=e.onToggle(),t.call(angular.isDefined(e.onToggle),s)>=0},a={},a.key="hist-mode",a.isInitialized=!1,a.initialize=function(){var e;return null!=n.content&&null!=n.content.hist_parameters&&(e=n.content.hist_parameters.mode)?(n.isHistoryMode="history"===e?!0:!1,a.isInitialized=!0):void 0},a.toMetadata=function(){var e;return e=n.isHistoryMode?"history":"current",{hist_parameters:{mode:e}}},n.settings.push(a),e.deferred.resolve(e.parentWidget)}]),e.directive("settingHistMode",["$templateCache",function(e){return{restrict:"A",scope:{parentWidget:"=",deferred:"=",onToggle:"&"},template:e.get("widgets-settings/hist-mode.tmpl.html"),controller:"SettingHistModeCtrl"}}])}.call(this),function(){var e;e=angular.module("impac.components.widgets-settings.limit-entries",[]),e.controller("SettingLimitEntriesCtrl",["$scope",function(e){var t;return t={},t.key="limit-entries",t.initialize=function(){return!0},t.toMetadata=function(){return{limit_entries:e.selected}},e.parentWidget.settings.push(t),e.deferred.resolve(t)}]),e.directive("settingLimitEntries",["$templateCache","ImpacWidgetsSvc",function(e,t){return{restrict:"A",scope:{parentWidget:"=",deferred:"=",selected:"=",max:"=?",options:"=?",entriesLabel:"=?"},link:function(e){return null!=e.options&&e.options.length>0||(e.options=[5,15,50]),e.selectOption=function(i){return e.selected=i,t.updateWidgetSettings(e.parentWidget,!1)},e.isOptionValid=function(t){return null==e.max||t<e.max}},controller:"SettingLimitEntriesCtrl",template:e.get("widgets-settings/limit-entries.tmpl.html")}}])}.call(this),function(){var e;e=angular.module("impac.components.widgets-settings.organizations",[]),e.controller("SettingOrganizationsCtrl",["$scope","$log","ImpacDashboardsSvc",function(e,t,i){var a,n;return n=e.parentWidget,n.selectedOrganizations={},e.isOrganizationSelected=function(e){return!!n.selectedOrganizations[e]},e.toggleSelectOrganization=function(e){return n.selectedOrganizations[e]=!n.selectedOrganizations[e]},a={},a.key="organizations",a.isInitialized=!1,a.initialize=function(){return i.load().then(function(t){var i,s,r,o;if(e.dashboardOrganizations=t.currentDashboard.data_sources,null!=n.metadata&&null!=n.metadata.organization_ids){for(o=e.dashboardOrganizations,i=0,s=o.length;s>i;i++)r=o[i],n.selectedOrganizations[r.uid]=_.contains(n.metadata.organization_ids,r.uid);return a.isInitialized=!0}})},a.toMetadata=function(){var t;return t=_.compact(_.map(n.selectedOrganizations,function(e,t){return e?t:void 0})),_.isEmpty(t)&&(t=[_.first(e.dashboardOrganizations).uid]),{organization_ids:t}},n.settings.push(a),e.deferred.resolve(e.parentWidget)}]),e.directive("settingOrganizations",["$templateCache",function(e){return{restrict:"A",scope:{parentWidget:"=",deferred:"="},template:e.get("widgets-settings/organizations.tmpl.html"),controller:"SettingOrganizationsCtrl"}}])}.call(this),function(){var e;e=angular.module("impac.components.widgets-settings.param-selector",[]),e.controller("SettingParamSelectorCtrl",["$scope","ImpacWidgetsSvc",function(e,t){var i,a;return e.showOptions=!1,e.toggleShowOptions=function(){return e.showOptions=!e.showOptions},e.selectOption=function(i){return i.value!==e.selected.value&&(angular.extend(e.selected,i),e.noReload||(e.parentWidget.isLoading=!0),t.updateWidgetSettings(e.parentWidget,!e.noReload),angular.isDefined(e.onSelect)&&e.onSelect()),e.toggleShowOptions()},e.getTruncateValue=function(){return parseInt(e.truncateNo)||20},a=e.parentWidget,i={},i.key="param-selector",i.isInitialized=!1,i.initialize=function(){return null!=a.content?i.isInitialized=!0:void 0},i.toMetadata=function(){var t;return t={},_.isEmpty(e.selected)||(t[e.param]=e.selected.value),t},a.settings.push(i),e.deferred.resolve(e.parentWidget)}]),e.directive("settingParamSelector",["$templateCache",function(e){return{restrict:"A",scope:{parentWidget:"=",deferred:"=",param:"@",options:"=",selected:"=",truncateNo:"@",onSelect:"&"},link:function(e,t,i){return e.noReload="undefined"!=typeof i.noReload,e.truncateNo=i.truncateNo||20},template:e.get("widgets-settings/param-selector.tmpl.html"),controller:"SettingParamSelectorCtrl"}}])}.call(this),function(){var e;e=angular.module("impac.components.widgets-settings.params-checkboxes",[]),e.controller("SettingParamsCheckboxesCtrl",["$scope",function(e){var t,i;return i=e.parentWidget,t={},t.key="params-checkboxes",t.initialize=function(){},t.toMetadata=function(){var t;return t={},t[e.param]=_.map(e.options,function(e){return{id:e.id,value:e.value}}),t},i.settings.push(t),e.deferred.resolve(e.parentWidget)}]),e.directive("settingParamsCheckboxes",["$templateCache",function(e){return{restrict:"A",scope:{parentWidget:"=",deferred:"=",param:"@",options:"="},template:e.get("widgets-settings/params-checkboxes.tmpl.html"),controller:"SettingParamsCheckboxesCtrl"}}])}.call(this),function(){var e;e=angular.module("impac.components.widgets-settings.params-picker",[]),e.controller("SettingParamsPickerCtrl",["$scope",function(e){var t,i;return i=e.parentWidget,t={},t.key="params-picker",t.isInitialized=!1,t.initialize=function(){return e.sortableOptions={"ui-floating":!0,tolerance:"pointer"},_.isEmpty(e.options)?t.isInitialized=!0:void 0},t.toMetadata=function(){var t;return t={},t[e.param]=_.compact(_.map(e.options,function(e){return e.selected?e.label:void 0})),t},i.settings.push(t),e.deferred.resolve(e.parentWidget)}]),e.directive("settingParamsPicker",["$templateCache",function(e){return{restrict:"A",scope:{parentWidget:"=",deferred:"=",param:"@",options:"="},link:function(e){return e.formattedParam=e.param.replace("_"," ")},template:e.get("widgets-settings/params-picker.tmpl.html"),controller:"SettingParamsPickerCtrl"}}])}.call(this),function(){var e;e=angular.module("impac.components.widgets-settings.time-range",[]),e.controller("SettingTimeRangeCtrl",["$scope","$log",function(e){var t,i;return i=e.parentWidget,e.numberOfPeriods=(new Date).getMonth()+1,e.selectedPeriod="MONTHLY",e.PERIODS=["DAILY","WEEKLY","MONTHLY","QUARTERLY","YEARLY"],e.periodToUnit=function(){var t,i,a;return t=e.numberOfPeriods,i=e.selectedPeriod,a="DAILY"!==i?i.substring(0,i.length-2).toLowerCase():"day",t>1&&(a=a.concat("s")),a},t={},t.key="time-range",t.isInitialized=!1,t.initialize=function(){var a;return null!=i.metadata&&(a=i.metadata.hist_parameters)?(null!=a.period&&(e.selectedPeriod=a.period),null!=a.number_of_periods&&(e.numberOfPeriods=a.number_of_periods),t.isInitialized=!0):void 0},t.toMetadata=function(){return{hist_parameters:{period:e.selectedPeriod,number_of_periods:e.numberOfPeriods}}},i.settings||(i.settings=[]),i.settings.push(t),e.deferred.resolve(e.parentWidget)}]),e.directive("settingTimeRange",["$templateCache",function(e){return{restrict:"A",scope:{parentWidget:"=",deferred:"="},template:e.get("widgets-settings/time-range.tmpl.html"),controller:"SettingTimeRangeCtrl"}}])}.call(this),function(){var e;e=angular.module("impac.components.widgets-settings.width",[]),e.controller("SettingWidthCtrl",["$scope","$element","$timeout","$log","ImpacWidgetsSvc",function(e,t,i,a,n){var s,r,o,l,d,c,u;for(u=e.parentWidget,c={},c.key="width",c.isInitialized=!1,d=t.parents(),o=0,l=d.length;l>o;o++)if(s=d[o],angular.element(s).hasClass("content")){e.contentElements=angular.element(s).children();break}return r=function(e){var t,a;if(e&&e.length>0){for(t=0,a=e.length;a>t;t++)s=e[t],angular.element(s).animate({opacity:0},0);return i(function(){var t,i,a;for(a=[],t=0,i=e.length;i>t;t++)s=e[t],a.push(angular.element(s).animate({opacity:1},200));return a},300)}},u.toggleExpanded=function(){return e.expanded=!e.expanded,n.updateWidgetSettings(u,!1),r(e.contentElements),u.width=e.expanded?parseInt(e.max):parseInt(e.min)},u.isExpanded=function(){return e.expanded},c.initialize=function(){return null!=u.width?(e.expanded=u.width===parseInt(e.max),c.isInitialized=!0):void 0},c.toMetadata=function(){var t;return t=e.expanded?e.max:e.min,{width:parseInt(t)}},u.settings.push(c),e.deferred.resolve(e.parentWidget)}]),e.directive("settingWidth",["$templateCache",function(e){return{restrict:"A",scope:{parentWidget:"=",deferred:"=",min:"@",max:"@"},template:e.get("widgets-settings/width.tmpl.html"),controller:"SettingWidthCtrl"}
}])}.call(this),!function e(t,i,a){function n(r,o){if(!i[r]){if(!t[r]){var l="function"==typeof require&&require;if(!o&&l)return l(r,!0);if(s)return s(r,!0);var d=new Error("Cannot find module '"+r+"'");throw d.code="MODULE_NOT_FOUND",d}var c=i[r]={exports:{}};t[r][0].call(c.exports,function(e){var i=t[r][1][e];return n(i?i:e)},c,c.exports,e,t,i,a)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<a.length;r++)n(a[r]);return n}({1:[function(e,t){!function(){var i=e("color-convert"),a=e("color-string"),n=function(e){if(e instanceof n)return e;if(!(this instanceof n))return new n(e);if(this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},"string"==typeof e){var t=a.getRgba(e);if(t)this.setValues("rgb",t);else if(t=a.getHsla(e))this.setValues("hsl",t);else{if(!(t=a.getHwb(e)))throw new Error('Unable to parse color from string "'+e+'"');this.setValues("hwb",t)}}else if("object"==typeof e){var t=e;if(void 0!==t.r||void 0!==t.red)this.setValues("rgb",t);else if(void 0!==t.l||void 0!==t.lightness)this.setValues("hsl",t);else if(void 0!==t.v||void 0!==t.value)this.setValues("hsv",t);else if(void 0!==t.w||void 0!==t.whiteness)this.setValues("hwb",t);else{if(void 0===t.c&&void 0===t.cyan)throw new Error("Unable to parse color from object "+JSON.stringify(e));this.setValues("cmyk",t)}}};n.prototype={rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){return 1!==this.values.alpha?this.values.hwb.concat([this.values.alpha]):this.values.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var e=this.values.rgb;return e.concat([this.values.alpha])},hslaArray:function(){var e=this.values.hsl;return e.concat([this.values.alpha])},alpha:function(e){return void 0===e?this.values.alpha:(this.setValues("alpha",e),this)},red:function(e){return this.setChannel("rgb",0,e)},green:function(e){return this.setChannel("rgb",1,e)},blue:function(e){return this.setChannel("rgb",2,e)},hue:function(e){return this.setChannel("hsl",0,e)},saturation:function(e){return this.setChannel("hsl",1,e)},lightness:function(e){return this.setChannel("hsl",2,e)},saturationv:function(e){return this.setChannel("hsv",1,e)},whiteness:function(e){return this.setChannel("hwb",1,e)},blackness:function(e){return this.setChannel("hwb",2,e)},value:function(e){return this.setChannel("hsv",2,e)},cyan:function(e){return this.setChannel("cmyk",0,e)},magenta:function(e){return this.setChannel("cmyk",1,e)},yellow:function(e){return this.setChannel("cmyk",2,e)},black:function(e){return this.setChannel("cmyk",3,e)},hexString:function(){return a.hexString(this.values.rgb)},rgbString:function(){return a.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return a.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return a.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return a.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return a.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return a.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return a.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){return this.values.rgb[0]<<16|this.values.rgb[1]<<8|this.values.rgb[2]},luminosity:function(){for(var e=this.values.rgb,t=[],i=0;i<e.length;i++){var a=e[i]/255;t[i]=.03928>=a?a/12.92:Math.pow((a+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),i=e.luminosity();return t>i?(t+.05)/(i+.05):(i+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},dark:function(){var e=this.values.rgb,t=(299*e[0]+587*e[1]+114*e[2])/1e3;return 128>t},light:function(){return!this.dark()},negate:function(){for(var e=[],t=0;3>t;t++)e[t]=255-this.values.rgb[t];return this.setValues("rgb",e),this},lighten:function(e){return this.values.hsl[2]+=this.values.hsl[2]*e,this.setValues("hsl",this.values.hsl),this},darken:function(e){return this.values.hsl[2]-=this.values.hsl[2]*e,this.setValues("hsl",this.values.hsl),this},saturate:function(e){return this.values.hsl[1]+=this.values.hsl[1]*e,this.setValues("hsl",this.values.hsl),this},desaturate:function(e){return this.values.hsl[1]-=this.values.hsl[1]*e,this.setValues("hsl",this.values.hsl),this},whiten:function(e){return this.values.hwb[1]+=this.values.hwb[1]*e,this.setValues("hwb",this.values.hwb),this},blacken:function(e){return this.values.hwb[2]+=this.values.hwb[2]*e,this.setValues("hwb",this.values.hwb),this},greyscale:function(){var e=this.values.rgb,t=.3*e[0]+.59*e[1]+.11*e[2];return this.setValues("rgb",[t,t,t]),this},clearer:function(e){return this.setValues("alpha",this.values.alpha-this.values.alpha*e),this},opaquer:function(e){return this.setValues("alpha",this.values.alpha+this.values.alpha*e),this},rotate:function(e){var t=this.values.hsl[0];return t=(t+e)%360,t=0>t?360+t:t,this.values.hsl[0]=t,this.setValues("hsl",this.values.hsl),this},mix:function(e,t){t=1-(null==t?.5:t);for(var i=2*t-1,a=this.alpha()-e.alpha(),n=((i*a==-1?i:(i+a)/(1+i*a))+1)/2,s=1-n,r=this.rgbArray(),o=e.rgbArray(),l=0;l<r.length;l++)r[l]=r[l]*n+o[l]*s;this.setValues("rgb",r);var d=this.alpha()*t+e.alpha()*(1-t);return this.setValues("alpha",d),this},toJSON:function(){return this.rgb()},clone:function(){return new n(this.rgb())}},n.prototype.getValues=function(e){for(var t={},i=0;i<e.length;i++)t[e.charAt(i)]=this.values[e][i];return 1!=this.values.alpha&&(t.a=this.values.alpha),t},n.prototype.setValues=function(e,t){var a={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},n={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},s=1;if("alpha"==e)s=t;else if(t.length)this.values[e]=t.slice(0,e.length),s=t[e.length];else if(void 0!==t[e.charAt(0)]){for(var r=0;r<e.length;r++)this.values[e][r]=t[e.charAt(r)];s=t.a}else if(void 0!==t[a[e][0]]){for(var o=a[e],r=0;r<e.length;r++)this.values[e][r]=t[o[r]];s=t.alpha}if(this.values.alpha=Math.max(0,Math.min(1,void 0!==s?s:this.values.alpha)),"alpha"!=e){for(var r=0;r<e.length;r++){var l=Math.max(0,Math.min(n[e][r],this.values[e][r]));this.values[e][r]=Math.round(l)}for(var d in a){d!=e&&(this.values[d]=i[e][d](this.values[e]));for(var r=0;r<d.length;r++){var l=Math.max(0,Math.min(n[d][r],this.values[d][r]));this.values[d][r]=Math.round(l)}}return!0}},n.prototype.setSpace=function(e,t){var i=t[0];return void 0===i?this.getValues(e):("number"==typeof i&&(i=Array.prototype.slice.call(t)),this.setValues(e,i),this)},n.prototype.setChannel=function(e,t,i){return void 0===i?this.values[e][t]:(this.values[e][t]=i,this.setValues(e,this.values[e]),this)},window.Color=t.exports=n}()},{"color-convert":3,"color-string":4}],2:[function(e,t){function i(e){var t,i,a,n=e[0]/255,s=e[1]/255,r=e[2]/255,o=Math.min(n,s,r),l=Math.max(n,s,r),d=l-o;return l==o?t=0:n==l?t=(s-r)/d:s==l?t=2+(r-n)/d:r==l&&(t=4+(n-s)/d),t=Math.min(60*t,360),0>t&&(t+=360),a=(o+l)/2,i=l==o?0:.5>=a?d/(l+o):d/(2-l-o),[t,100*i,100*a]}function a(e){var t,i,a,n=e[0],s=e[1],r=e[2],o=Math.min(n,s,r),l=Math.max(n,s,r),d=l-o;return i=0==l?0:d/l*1e3/10,l==o?t=0:n==l?t=(s-r)/d:s==l?t=2+(r-n)/d:r==l&&(t=4+(n-s)/d),t=Math.min(60*t,360),0>t&&(t+=360),a=l/255*1e3/10,[t,i,a]}function n(e){var t=e[0],a=e[1],n=e[2],s=i(e)[0],r=1/255*Math.min(t,Math.min(a,n)),n=1-1/255*Math.max(t,Math.max(a,n));return[s,100*r,100*n]}function s(e){var t,i,a,n,s=e[0]/255,r=e[1]/255,o=e[2]/255;return n=Math.min(1-s,1-r,1-o),t=(1-s-n)/(1-n)||0,i=(1-r-n)/(1-n)||0,a=(1-o-n)/(1-n)||0,[100*t,100*i,100*a,100*n]}function o(e){return Z[JSON.stringify(e)]}function l(e){var t=e[0]/255,i=e[1]/255,a=e[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92;var n=.4124*t+.3576*i+.1805*a,s=.2126*t+.7152*i+.0722*a,r=.0193*t+.1192*i+.9505*a;return[100*n,100*s,100*r]}function d(e){var t,i,a,n=l(e),s=n[0],r=n[1],o=n[2];return s/=95.047,r/=100,o/=108.883,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,t=116*r-16,i=500*(s-r),a=200*(r-o),[t,i,a]}function c(e){return O(d(e))}function u(e){var t,i,a,n,s,r=e[0]/360,o=e[1]/100,l=e[2]/100;if(0==o)return s=255*l,[s,s,s];i=.5>l?l*(1+o):l+o-l*o,t=2*l-i,n=[0,0,0];for(var d=0;3>d;d++)a=r+1/3*-(d-1),0>a&&a++,a>1&&a--,s=1>6*a?t+6*(i-t)*a:1>2*a?i:2>3*a?t+(i-t)*(2/3-a)*6:t,n[d]=255*s;return n}function h(e){var t,i,a=e[0],n=e[1]/100,s=e[2]/100;return s*=2,n*=1>=s?s:2-s,i=(s+n)/2,t=2*n/(s+n),[a,100*t,100*i]}function p(e){return n(u(e))}function m(e){return s(u(e))}function f(e){return o(u(e))}function v(e){var t=e[0]/60,i=e[1]/100,a=e[2]/100,n=Math.floor(t)%6,s=t-Math.floor(t),r=255*a*(1-i),o=255*a*(1-i*s),l=255*a*(1-i*(1-s)),a=255*a;switch(n){case 0:return[a,l,r];case 1:return[o,a,r];case 2:return[r,a,l];case 3:return[r,o,a];case 4:return[l,r,a];case 5:return[a,r,o]}}function w(e){var t,i,a=e[0],n=e[1]/100,s=e[2]/100;return i=(2-n)*s,t=n*s,t/=1>=i?i:2-i,t=t||0,i/=2,[a,100*t,100*i]}function y(e){return n(v(e))}function x(e){return s(v(e))}function D(e){return o(v(e))}function C(e){var t,i,a,n,s=e[0]/360,o=e[1]/100,l=e[2]/100,d=o+l;switch(d>1&&(o/=d,l/=d),t=Math.floor(6*s),i=1-l,a=6*s-t,0!=(1&t)&&(a=1-a),n=o+a*(i-o),t){default:case 6:case 0:r=i,g=n,b=o;break;case 1:r=n,g=i,b=o;break;case 2:r=o,g=i,b=n;break;case 3:r=o,g=n,b=i;break;case 4:r=n,g=o,b=i;break;case 5:r=i,g=o,b=n}return[255*r,255*g,255*b]}function _(e){return i(C(e))}function S(e){return a(C(e))}function k(e){return s(C(e))}function E(e){return o(C(e))}function A(e){var t,i,a,n=e[0]/100,s=e[1]/100,r=e[2]/100,o=e[3]/100;return t=1-Math.min(1,n*(1-o)+o),i=1-Math.min(1,s*(1-o)+o),a=1-Math.min(1,r*(1-o)+o),[255*t,255*i,255*a]}function M(e){return i(A(e))}function F(e){return a(A(e))}function T(e){return n(A(e))}function I(e){return o(A(e))}function W(e){var t,i,a,n=e[0]/100,s=e[1]/100,r=e[2]/100;return t=3.2406*n+-1.5372*s+r*-.4986,i=n*-.9689+1.8758*s+.0415*r,a=.0557*n+s*-.204+1.057*r,t=t>.0031308?1.055*Math.pow(t,1/2.4)-.055:t=12.92*t,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i=12.92*i,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=12.92*a,t=Math.min(Math.max(0,t),1),i=Math.min(Math.max(0,i),1),a=Math.min(Math.max(0,a),1),[255*t,255*i,255*a]}function z(e){var t,i,a,n=e[0],s=e[1],r=e[2];return n/=95.047,s/=100,r/=108.883,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,t=116*s-16,i=500*(n-s),a=200*(s-r),[t,i,a]}function L(e){return O(z(e))}function P(e){var t,i,a,n,s=e[0],r=e[1],o=e[2];return 8>=s?(i=100*s/903.3,n=7.787*(i/100)+16/116):(i=100*Math.pow((s+16)/116,3),n=Math.pow(i/100,1/3)),t=.008856>=t/95.047?t=95.047*(r/500+n-16/116)/7.787:95.047*Math.pow(r/500+n,3),a=.008859>=a/108.883?a=108.883*(n-o/200-16/116)/7.787:108.883*Math.pow(n-o/200,3),[t,i,a]}function O(e){var t,i,a,n=e[0],s=e[1],r=e[2];return t=Math.atan2(r,s),i=360*t/2/Math.PI,0>i&&(i+=360),a=Math.sqrt(s*s+r*r),[n,a,i]}function R(e){return W(P(e))}function $(e){var t,i,a,n=e[0],s=e[1],r=e[2];return a=r/360*2*Math.PI,t=s*Math.cos(a),i=s*Math.sin(a),[n,t,i]}function V(e){return P($(e))}function B(e){return R($(e))}function N(e){return X[e]}function H(e){return i(N(e))}function q(e){return a(N(e))}function j(e){return n(N(e))}function Y(e){return s(N(e))}function U(e){return d(N(e))}function K(e){return l(N(e))}t.exports={rgb2hsl:i,rgb2hsv:a,rgb2hwb:n,rgb2cmyk:s,rgb2keyword:o,rgb2xyz:l,rgb2lab:d,rgb2lch:c,hsl2rgb:u,hsl2hsv:h,hsl2hwb:p,hsl2cmyk:m,hsl2keyword:f,hsv2rgb:v,hsv2hsl:w,hsv2hwb:y,hsv2cmyk:x,hsv2keyword:D,hwb2rgb:C,hwb2hsl:_,hwb2hsv:S,hwb2cmyk:k,hwb2keyword:E,cmyk2rgb:A,cmyk2hsl:M,cmyk2hsv:F,cmyk2hwb:T,cmyk2keyword:I,keyword2rgb:N,keyword2hsl:H,keyword2hsv:q,keyword2hwb:j,keyword2cmyk:Y,keyword2lab:U,keyword2xyz:K,xyz2rgb:W,xyz2lab:z,xyz2lch:L,lab2xyz:P,lab2rgb:R,lab2lch:O,lch2lab:$,lch2xyz:V,lch2rgb:B};var X={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Z={};for(var Q in X)Z[JSON.stringify(X[Q])]=Q},{}],3:[function(e,t){var i=e("./conversions"),a=function(){return new l};for(var n in i){a[n+"Raw"]=function(e){return function(t){return"number"==typeof t&&(t=Array.prototype.slice.call(arguments)),i[e](t)}}(n);var s=/(\w+)2(\w+)/.exec(n),r=s[1],o=s[2];a[r]=a[r]||{},a[r][o]=a[n]=function(e){return function(t){"number"==typeof t&&(t=Array.prototype.slice.call(arguments));var a=i[e](t);if("string"==typeof a||void 0===a)return a;for(var n=0;n<a.length;n++)a[n]=Math.round(a[n]);return a}}(n)}var l=function(){this.convs={}};l.prototype.routeSpace=function(e,t){var i=t[0];return void 0===i?this.getValues(e):("number"==typeof i&&(i=Array.prototype.slice.call(t)),this.setValues(e,i))},l.prototype.setValues=function(e,t){return this.space=e,this.convs={},this.convs[e]=t,this},l.prototype.getValues=function(e){var t=this.convs[e];if(!t){var i=this.space,n=this.convs[i];t=a[i][e](n),this.convs[e]=t}return t},["rgb","hsl","hsv","cmyk","keyword"].forEach(function(e){l.prototype[e]=function(){return this.routeSpace(e,arguments)}}),t.exports=a},{"./conversions":2}],4:[function(e,t){function i(e){if(e){var t=/^#([a-fA-F0-9]{3})$/,i=/^#([a-fA-F0-9]{6})$/,a=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,n=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,s=/(\w+)/,r=[0,0,0],o=1,l=e.match(t);if(l){l=l[1];for(var d=0;d<r.length;d++)r[d]=parseInt(l[d]+l[d],16)}else if(l=e.match(i)){l=l[1];for(var d=0;d<r.length;d++)r[d]=parseInt(l.slice(2*d,2*d+2),16)}else if(l=e.match(a)){for(var d=0;d<r.length;d++)r[d]=parseInt(l[d+1]);o=parseFloat(l[4])}else if(l=e.match(n)){for(var d=0;d<r.length;d++)r[d]=Math.round(2.55*parseFloat(l[d+1]));o=parseFloat(l[4])}else if(l=e.match(s)){if("transparent"==l[1])return[0,0,0,0];if(r=w[l[1]],!r)return}for(var d=0;d<r.length;d++)r[d]=v(r[d],0,255);return o=o||0==o?v(o,0,1):1,r[3]=o,r}}function a(e){if(e){var t=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,i=e.match(t);if(i){var a=parseFloat(i[4]),n=v(parseInt(i[1]),0,360),s=v(parseFloat(i[2]),0,100),r=v(parseFloat(i[3]),0,100),o=v(isNaN(a)?1:a,0,1);return[n,s,r,o]}}}function n(e){if(e){var t=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,i=e.match(t);if(i){var a=parseFloat(i[4]),n=v(parseInt(i[1]),0,360),s=v(parseFloat(i[2]),0,100),r=v(parseFloat(i[3]),0,100),o=v(isNaN(a)?1:a,0,1);return[n,s,r,o]}}}function s(e){var t=i(e);return t&&t.slice(0,3)}function r(e){var t=a(e);return t&&t.slice(0,3)}function o(e){var t=i(e);return t?t[3]:(t=a(e))?t[3]:(t=n(e))?t[3]:void 0}function l(e){return"#"+b(e[0])+b(e[1])+b(e[2])}function d(e,t){return 1>t||e[3]&&e[3]<1?c(e,t):"rgb("+e[0]+", "+e[1]+", "+e[2]+")"}function c(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+t+")"}function u(e,t){if(1>t||e[3]&&e[3]<1)return g(e,t);var i=Math.round(e[0]/255*100),a=Math.round(e[1]/255*100),n=Math.round(e[2]/255*100);return"rgb("+i+"%, "+a+"%, "+n+"%)"}function g(e,t){var i=Math.round(e[0]/255*100),a=Math.round(e[1]/255*100),n=Math.round(e[2]/255*100);return"rgba("+i+"%, "+a+"%, "+n+"%, "+(t||e[3]||1)+")"}function h(e,t){return 1>t||e[3]&&e[3]<1?p(e,t):"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)"}function p(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+t+")"}function m(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+(void 0!==t&&1!==t?", "+t:"")+")"}function f(e){return y[e.slice(0,3)]}function v(e,t,i){return Math.min(Math.max(t,e),i)}function b(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}var w=e("color-name");t.exports={getRgba:i,getHsla:a,getRgb:s,getHsl:r,getHwb:n,getAlpha:o,hexString:l,rgbString:d,rgbaString:c,percentString:u,percentaString:g,hslString:h,hslaString:p,hwbString:m,keyword:f};var y={};for(var x in w)y[w[x]]=x},{"color-name":5}],5:[function(e,t){t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}]},{},[1]),function(){"use strict";var e=this,t=e.Chart,i=function(e,t){this.config=t,e.length&&e[0].getContext&&(e=e[0]),e.getContext&&(e=e.getContext("2d")),this.ctx=e,this.canvas=e.canvas,this.width=e.canvas.width||parseInt(i.helpers.getStyle(e.canvas,"width"))||i.helpers.getMaximumWidth(e.canvas),this.height=e.canvas.height||parseInt(i.helpers.getStyle(e.canvas,"height"))||i.helpers.getMaximumHeight(e.canvas),this.aspectRatio=this.width/this.height,(isNaN(this.aspectRatio)||isFinite(this.aspectRatio)===!1)&&(this.aspectRatio=void 0!==t.aspectRatio?t.aspectRatio:2),this.originalCanvasStyleWidth=e.canvas.style.width,this.originalCanvasStyleHeight=e.canvas.style.height,i.helpers.retinaScale(this),t&&(this.controller=new i.Controller(this));var a=this;return i.helpers.addResizeListener(e.canvas.parentNode,function(){a.controller&&a.controller.config.options.responsive&&a.controller.resize()}),this.controller?this.controller:this};i.defaults={global:{responsive:!0,responsiveAnimationDuration:0,maintainAspectRatio:!0,events:["mousemove","mouseout","click","touchstart","touchmove","touchend"],hover:{onHover:null,mode:"single",animationDuration:400},onClick:null,defaultColor:"rgba(0,0,0,0.1)",elements:{},legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');for(var i=0;i<e.data.datasets.length;i++)t.push('<li><span style="background-color:'+e.data.datasets[i].backgroundColor+'">'),e.data.datasets[i].label&&t.push(e.data.datasets[i].label),t.push("</span></li>");return t.push("</ul>"),t.join("")}}},"undefined"!=typeof amd?define(function(){return i}):"object"==typeof module&&module.exports&&(module.exports=i),e.Chart=i,i.noConflict=function(){return e.Chart=t,i}}.call(this),function(){"use strict";var e=this,t=e.Chart,i=t.helpers={},a=i.each=function(e,t,i,a){var n=Array.prototype.slice.call(arguments,3);if(e)if(e.length===+e.length){var s;if(a)for(s=e.length-1;s>=0;s--)t.apply(i,[e[s],s].concat(n));else for(s=0;s<e.length;s++)t.apply(i,[e[s],s].concat(n))}else for(var r in e)t.apply(i,[e[r],r].concat(n))},n=i.clone=function(e){var t={};return a(e,function(a,s){e.hasOwnProperty(s)&&(t[s]=i.isArray(a)?a.slice(0):"object"==typeof a&&null!==a?n(a):a)}),t},s=i.extend=function(e){return a(Array.prototype.slice.call(arguments,1),function(t){a(t,function(i,a){t.hasOwnProperty(a)&&(e[a]=i)})}),e},r=(i.configMerge=function(e){var a=n(e);return i.each(Array.prototype.slice.call(arguments,1),function(e){i.each(e,function(n,s){if(e.hasOwnProperty(s))if("scales"===s)a[s]=i.scaleMerge(a.hasOwnProperty(s)?a[s]:{},n);else if("scale"===s)a[s]=i.configMerge(a.hasOwnProperty(s)?a[s]:{},t.scaleService.getScaleDefaults(n.type),n);else if(a.hasOwnProperty(s)&&i.isArray(a[s])&&i.isArray(n)){var r=a[s];i.each(n,function(e,t){t<r.length?r[t]="object"==typeof r[t]&&null!==r[t]&&"object"==typeof e&&null!==e?i.configMerge(r[t],e):e:r.push(e)})}else a[s]=a.hasOwnProperty(s)&&"object"==typeof a[s]&&null!==a[s]&&"object"==typeof n?i.configMerge(a[s],n):n})}),a},i.extendDeep=function(){function e(t){return i.each(arguments,function(a){a!==t&&i.each(a,function(i,a){t[a]&&t[a].constructor&&t[a].constructor===Object?e(t[a],i):t[a]=i})}),t}return e.apply(this,arguments)},i.scaleMerge=function(e,a){var s=n(e);return i.each(a,function(e,n){a.hasOwnProperty(n)&&("xAxes"===n||"yAxes"===n?s.hasOwnProperty(n)?i.each(e,function(e,a){a>=s[n].length||!s[n][a].type?s[n].push(i.configMerge(e.type?t.scaleService.getScaleDefaults(e.type):{},e)):s[n][a]=e.type!==s[n][a].type?i.configMerge(s[n][a],e.type?t.scaleService.getScaleDefaults(e.type):{},e):i.configMerge(s[n][a],e)}):(s[n]=[],i.each(e,function(e){s[n].push(i.configMerge(e.type?t.scaleService.getScaleDefaults(e.type):{},e))})):s[n]=s.hasOwnProperty(n)&&"object"==typeof s[n]&&null!==s[n]&&"object"==typeof e?i.configMerge(s[n],e):e)}),s},i.getValueAtIndexOrDefault=function(e,t,a){return void 0===e||null===e?a:i.isArray(e)?t<e.length?e[t]:a:e},i.indexOf=function(e,t){if(Array.prototype.indexOf)return e.indexOf(t);for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1},i.where=function(e,t){var a=[];return i.each(e,function(e){t(e)&&a.push(e)}),a},i.findNextWhere=function(e,t,i){(void 0===i||null===i)&&(i=-1);for(var a=i+1;a<e.length;a++){var n=e[a];if(t(n))return n}},i.findPreviousWhere=function(e,t,i){(void 0===i||null===i)&&(i=e.length);for(var a=i-1;a>=0;a--){var n=e[a];if(t(n))return n}},i.inherits=function(e){var t=this,i=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return t.apply(this,arguments)},a=function(){this.constructor=i};return a.prototype=t.prototype,i.prototype=new a,i.extend=r,e&&s(i.prototype,e),i.__super__=t.prototype,i}),o=i.noop=function(){},l=(i.uid=function(){var e=0;return function(){return"chart-"+e++}}(),i.warn=function(e){window.console&&"function"==typeof window.console.warn&&console.warn(e)},i.amd="function"==typeof define&&define.amd,i.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)}),d=(i.max=function(e){return Math.max.apply(Math,e)},i.min=function(e){return Math.min.apply(Math,e)},i.sign=function(e){return Math.sign?Math.sign(e):(e=+e,0===e||isNaN(e)?e:e>0?1:-1)},i.log10=function(e){return Math.log10?Math.log10(e):Math.log(e)/Math.LN10},i.getDecimalPlaces=function(e){if(e%1!==0&&l(e)){var t=e.toString();if(t.indexOf("e-")<0)return t.split(".")[1].length;if(t.indexOf(".")<0)return parseInt(t.split("e-")[1]);var i=t.split(".")[1].split("e-");return i[0].length+parseInt(i[1])}return 0},i.toRadians=function(e){return e*(Math.PI/180)},i.toDegrees=function(e){return e*(180/Math.PI)},i.getAngleFromPoint=function(e,t){var i=t.x-e.x,a=t.y-e.y,n=Math.sqrt(i*i+a*a),s=Math.atan2(a,i);return s<-.5*Math.PI&&(s+=2*Math.PI),{angle:s,distance:n}},i.aliasPixel=function(e){return e%2===0?0:.5},i.splineCurve=function(e,t,i,a){var n=e,s=t,r=i;n.skip&&(n=s),r.skip&&(r=s);var o=Math.sqrt(Math.pow(s.x-n.x,2)+Math.pow(s.y-n.y,2)),l=Math.sqrt(Math.pow(r.x-s.x,2)+Math.pow(r.y-s.y,2)),d=a*o/(o+l),c=a*l/(o+l);return{previous:{x:s.x-d*(r.x-n.x),y:s.y-d*(r.y-n.y)},next:{x:s.x+c*(r.x-n.x),y:s.y+c*(r.y-n.y)}}},i.nextItem=function(e,t,i){return i?t>=e.length-1?e[0]:e[t+1]:t>=e.length-1?e[e.length-1]:e[t+1]},i.previousItem=function(e,t,i){return i?0>=t?e[e.length-1]:e[t-1]:0>=t?e[0]:e[t-1]},i.niceNum=function(e,t){var a,n=Math.floor(i.log10(e)),s=e/Math.pow(10,n);return a=t?1.5>s?1:3>s?2:7>s?5:10:1>=s?1:2>=s?2:5>=s?5:10,a*Math.pow(10,n)},i.easingEffects={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-1*e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1*((e=e/1-1)*e*e+1)},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-1*((e=e/1-1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return 1*(e/=1)*e*e*e*e},easeOutQuint:function(e){return 1*((e=e/1-1)*e*e*e*e+1)},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return-1*Math.cos(e/1*(Math.PI/2))+1},easeOutSine:function(e){return 1*Math.sin(e/1*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e/1)-1)},easeInExpo:function(e){return 0===e?1:1*Math.pow(2,10*(e/1-1))},easeOutExpo:function(e){return 1===e?1:1*(-Math.pow(2,-10*e/1)+1)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(-Math.pow(2,-10*--e)+2)},easeInCirc:function(e){return e>=1?e:-1*(Math.sqrt(1-(e/=1)*e)-1)},easeOutCirc:function(e){return 1*Math.sqrt(1-(e=e/1-1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,i=0,a=1;return 0===e?0:1==(e/=1)?1:(i||(i=.3),a<Math.abs(1)?(a=1,t=i/4):t=i/(2*Math.PI)*Math.asin(1/a),-(a*Math.pow(2,10*(e-=1))*Math.sin(2*(1*e-t)*Math.PI/i)))},easeOutElastic:function(e){var t=1.70158,i=0,a=1;return 0===e?0:1==(e/=1)?1:(i||(i=.3),a<Math.abs(1)?(a=1,t=i/4):t=i/(2*Math.PI)*Math.asin(1/a),a*Math.pow(2,-10*e)*Math.sin(2*(1*e-t)*Math.PI/i)+1)},easeInOutElastic:function(e){var t=1.70158,i=0,a=1;return 0===e?0:2==(e/=.5)?1:(i||(i=.3*1.5),a<Math.abs(1)?(a=1,t=i/4):t=i/(2*Math.PI)*Math.asin(1/a),1>e?-.5*a*Math.pow(2,10*(e-=1))*Math.sin(2*(1*e-t)*Math.PI/i):a*Math.pow(2,-10*(e-=1))*Math.sin(2*(1*e-t)*Math.PI/i)*.5+1)},easeInBack:function(e){var t=1.70158;return 1*(e/=1)*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return 1*((e=e/1-1)*e*((t+1)*e+t)+1)},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?.5*e*e*(((t*=1.525)+1)*e-t):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)
},easeInBounce:function(e){return 1-d.easeOutBounce(1-e)},easeOutBounce:function(e){return(e/=1)<1/2.75?7.5625*e*e:2/2.75>e?1*(7.5625*(e-=1.5/2.75)*e+.75):2.5/2.75>e?1*(7.5625*(e-=2.25/2.75)*e+.9375):1*(7.5625*(e-=2.625/2.75)*e+.984375)},easeInOutBounce:function(e){return.5>e?.5*d.easeInBounce(2*e):.5*d.easeOutBounce(2*e-1)+.5}}),c=(i.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)}}(),i.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(e){return window.clearTimeout(e,1e3/60)}}(),i.getRelativePosition=function(e,t){var i,a,n=e.originalEvent||e,s=e.currentTarget||e.srcElement,r=s.getBoundingClientRect();return n.touches?(i=n.touches[0].clientX,a=n.touches[0].clientY):(i=n.clientX,a=n.clientY),i=Math.round((i-r.left)/(r.right-r.left)*s.width/t.currentDevicePixelRatio),a=Math.round((a-r.top)/(r.bottom-r.top)*s.height/t.currentDevicePixelRatio),{x:i,y:a}},i.addEvent=function(e,t,i){e.addEventListener?e.addEventListener(t,i):e.attachEvent?e.attachEvent("on"+t,i):e["on"+t]=i}),u=i.removeEvent=function(e,t,i){e.removeEventListener?e.removeEventListener(t,i,!1):e.detachEvent?e.detachEvent("on"+t,i):e["on"+t]=o},g=(i.bindEvents=function(e,t,i){e.events||(e.events={}),a(t,function(t){e.events[t]=function(){i.apply(e,arguments)},c(e.chart.canvas,t,e.events[t])})},i.unbindEvents=function(e,t){a(t,function(t,i){u(e.chart.canvas,i,t)})},i.getConstraintWidth=function(e){var t,i=document.defaultView.getComputedStyle(e)["max-width"],a=document.defaultView.getComputedStyle(e.parentNode)["max-width"],n=null!==i&&"none"!==i,s=null!==a&&"none"!==a;return(n||s)&&(t=Math.min(n?parseInt(i,10):Number.POSITIVE_INFINITY,s?parseInt(a,10):Number.POSITIVE_INFINITY)),t}),h=i.getConstraintHeight=function(e){var t,i=document.defaultView.getComputedStyle(e)["max-height"],a=document.defaultView.getComputedStyle(e.parentNode)["max-height"],n=null!==i&&"none"!==i,s=null!==a&&"none"!==a;return(i||a)&&(t=Math.min(n?parseInt(i,10):Number.POSITIVE_INFINITY,s?parseInt(a,10):Number.POSITIVE_INFINITY)),t},p=(i.getMaximumWidth=function(e){var t=e.parentNode,i=parseInt(p(t,"padding-left"))+parseInt(p(t,"padding-right")),a=t.clientWidth-i,n=g(e);return void 0!==n&&(a=Math.min(a,n)),a},i.getMaximumHeight=function(e){var t=e.parentNode,i=parseInt(p(t,"padding-top"))+parseInt(p(t,"padding-bottom")),a=t.clientHeight-i,n=h(e);return void 0!==n&&(a=Math.min(a,n)),a},i.getStyle=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,null).getPropertyValue(t)});i.getMaximumSize=i.getMaximumWidth,i.retinaScale=function(e){var t=e.ctx,i=e.canvas.width,a=e.canvas.height;e.currentDevicePixelRatio=window.devicePixelRatio||1,1!==window.devicePixelRatio&&(t.canvas.height=a*window.devicePixelRatio,t.canvas.width=i*window.devicePixelRatio,t.scale(window.devicePixelRatio,window.devicePixelRatio),t.canvas.style.width=i+"px",t.canvas.style.height=a+"px",e.originalDevicePixelRatio=e.originalDevicePixelRatio||window.devicePixelRatio)},i.clear=function(e){e.ctx.clearRect(0,0,e.width,e.height)},i.fontString=function(e,t,i){return t+" "+e+"px "+i},i.longestText=function(e,t,i){e.font=t;var n=0;return a(i,function(t){var i=e.measureText(t).width;n=i>n?i:n}),n},i.drawRoundedRectangle=function(e,t,i,a,n,s){e.beginPath(),e.moveTo(t+s,i),e.lineTo(t+a-s,i),e.quadraticCurveTo(t+a,i,t+a,i+s),e.lineTo(t+a,i+n-s),e.quadraticCurveTo(t+a,i+n,t+a-s,i+n),e.lineTo(t+s,i+n),e.quadraticCurveTo(t,i+n,t,i+n-s),e.lineTo(t,i+s),e.quadraticCurveTo(t,i,t+s,i),e.closePath()},i.color=function(e){return window.Color?window.Color(e):(console.log("Color.js not found!"),e)},i.addResizeListener=function(e,t){var i=document.createElement("iframe"),a="chartjs-hidden-iframe";i.classlist?i.classlist.add(a):i.setAttribute("class",a),i.style.width="100%",i.style.display="block",i.style.border=0,i.style.height=0,i.style.margin=0,i.style.position="absolute",i.style.left=0,i.style.right=0,i.style.top=0,i.style.bottom=0,e.insertBefore(i,e.firstChild),(i.contentWindow||i).onresize=function(){t&&t()}},i.removeResizeListener=function(e){var t=e.querySelector(".chartjs-hidden-iframe");t&&t.parentNode.removeChild(t)},i.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(arg)},i.isDatasetVisible=function(e){return!e.hidden}}.call(this),function(){"use strict";var e=this,t=e.Chart,i=t.helpers;t.elements={},t.Element=function(e){i.extend(this,e),this.initialize.apply(this,arguments)},i.extend(t.Element.prototype,{initialize:function(){},pivot:function(){return this._view||(this._view=i.clone(this._model)),this._start=i.clone(this._view),this},transition:function(e){return this._view||(this._view=i.clone(this._model)),this._start||this.pivot(),i.each(this._model,function(t,a){if("_"!==a[0]&&this._model.hasOwnProperty(a))if(this._view[a])if(this._model[a]===this._view[a]);else if("string"==typeof t)try{var n=i.color(this._start[a]).mix(i.color(this._model[a]),e);this._view[a]=n.rgbString()}catch(s){this._view[a]=t}else if("number"==typeof t){var r=void 0!==this._start[a]?this._start[a]:0;this._view[a]=(this._model[a]-r)*e+r}else this._view[a]=t;else this._view[a]="number"==typeof t?t*e:t||null},this),1===e&&delete this._start,this},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return i.isNumber(this._model.x)&&i.isNumber(this._model.y)}}),t.Element.extend=i.inherits}.call(this),function(){"use strict";var e=this,t=e.Chart,i=t.helpers;t.defaults.global.animation={duration:1e3,easing:"easeOutQuart",onProgress:function(){},onComplete:function(){}},t.Animation=t.Element.extend({currentStep:null,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),t.animationService={frameDuration:17,animations:[],dropFrames:0,addAnimation:function(e,t,a,n){n||(e.animating=!0);for(var s=0;s<this.animations.length;++s)if(this.animations[s].chartInstance===e)return void(this.animations[s].animationObject=t);this.animations.push({chartInstance:e,animationObject:t}),1==this.animations.length&&i.requestAnimFrame.call(window,this.digestWrapper)},cancelAnimation:function(e){var t=i.findNextWhere(this.animations,function(t){return t.chartInstance===e});t&&(this.animations.splice(t,1),e.animating=!1)},digestWrapper:function(){t.animationService.startDigest.call(t.animationService)},startDigest:function(){var e=Date.now(),t=0;this.dropFrames>1&&(t=Math.floor(this.dropFrames),this.dropFrames=this.dropFrames%1);for(var a=0;a<this.animations.length;a++)null===this.animations[a].animationObject.currentStep&&(this.animations[a].animationObject.currentStep=0),this.animations[a].animationObject.currentStep+=1+t,this.animations[a].animationObject.currentStep>this.animations[a].animationObject.numSteps&&(this.animations[a].animationObject.currentStep=this.animations[a].animationObject.numSteps),this.animations[a].animationObject.render(this.animations[a].chartInstance,this.animations[a].animationObject),this.animations[a].animationObject.currentStep==this.animations[a].animationObject.numSteps&&(this.animations[a].chartInstance.animating=!1,this.animations.splice(a,1),a--);var n=Date.now(),s=(n-e)/this.frameDuration;this.dropFrames+=s,this.animations.length>0&&i.requestAnimFrame.call(window,this.digestWrapper)}}}.call(this),function(){"use strict";var e=this,t=e.Chart,i=t.helpers;t.types={},t.instances={},t.controllers={},t.Controller=function(e){return this.chart=e,this.config=e.config,this.data=this.config.data,this.options=this.config.options=i.configMerge(t.defaults.global,t.defaults[this.config.type],this.config.options||{}),this.id=i.uid(),t.instances[this.id]=this,this.options.responsive&&this.resize(!0),this.initialize.call(this),this},i.extend(t.Controller.prototype,{initialize:function(){return this.bindEvents(),this.ensureScalesHaveIDs(),this.buildOrUpdateControllers(),this.buildScales(),this.resetElements(),this.initToolTip(),this.update(),this},clear:function(){return i.clear(this.chart),this},stop:function(){return t.animationService.cancelAnimation(this),this},resize:function(e){this.stop();var t=this.chart.canvas,a=i.getMaximumWidth(this.chart.canvas),n=this.options.maintainAspectRatio&&isNaN(this.chart.aspectRatio)===!1&&isFinite(this.chart.aspectRatio)&&0!==this.chart.aspectRatio?a/this.chart.aspectRatio:i.getMaximumHeight(this.chart.canvas);return t.width=this.chart.width=a,t.height=this.chart.height=n,i.retinaScale(this.chart),e||this.update(this.options.responsiveAnimationDuration),this},ensureScalesHaveIDs:function(){var e="x-axis-",t="y-axis-";this.options.scales&&(this.options.scales.xAxes&&this.options.scales.xAxes.length&&i.each(this.options.scales.xAxes,function(t,i){t.id=t.id||e+i},this),this.options.scales.yAxes&&this.options.scales.yAxes.length&&i.each(this.options.scales.yAxes,function(e,i){e.id=e.id||t+i},this))},buildScales:function(){if(this.scales={},this.options.scales&&(this.options.scales.xAxes&&this.options.scales.xAxes.length&&i.each(this.options.scales.xAxes,function(e){var i=t.scaleService.getScaleConstructor(e.type),a=new i({ctx:this.chart.ctx,options:e,data:this.data,id:e.id});this.scales[a.id]=a},this),this.options.scales.yAxes&&this.options.scales.yAxes.length&&i.each(this.options.scales.yAxes,function(e){var i=t.scaleService.getScaleConstructor(e.type),a=new i({ctx:this.chart.ctx,options:e,data:this.data,id:e.id});this.scales[a.id]=a},this)),this.options.scale){var e=t.scaleService.getScaleConstructor(this.options.scale.type),a=new e({ctx:this.chart.ctx,options:this.options.scale,data:this.data,chart:this.chart});this.scale=a,this.scales.radialScale=a}t.scaleService.update(this,this.chart.width,this.chart.height)},buildOrUpdateControllers:function(e){var a=[];if(i.each(this.data.datasets,function(i,n){i.type||(i.type=this.config.type);var s=i.type;return a.push(s),i.controller?void i.controller.updateIndex(n):(i.controller=new t.controllers[s](this,n),void(e&&i.controller.reset()))},this),a.length>1)for(var n=1;n<a.length;n++)if(a[n]!=a[n-1]){this.isCombo=!0;break}},resetElements:function(){i.each(this.data.datasets,function(e){e.controller.reset()},this)},update:function(e,a){t.scaleService.update(this,this.chart.width,this.chart.height),this.buildOrUpdateControllers(!0),i.each(this.data.datasets,function(e){e.controller.buildOrUpdateElements()},this),i.each(this.data.datasets,function(e){e.controller.update()},this),this.render(e,a)},render:function(e,a){if("undefined"!=typeof e&&0!==e||"undefined"==typeof e&&0!==this.options.animation.duration){var n=new t.Animation;n.numSteps=(e||this.options.animation.duration)/16.66,n.easing=this.options.animation.easing,n.render=function(e,t){var a=i.easingEffects[t.easing],n=t.currentStep/t.numSteps,s=a(n);e.draw(s,n,t.currentStep)},n.onAnimationProgress=this.options.onAnimationProgress,n.onAnimationComplete=this.options.onAnimationComplete,t.animationService.addAnimation(this,n,e,a)}else this.draw(),this.options.onAnimationComplete&&this.options.onAnimationComplete.call&&this.options.onAnimationComplete.call(this);return this},draw:function(e){var t=e||1;this.clear(),i.each(this.scales,function(e){e.draw(this.chartArea)},this),this.scale&&this.scale.draw(),i.each(this.data.datasets,function(t){i.isDatasetVisible(t)&&t.controller.draw(e)},this),this.tooltip.transition(t).draw()},getElementAtEvent:function(e){var t=i.getRelativePosition(e,this.chart),a=[];return i.each(this.data.datasets,function(e){i.isDatasetVisible(e)&&i.each(e.metaData,function(e){return e.inRange(t.x,t.y)?(a.push(e),a):void 0},this)},this),a},getElementsAtEvent:function(e){var t=i.getRelativePosition(e,this.chart),a=[],n=function(){for(var e=0;e<this.data.datasets.length;e++)if(i.isDatasetVisible(this.data.datasets[e]))for(var a=0;a<this.data.datasets[e].metaData.length;a++)if(this.data.datasets[e].metaData[a].inRange(t.x,t.y))return this.data.datasets[e].metaData[a]}.call(this);return n?(i.each(this.data.datasets,function(e){i.isDatasetVisible(e)&&a.push(e.metaData[n._index])},this),a):a},getDatasetAtEvent:function(e){var t=i.getRelativePosition(e,this.chart),a=[];return i.each(this.data.datasets,function(e){i.isDatasetVisible(e)&&i.each(e.metaData,function(n){n.inLabelRange(t.x,t.y)&&i.each(e.metaData,function(e){a.push(e)},this)},this)},this),a.length?a:[]},generateLegend:function(){return this.options.legendCallback(this)},destroy:function(){this.clear(),i.unbindEvents(this,this.events),i.removeResizeListener(this.chart.canvas.parentNode);var e=this.chart.canvas;e.width=this.chart.width,e.height=this.chart.height,void 0!==this.chart.originalDevicePixelRatio&&this.chart.ctx.scale(1/this.chart.originalDevicePixelRatio,1/this.chart.originalDevicePixelRatio),e.style.width=this.chart.originalCanvasStyleWidth,e.style.height=this.chart.originalCanvasStyleHeight,delete t.instances[this.id]},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)},initToolTip:function(){this.tooltip=new t.Tooltip({_chart:this.chart,_data:this.data,_options:this.options},this)},bindEvents:function(){i.bindEvents(this,this.options.events,function(e){this.eventHandler(e)})},eventHandler:function(e){if(this.lastActive=this.lastActive||[],this.lastTooltipActive=this.lastTooltipActive||[],"mouseout"==e.type?(this.active=[],this.tooltipActive=[]):(this.active=function(){switch(this.options.hover.mode){case"single":return this.getElementAtEvent(e);case"label":return this.getElementsAtEvent(e);case"dataset":return this.getDatasetAtEvent(e);default:return e}}.call(this),this.tooltipActive=function(){switch(this.options.tooltips.mode){case"single":return this.getElementAtEvent(e);case"label":return this.getElementsAtEvent(e);case"dataset":return this.getDatasetAtEvent(e);default:return e}}.call(this)),this.options.hover.onHover&&this.options.hover.onHover.call(this,this.active),("mouseup"==e.type||"click"==e.type)&&this.options.onClick&&this.options.onClick.call(this,e,this.active),this.lastActive.length)switch(this.options.hover.mode){case"single":this.data.datasets[this.lastActive[0]._datasetIndex].controller.removeHoverStyle(this.lastActive[0],this.lastActive[0]._datasetIndex,this.lastActive[0]._index);break;case"label":case"dataset":for(var t=0;t<this.lastActive.length;t++)this.data.datasets[this.lastActive[t]._datasetIndex].controller.removeHoverStyle(this.lastActive[t],this.lastActive[t]._datasetIndex,this.lastActive[t]._index)}if(this.active.length&&this.options.hover.mode)switch(this.options.hover.mode){case"single":this.data.datasets[this.active[0]._datasetIndex].controller.setHoverStyle(this.active[0]);break;case"label":case"dataset":for(var a=0;a<this.active.length;a++)this.data.datasets[this.active[a]._datasetIndex].controller.setHoverStyle(this.active[a])}if((this.options.tooltips.enabled||this.options.tooltips.custom)&&(this.tooltip.initialize(),this.tooltip._active=this.tooltipActive,this.tooltip.update()),this.tooltip.pivot(),!this.animating){var n;i.each(this.active,function(e,t){e!==this.lastActive[t]&&(n=!0)},this),i.each(this.tooltipActive,function(e,t){e!==this.lastTooltipActive[t]&&(n=!0)},this),(this.lastActive.length!==this.active.length||this.lastTooltipActive.length!==this.tooltipActive.length||n)&&(this.stop(),(this.options.tooltips.enabled||this.options.tooltips.custom)&&this.tooltip.update(!0),this.render(this.options.hover.animationDuration,!0))}return this.lastActive=this.active,this.lastTooltipActive=this.tooltipActive,this}})}.call(this),function(){"use strict";var e=this,t=e.Chart,i=t.helpers;t.defaults.scale={display:!0,gridLines:{show:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,drawOnChartArea:!0,drawTicks:!0,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",offsetGridLines:!1},scaleLabel:{fontColor:"#666",fontFamily:"Helvetica Neue",fontSize:12,fontStyle:"normal",labelString:"",show:!1},ticks:{beginAtZero:!1,fontSize:12,fontStyle:"normal",fontColor:"#666",fontFamily:"Helvetica Neue",maxRotation:90,minRotation:20,mirror:!1,padding:10,reverse:!1,show:!0,callback:function(e){return""+e}}},t.Scale=t.Element.extend({beforeUpdate:i.noop,update:function(e,t,i){return this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this.margins=i,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this.beforeBuildTicks(),this.buildTicks(),this.afterBuildTicks(),this.beforeTickToLabelConversion(),this.convertTicksToLabels(),this.afterTickToLabelConversion(),this.beforeCalculateTickRotation(),this.calculateTickRotation(),this.afterCalculateTickRotation(),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate(),this.minSize},afterUpdate:i.noop,beforeSetDimensions:i.noop,setDimensions:function(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0},afterSetDimensions:i.noop,beforeBuildTicks:i.noop,buildTicks:i.noop,afterBuildTicks:i.noop,beforeTickToLabelConversion:i.noop,convertTicksToLabels:function(){this.ticks=this.ticks.map(function(e,t,i){return this.options.ticks.userCallback?this.options.ticks.userCallback(e,t,i):this.options.ticks.callback(e,t,i)},this)},afterTickToLabelConversion:i.noop,beforeCalculateTickRotation:i.noop,calculateTickRotation:function(){var e=i.fontString(this.options.ticks.fontSize,this.options.ticks.fontStyle,this.options.ticks.fontFamily);this.ctx.font=e;var t,a,n=this.ctx.measureText(this.ticks[0]).width,s=this.ctx.measureText(this.ticks[this.ticks.length-1]).width;if(this.paddingRight=s/2+3,this.paddingLeft=n/2+3,this.labelRotation=0,this.options.display&&this.isHorizontal()){var r,o,l=i.longestText(this.ctx,e,this.ticks);this.labelWidth=l;for(var d=this.getPixelForTick(1)-this.getPixelForTick(0)-6;this.labelWidth>d&&this.labelRotation<=this.options.ticks.maxRotation;){if(r=Math.cos(i.toRadians(this.labelRotation)),o=Math.sin(i.toRadians(this.labelRotation)),t=r*n,a=r*s,t+this.options.ticks.fontSize/2>this.yLabelWidth&&(this.paddingLeft=t+this.options.ticks.fontSize/2),this.paddingRight=this.options.ticks.fontSize/2,o*l>this.maxHeight){this.labelRotation--;break}this.labelRotation++,this.labelWidth=r*l}}else this.labelWidth=0,this.paddingRight=0,this.paddingLeft=0;this.margins&&(this.paddingLeft-=this.margins.left,this.paddingRight-=this.margins.right,this.paddingLeft=Math.max(this.paddingLeft,0),this.paddingRight=Math.max(this.paddingRight,0))},afterCalculateTickRotation:i.noop,beforeFit:i.noop,fit:function(){if(this.minSize={width:0,height:0},this.minSize.width=this.isHorizontal()?this.maxWidth:this.options.gridLines.show&&this.options.display?10:0,this.minSize.height=this.isHorizontal()?this.options.gridLines.show&&this.options.display?10:0:this.maxHeight,this.options.scaleLabel.show&&(this.isHorizontal()?this.minSize.height+=1.5*this.options.scaleLabel.fontSize:this.minSize.width+=1.5*this.options.scaleLabel.fontSize),this.options.ticks.show&&this.options.display){var e=i.fontString(this.options.ticks.fontSize,this.options.ticks.fontStyle,this.options.ticks.fontFamily);if(this.isHorizontal()){var t=(this.maxHeight-this.minSize.height,i.longestText(this.ctx,e,this.ticks)),a=Math.sin(i.toRadians(this.labelRotation))*t+1.5*this.options.ticks.fontSize;this.minSize.height=Math.min(this.maxHeight,this.minSize.height+a),e=i.fontString(this.options.ticks.fontSize,this.options.ticks.fontStyle,this.options.ticks.fontFamily),this.ctx.font=e;var n=this.ctx.measureText(this.ticks[0]).width,s=this.ctx.measureText(this.ticks[this.ticks.length-1]).width,r=Math.cos(i.toRadians(this.labelRotation)),o=Math.sin(i.toRadians(this.labelRotation));this.paddingLeft=0!==this.labelRotation?r*n+3:n/2+3,this.paddingRight=0!==this.labelRotation?o*(this.options.ticks.fontSize/2)+3:s/2+3}else{var l=this.maxWidth-this.minSize.width,d=i.longestText(this.ctx,e,this.ticks);l>d?this.minSize.width+=d:this.minSize.width=this.maxWidth,this.paddingTop=this.options.ticks.fontSize/2,this.paddingBottom=this.options.ticks.fontSize/2}}this.margins&&(this.paddingLeft-=this.margins.left,this.paddingTop-=this.margins.top,this.paddingRight-=this.margins.right,this.paddingBottom-=this.margins.bottom,this.paddingLeft=Math.max(this.paddingLeft,0),this.paddingTop=Math.max(this.paddingTop,0),this.paddingRight=Math.max(this.paddingRight,0),this.paddingBottom=Math.max(this.paddingBottom,0)),this.width=this.minSize.width,this.height=this.minSize.height},afterFit:i.noop,isHorizontal:function(){return"top"==this.options.position||"bottom"==this.options.position},getRightValue:function a(e){return null===e||"undefined"==typeof e?0/0:"number"==typeof e&&isNaN(e)?0/0:"object"==typeof e?a(this.isHorizontal()?e.x:e.y):e},getLabelForIndex:i.noop,getPixelForValue:i.noop,getPixelForTick:function(e,t){if(this.isHorizontal()){var i=this.width-(this.paddingLeft+this.paddingRight),a=i/Math.max(this.ticks.length-(this.options.gridLines.offsetGridLines?0:1),1),n=a*e+this.paddingLeft;return t&&(n+=a/2),this.left+Math.round(n)}var s=this.height-(this.paddingTop+this.paddingBottom);return this.top+e*(s/(this.ticks.length-1))},getPixelForDecimal:function(e){if(this.isHorizontal()){var t=this.width-(this.paddingLeft+this.paddingRight),i=t*e+this.paddingLeft;return this.left+Math.round(i)}return this.top+e*this.height},draw:function(e){if(this.options.display){var t,a,n,s,r=0!==this.labelRotation;this.ctx.fillStyle=this.options.ticks.fontColor;var o=i.fontString(this.options.ticks.fontSize,this.options.ticks.fontStyle,this.options.ticks.fontFamily);if(this.isHorizontal()){t=!0;var l="bottom"==this.options.position?this.top:this.bottom-10,d="bottom"==this.options.position?this.top+10:this.bottom;a=!1,(this.options.ticks.fontSize+4)*this.ticks.length>this.width-(this.paddingLeft+this.paddingRight)&&(a=1+Math.floor((this.options.ticks.fontSize+4)*this.ticks.length/(this.width-(this.paddingLeft+this.paddingRight)))),i.each(this.ticks,function(n,s){if(!(a>1&&s%a>0||void 0===n||null===n)){var c=this.getPixelForTick(s),u=this.getPixelForTick(s,this.options.gridLines.offsetGridLines);this.options.gridLines.show&&(s===("undefined"!=typeof this.zeroLineIndex?this.zeroLineIndex:0)?(this.ctx.lineWidth=this.options.gridLines.zeroLineWidth,this.ctx.strokeStyle=this.options.gridLines.zeroLineColor,t=!0):t&&(this.ctx.lineWidth=this.options.gridLines.lineWidth,this.ctx.strokeStyle=this.options.gridLines.color,t=!1),c+=i.aliasPixel(this.ctx.lineWidth),this.ctx.beginPath(),this.options.gridLines.drawTicks&&(this.ctx.moveTo(c,l),this.ctx.lineTo(c,d)),this.options.gridLines.drawOnChartArea&&(this.ctx.moveTo(c,e.top),this.ctx.lineTo(c,e.bottom)),this.ctx.stroke()),this.options.ticks.show&&(this.ctx.save(),this.ctx.translate(u,r?this.top+12:"top"===this.options.position?this.bottom-10:this.top+10),this.ctx.rotate(-1*i.toRadians(this.labelRotation)),this.ctx.font=o,this.ctx.textAlign=r?"right":"center",this.ctx.textBaseline=r?"middle":"top"===this.options.position?"bottom":"top",this.ctx.fillText(n,0,0),this.ctx.restore())}},this),this.options.scaleLabel.show&&(this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillStyle=this.options.scaleLabel.fontColor,this.ctx.font=i.fontString(this.options.scaleLabel.fontSize,this.options.scaleLabel.fontStyle,this.options.scaleLabel.fontFamily),n=this.left+(this.right-this.left)/2,s="bottom"==this.options.position?this.bottom-this.options.scaleLabel.fontSize/2:this.top+this.options.scaleLabel.fontSize/2,this.ctx.fillText(this.options.scaleLabel.labelString,n,s))}else{t=!0;var c="right"==this.options.position?this.left:this.right-5,u="right"==this.options.position?this.left+5:this.right;if(i.each(this.ticks,function(a,n){var s=this.getPixelForTick(n);if(this.options.gridLines.show&&(n===("undefined"!=typeof this.zeroLineIndex?this.zeroLineIndex:0)?(this.ctx.lineWidth=this.options.gridLines.zeroLineWidth,this.ctx.strokeStyle=this.options.gridLines.zeroLineColor,t=!0):t&&(this.ctx.lineWidth=this.options.gridLines.lineWidth,this.ctx.strokeStyle=this.options.gridLines.color,t=!1),s+=i.aliasPixel(this.ctx.lineWidth),this.ctx.beginPath(),this.options.gridLines.drawTicks&&(this.ctx.moveTo(c,s),this.ctx.lineTo(u,s)),this.options.gridLines.drawOnChartArea&&(this.ctx.moveTo(e.left,s),this.ctx.lineTo(e.right,s)),this.ctx.stroke()),this.options.ticks.show){var r,l=this.getPixelForTick(n,this.options.gridLines.offsetGridLines);this.ctx.save(),"left"==this.options.position?this.options.ticks.mirror?(r=this.right+this.options.ticks.padding,this.ctx.textAlign="left"):(r=this.right-this.options.ticks.padding,this.ctx.textAlign="right"):this.options.ticks.mirror?(r=this.left-this.options.ticks.padding,this.ctx.textAlign="right"):(r=this.left+this.options.ticks.padding,this.ctx.textAlign="left"),this.ctx.translate(r,l),this.ctx.rotate(-1*i.toRadians(this.labelRotation)),this.ctx.font=o,this.ctx.textBaseline="middle",this.ctx.fillText(a,0,0),this.ctx.restore()}},this),this.options.scaleLabel.show){n="left"==this.options.position?this.left+this.options.scaleLabel.fontSize/2:this.right-this.options.scaleLabel.fontSize/2,s=this.top+(this.bottom-this.top)/2;var g="left"==this.options.position?-.5*Math.PI:.5*Math.PI;this.ctx.save(),this.ctx.translate(n,s),this.ctx.rotate(g),this.ctx.textAlign="center",this.ctx.fillStyle=this.options.scaleLabel.fontColor,this.ctx.font=i.fontString(this.options.scaleLabel.fontSize,this.options.scaleLabel.fontStyle,this.options.scaleLabel.fontFamily),this.ctx.textBaseline="middle",this.ctx.fillText(this.options.scaleLabel.labelString,0,0),this.ctx.restore()}}}}})}.call(this),function(){"use strict";var e=this,t=e.Chart,i=t.helpers;t.scaleService={constructors:{},defaults:{},registerScaleType:function(e,t,a){this.constructors[e]=t,this.defaults[e]=i.clone(a)},getScaleConstructor:function(e){return this.constructors.hasOwnProperty(e)?this.constructors[e]:void 0},getScaleDefaults:function(e){return this.defaults.hasOwnProperty(e)?i.scaleMerge(t.defaults.scale,this.defaults[e]):{}},update:function(e,t,a){var n=t>30?5:2,s=a>30?5:2;if(e){var r=i.where(e.scales,function(e){return"left"==e.options.position}),o=i.where(e.scales,function(e){return"right"==e.options.position}),l=i.where(e.scales,function(e){return"top"==e.options.position}),d=i.where(e.scales,function(e){return"bottom"==e.options.position}),c=i.where(e.scales,function(e){return"chartArea"==e.options.position}),u=t/2,g=a/2;u-=2*n,g-=2*s;var h=(t-u)/(r.length+o.length),p=(a-g)/(l.length+d.length),m=[],f=function(e){var t=e.update(h,g);m.push({horizontal:!1,minSize:t,scale:e})},v=function(e){var t=e.update(u,p);m.push({horizontal:!0,minSize:t,scale:e})};i.each(r,f),i.each(o,f),i.each(l,v),i.each(d,v);var b=a-2*s,w=t-2*n;i.each(m,function(e){e.horizontal?b-=e.minSize.height:w-=e.minSize.width});var y=function(e){var t=i.findNextWhere(m,function(t){return t.scale===e});t&&e.update(t.minSize.width,b)},x=function(e){var t=i.findNextWhere(m,function(t){return t.scale===e}),a={left:D,right:C,top:0,bottom:0};t&&e.update(w,t.minSize.height,a)},D=n,C=n,_=s,S=s;i.each(r,y),i.each(o,y),i.each(r,function(e){D+=e.width}),i.each(o,function(e){C+=e.width}),i.each(l,x),i.each(d,x),i.each(l,function(e){_+=e.height}),i.each(d,function(e){S+=e.height}),i.each(r,function(e){var t=i.findNextWhere(m,function(t){return t.scale===e}),a={left:0,right:0,top:_,bottom:S};t&&e.update(t.minSize.width,b,a)}),i.each(o,function(e){var t=i.findNextWhere(m,function(t){return t.scale===e}),a={left:0,right:0,top:_,bottom:S};t&&e.update(t.minSize.width,b,a)}),D=n,C=n,_=s,S=s,i.each(r,function(e){D+=e.width}),i.each(o,function(e){C+=e.width}),i.each(l,function(e){_+=e.height}),i.each(d,function(e){S+=e.height});var k=a-_-S,E=t-D-C;(E!==w||k!==b)&&(i.each(r,function(e){e.height=k}),i.each(o,function(e){e.height=k}),i.each(l,function(e){e.width=E}),i.each(d,function(e){e.width=E}),b=k,w=E);var A=n,M=s,F=function(e){e.left=A,e.right=A+e.width,e.top=_,e.bottom=_+b,A=e.right},T=function(e){e.left=D,e.right=D+w,e.top=M,e.bottom=M+e.height,M=e.bottom};i.each(r,F),i.each(l,T),A+=w,M+=b,i.each(o,F),i.each(d,T),e.chartArea={left:D,top:_,right:D+w,bottom:_+b},i.each(c,function(t){t.left=e.chartArea.left,t.top=e.chartArea.top,t.right=e.chartArea.right,t.bottom=e.chartArea.bottom,t.update(w,b)})}}}}.call(this),function(){"use strict";function e(e,t){return t&&(a.isArray(t)?e=e.concat(t):e.push(t)),e}var t=this,i=t.Chart,a=i.helpers;i.defaults.global.tooltips={enabled:!0,custom:null,mode:"single",backgroundColor:"rgba(0,0,0,0.8)",titleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",titleFontSize:12,titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleColor:"#fff",titleAlign:"left",bodyFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",bodyFontSize:12,bodyFontStyle:"normal",bodySpacing:2,bodyColor:"#fff",bodyAlign:"left",footerFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",footerFontSize:12,footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretSize:5,cornerRadius:6,xOffset:10,multiKeyBackground:"#fff",callbacks:{beforeTitle:a.noop,title:function(e,t){var i="";return e.length>0&&(e[0].xLabel?i=e[0].xLabel:t.labels.length>0&&e[0].index<t.labels.length&&(i=t.labels[e[0].index])),i},afterTitle:a.noop,beforeBody:a.noop,beforeLabel:a.noop,label:function(e,t){var i=t.datasets[e.datasetIndex].label||"";return i+": "+e.yLabel},afterLabel:a.noop,afterBody:a.noop,beforeFooter:a.noop,footer:a.noop,afterFooter:a.noop}},i.Tooltip=i.Element.extend({initialize:function(){var e=this._options;a.extend(this,{_model:{xPadding:e.tooltips.xPadding,yPadding:e.tooltips.yPadding,xOffset:e.tooltips.xOffset,bodyColor:e.tooltips.bodyColor,_bodyFontFamily:e.tooltips.bodyFontFamily,_bodyFontStyle:e.tooltips.bodyFontStyle,_bodyAlign:e.tooltips.bodyAlign,bodyFontSize:e.tooltips.bodyFontSize,bodySpacing:e.tooltips.bodySpacing,titleColor:e.tooltips.titleColor,_titleFontFamily:e.tooltips.titleFontFamily,_titleFontStyle:e.tooltips.titleFontStyle,titleFontSize:e.tooltips.titleFontSize,_titleAlign:e.tooltips.titleAlign,titleSpacing:e.tooltips.titleSpacing,titleMarginBottom:e.tooltips.titleMarginBottom,footerColor:e.tooltips.footerColor,_footerFontFamily:e.tooltips.footerFontFamily,_footerFontStyle:e.tooltips.footerFontStyle,footerFontSize:e.tooltips.footerFontSize,_footerAlign:e.tooltips.footerAlign,footerSpacing:e.tooltips.footerSpacing,footerMarginTop:e.tooltips.footerMarginTop,caretSize:e.tooltips.caretSize,cornerRadius:e.tooltips.cornerRadius,backgroundColor:e.tooltips.backgroundColor,opacity:0,legendColorBackground:e.tooltips.multiKeyBackground}})},getTitle:function(){var t=this._options.tooltips.callbacks.beforeTitle.apply(this,arguments),i=this._options.tooltips.callbacks.title.apply(this,arguments),a=this._options.tooltips.callbacks.afterTitle.apply(this,arguments),n=[];return n=e(n,t),n=e(n,i),n=e(n,a)},getBeforeBody:function(){var e=this._options.tooltips.callbacks.beforeBody.call(this,arguments);return a.isArray(e)?e:[e]},getBody:function(e,t){var i=[];return a.each(e,function(e){var a=this._options.tooltips.callbacks.beforeLabel.call(this,e,t)||"",n=this._options.tooltips.callbacks.label.call(this,e,t)||"",s=this._options.tooltips.callbacks.afterLabel.call(this,e,t)||"";i.push(a+n+s)},this),i},getAfterBody:function(){var e=this._options.tooltips.callbacks.afterBody.call(this,arguments);return a.isArray(e)?e:[e]},getFooter:function(){var t=this._options.tooltips.callbacks.beforeFooter.apply(this,arguments),i=this._options.tooltips.callbacks.footer.apply(this,arguments),a=this._options.tooltips.callbacks.afterFooter.apply(this,arguments),n=[];return n=e(n,t),n=e(n,i),n=e(n,a)},getAveragePosition:function(e){if(!e.length)return!1;
var t=[],i=[];a.each(e,function(e){var a=e.tooltipPosition();t.push(a.x),i.push(a.y)});for(var n=0,s=0,r=0;r<t.length;r++)n+=t[r],s+=i[r];return{x:Math.round(n/t.length),y:Math.round(s/t.length)}},update:function(e){if(this._chart.ctx,this._active.length){this._model.opacity=1;var t,i=this._active[0],n=[],s=[];if("single"==this._options.tooltips.mode){var r=i._yScale||i._scale;s.push({xLabel:i._xScale?i._xScale.getLabelForIndex(i._index,i._datasetIndex):"",yLabel:r?r.getLabelForIndex(i._index,i._datasetIndex):"",index:i._index,datasetIndex:i._datasetIndex}),t=this.getAveragePosition(this._active)}else a.each(this._data.datasets,function(e,t){if(a.isDatasetVisible(e)){var n=e.metaData[i._index],r=i._yScale||i._scale;s.push({xLabel:n._xScale?n._xScale.getLabelForIndex(n._index,n._datasetIndex):"",yLabel:r?r.getLabelForIndex(n._index,n._datasetIndex):"",index:i._index,datasetIndex:t})}}),a.each(this._active,function(e){n.push({borderColor:e._view.borderColor,backgroundColor:e._view.backgroundColor})},this),t=this.getAveragePosition(this._active),t.y=this._active[0]._yScale.getPixelForDecimal(.5);a.extend(this._model,{title:this.getTitle(s,this._data),beforeBody:this.getBeforeBody(s,this._data),body:this.getBody(s,this._data),afterBody:this.getAfterBody(s,this._data),footer:this.getFooter(s,this._data)}),a.extend(this._model,{x:Math.round(t.x),y:Math.round(t.y),caretPadding:t.padding,labelColors:n})}else this._model.opacity=0;return e&&this._options.tooltips.custom&&this._options.tooltips.custom.call(this,this._model),this},draw:function(){var e=this._chart.ctx,t=this._view;if(0!==this._view.opacity){t.position="top";var i=t.caretPadding||2,n=t.body.length+t.beforeBody.length+t.afterBody.length,s=2*t.yPadding;s+=t.title.length*t.titleFontSize,s+=(t.title.length-1)*t.titleSpacing,s+=t.title.length?t.titleMarginBottom:0,s+=n*t.bodyFontSize,s+=(n-1)*t.bodySpacing,s+=t.footer.length?t.footerMarginTop:0,s+=t.footer.length*t.footerFontSize,s+=(t.footer.length-1)*t.footerSpacing;var r=0;a.each(t.title,function(i){e.font=a.fontString(t.titleFontSize,t._titleFontStyle,t._titleFontFamily),r=Math.max(r,e.measureText(i).width)}),a.each(t.body,function(i){e.font=a.fontString(t.bodyFontSize,t._bodyFontStyle,t._bodyFontFamily),r=Math.max(r,e.measureText(i).width+("single"!=this._options.tooltips.mode?t.bodyFontSize+2:0))},this),a.each(t.footer,function(i){e.font=a.fontString(t.footerFontSize,t._footerFontStyle,t._footerFontFamily),r=Math.max(r,e.measureText(i).width)}),r+=2*t.xPadding;var o=r+t.caretSize+i;t.yAlign="center",t.y-s/2<0?t.yAlign="top":t.y+s/2>this._chart.height&&(t.yAlign="bottom"),t.xAlign="right",t.x+o>this._chart.width&&(t.xAlign="left");var l=t.x,d=t.y;if(d="top"==t.yAlign?t.y-t.caretSize-t.cornerRadius:"bottom"==t.yAlign?t.y-s+t.caretSize+t.cornerRadius:t.y-s/2,l="left"==t.xAlign?t.x-o:"right"==t.xAlign?t.x+i+t.caretSize:t.x+o/2,this._options.tooltips.enabled&&(e.fillStyle=a.color(t.backgroundColor).alpha(t.opacity).rgbString(),a.drawRoundedRectangle(e,l,d,r,s,t.cornerRadius),e.fill()),this._options.tooltips.enabled&&(e.fillStyle=a.color(t.backgroundColor).alpha(t.opacity).rgbString(),"left"==t.xAlign?(e.beginPath(),e.moveTo(t.x-i,t.y),e.lineTo(t.x-i-t.caretSize,t.y-t.caretSize),e.lineTo(t.x-i-t.caretSize,t.y+t.caretSize),e.closePath(),e.fill()):(e.beginPath(),e.moveTo(t.x+i,t.y),e.lineTo(t.x+i+t.caretSize,t.y-t.caretSize),e.lineTo(t.x+i+t.caretSize,t.y+t.caretSize),e.closePath(),e.fill())),this._options.tooltips.enabled){var c=d+t.yPadding,u=l+t.xPadding;t.title.length&&(e.textAlign=t._titleAlign,e.textBaseline="top",e.fillStyle=a.color(t.titleColor).alpha(t.opacity).rgbString(),e.font=a.fontString(t.titleFontSize,t._titleFontStyle,t._titleFontFamily),a.each(t.title,function(i,a){e.fillText(i,u,c),c+=t.titleFontSize+t.titleSpacing,a+1==t.title.length&&(c+=t.titleMarginBottom-t.titleSpacing)},this)),e.textAlign=t._bodyAlign,e.textBaseline="top",e.fillStyle=a.color(t.bodyColor).alpha(t.opacity).rgbString(),e.font=a.fontString(t.bodyFontSize,t._bodyFontStyle,t._bodyFontFamily),a.each(t.beforeBody,function(){e.fillText(t.beforeBody,u,c),c+=t.bodyFontSize+t.bodySpacing}),a.each(t.body,function(i,n){"single"!=this._options.tooltips.mode&&(e.fillStyle=a.color(t.labelColors[n].borderColor).alpha(t.opacity).rgbString(),e.fillRect(u,c,t.bodyFontSize,t.bodyFontSize),e.fillStyle=a.color(t.labelColors[n].backgroundColor).alpha(t.opacity).rgbString(),e.fillRect(u+1,c+1,t.bodyFontSize-2,t.bodyFontSize-2),e.fillStyle=a.color(t.bodyColor).alpha(t.opacity).rgbString()),e.fillText(i,u+("single"!=this._options.tooltips.mode?t.bodyFontSize+2:0),c),c+=t.bodyFontSize+t.bodySpacing},this),a.each(t.afterBody,function(){e.fillText(t.afterBody,u,c),c+=t.bodyFontSize}),c-=t.bodySpacing,t.footer.length&&(c+=t.footerMarginTop,e.textAlign=t._footerAlign,e.textBaseline="top",e.fillStyle=a.color(t.footerColor).alpha(t.opacity).rgbString(),e.font=a.fontString(t.footerFontSize,t._footerFontStyle,t._footerFontFamily),a.each(t.footer,function(i){e.fillText(i,u,c),c+=t.footerFontSize+t.footerSpacing},this))}}}})}.call(this),function(){"use strict";var e=this,t=e.Chart,i=t.helpers;t.defaults.bar={hover:{mode:"label"},scales:{xAxes:[{type:"category",categoryPercentage:.8,barPercentage:.9,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}},t.controllers.bar=function(e,t){this.initialize.call(this,e,t)},i.extend(t.controllers.bar.prototype,{initialize:function(e,t){this.chart=e,this.index=t,this.linkScales(),this.addElements()},updateIndex:function(e){this.index=e},linkScales:function(){this.getDataset().xAxisID||(this.getDataset().xAxisID=this.chart.options.scales.xAxes[0].id),this.getDataset().yAxisID||(this.getDataset().yAxisID=this.chart.options.scales.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getScaleForID:function(e){return this.chart.scales[e]},getBarCount:function(){var e=0;return i.each(this.chart.data.datasets,function(t){i.isDatasetVisible(t)&&("bar"===t.type?++e:void 0===t.type&&"bar"===this.chart.config.type&&++e)},this),e},addElements:function(){this.getDataset().metaData=this.getDataset().metaData||[],i.each(this.getDataset().data,function(e,i){this.getDataset().metaData[i]=this.getDataset().metaData[i]||new t.elements.Rectangle({_chart:this.chart.chart,_datasetIndex:this.index,_index:i})},this)},addElementAndReset:function(e){this.getDataset().metaData=this.getDataset().metaData||[];var i=new t.elements.Rectangle({_chart:this.chart.chart,_datasetIndex:this.index,_index:e}),a=this.getBarCount();this.updateElement(i,e,!0,a),this.getDataset().metaData.splice(e,0,i)},removeElement:function(e){this.getDataset().metaData.splice(e,1)},reset:function(){this.update(!0)},buildOrUpdateElements:function(){var e=this.getDataset().data.length,t=this.getDataset().metaData.length;if(t>e)this.getDataset().metaData.splice(e,t-e);else if(e>t)for(var i=t;e>i;++i)this.addElementAndReset(i)},update:function(e){var t=this.getBarCount();i.each(this.getDataset().metaData,function(i,a){this.updateElement(i,a,e,t)},this)},updateElement:function(e,t,a,n){var s,r=this.getScaleForID(this.getDataset().xAxisID),o=this.getScaleForID(this.getDataset().yAxisID);s=o.min<0&&o.max<0?o.getPixelForValue(o.max):o.min>0&&o.max>0?o.getPixelForValue(o.min):o.getPixelForValue(0),i.extend(e,{_chart:this.chart.chart,_xScale:r,_yScale:o,_datasetIndex:this.index,_index:t,_model:{x:this.calculateBarX(t,this.index),y:a?s:this.calculateBarY(t,this.index),label:this.chart.data.labels[t],datasetLabel:this.getDataset().label,base:this.calculateBarBase(this.index,t),width:this.calculateBarWidth(n),backgroundColor:e.custom&&e.custom.backgroundColor?e.custom.backgroundColor:i.getValueAtIndexOrDefault(this.getDataset().backgroundColor,t,this.chart.options.elements.rectangle.backgroundColor),borderColor:e.custom&&e.custom.borderColor?e.custom.borderColor:i.getValueAtIndexOrDefault(this.getDataset().borderColor,t,this.chart.options.elements.rectangle.borderColor),borderWidth:e.custom&&e.custom.borderWidth?e.custom.borderWidth:i.getValueAtIndexOrDefault(this.getDataset().borderWidth,t,this.chart.options.elements.rectangle.borderWidth)}}),e.pivot()},calculateBarBase:function(e,t){var a=(this.getScaleForID(this.getDataset().xAxisID),this.getScaleForID(this.getDataset().yAxisID)),n=0;if(a.options.stacked){var s=this.chart.data.datasets[e].data[t];if(0>s)for(var r=0;e>r;r++){var o=this.chart.data.datasets[r];i.isDatasetVisible(o)&&o.yAxisID===a.id&&(n+=o.data[t]<0?o.data[t]:0)}else for(var l=0;e>l;l++){var d=this.chart.data.datasets[l];i.isDatasetVisible(d)&&d.yAxisID===a.id&&(n+=d.data[t]>0?d.data[t]:0)}return a.getPixelForValue(n)}return n=a.getPixelForValue(a.min),a.beginAtZero||a.min<=0&&a.max>=0||a.min>=0&&a.max<=0?n=a.getPixelForValue(0,0):a.min<0&&a.max<0&&(n=a.getPixelForValue(a.max)),n},getRuler:function(){var e=this.getScaleForID(this.getDataset().xAxisID),t=(this.getScaleForID(this.getDataset().yAxisID),this.getBarCount()),i=function(){for(var t=e.getPixelForValue(null,1)-e.getPixelForValue(null,0),i=2;i<this.getDataset().data.length;i++)t=Math.min(e.getPixelForValue(null,i)-e.getPixelForValue(null,i-1),t);return t}.call(this),a=i*e.options.categoryPercentage,n=(i-i*e.options.categoryPercentage)/2,s=a/t,r=s*e.options.barPercentage,o=s-s*e.options.barPercentage;return{datasetCount:t,tickWidth:i,categoryWidth:a,categorySpacing:n,fullBarWidth:s,barWidth:r,barSpacing:o}},calculateBarWidth:function(){var e=this.getScaleForID(this.getDataset().xAxisID),t=this.getRuler();return e.options.stacked?t.categoryWidth:t.barWidth},getBarIndex:function(e){for(var t=0,a=0;e>a;++a)i.isDatasetVisible(this.chart.data.datasets[a])&&("bar"===this.chart.data.datasets[a].type||void 0===this.chart.data.datasets[a].type&&"bar"===this.chart.config.type)&&++t;return t},calculateBarX:function(e,t){var i=(this.getScaleForID(this.getDataset().yAxisID),this.getScaleForID(this.getDataset().xAxisID)),a=this.getBarIndex(t),n=this.getRuler(),s=i.getPixelForValue(null,e,a,this.chart.isCombo);return s-=this.chart.isCombo?n.tickWidth/2:0,i.options.stacked?s+n.categoryWidth/2+n.categorySpacing:s+n.barWidth/2+n.categorySpacing+n.barWidth*a+n.barSpacing/2+n.barSpacing*a},calculateBarY:function(e,t){var a=(this.getScaleForID(this.getDataset().xAxisID),this.getScaleForID(this.getDataset().yAxisID)),n=this.getDataset().data[e];if(a.options.stacked){for(var s=0,r=0,o=0;t>o;o++){var l=this.chart.data.datasets[o];i.isDatasetVisible(l)&&(l.data[e]<0?r+=l.data[e]||0:s+=l.data[e]||0)}return 0>n?a.getPixelForValue(r+n):a.getPixelForValue(s+n)}return a.getPixelForValue(n)},draw:function(e){var t=e||1;i.each(this.getDataset().metaData,function(e){e.transition(t).draw()},this)},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],a=e._index;e._model.backgroundColor=e.custom&&e.custom.hoverBackgroundColor?e.custom.hoverBackgroundColor:i.getValueAtIndexOrDefault(t.hoverBackgroundColor,a,i.color(e._model.backgroundColor).saturate(.5).darken(.1).rgbString()),e._model.borderColor=e.custom&&e.custom.hoverBorderColor?e.custom.hoverBorderColor:i.getValueAtIndexOrDefault(t.hoverBorderColor,a,i.color(e._model.borderColor).saturate(.5).darken(.1).rgbString()),e._model.borderWidth=e.custom&&e.custom.hoverBorderWidth?e.custom.hoverBorderWidth:i.getValueAtIndexOrDefault(t.hoverBorderWidth,a,e._model.borderWidth)},removeHoverStyle:function(e){var t=(this.chart.data.datasets[e._datasetIndex],e._index);e._model.backgroundColor=e.custom&&e.custom.backgroundColor?e.custom.backgroundColor:i.getValueAtIndexOrDefault(this.getDataset().backgroundColor,t,this.chart.options.elements.rectangle.backgroundColor),e._model.borderColor=e.custom&&e.custom.borderColor?e.custom.borderColor:i.getValueAtIndexOrDefault(this.getDataset().borderColor,t,this.chart.options.elements.rectangle.borderColor),e._model.borderWidth=e.custom&&e.custom.borderWidth?e.custom.borderWidth:i.getValueAtIndexOrDefault(this.getDataset().borderWidth,t,this.chart.options.elements.rectangle.borderWidth)}})}.call(this),function(){"use strict";var e=this,t=e.Chart,i=t.helpers;t.defaults.bubble={hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{template:"(<%= value.x %>, <%= value.y %>, <%= value.r %>)",multiTemplate:"<%if (datasetLabel){%><%=datasetLabel%>: <%}%>(<%= value.x %>, <%= value.y %>, <%= value.r %>)"}},t.controllers.bubble=function(e,t){this.initialize.call(this,e,t)},i.extend(t.controllers.bubble.prototype,{initialize:function(e,t){this.chart=e,this.index=t,this.linkScales(),this.addElements()},updateIndex:function(e){this.index=e},linkScales:function(){this.getDataset().xAxisID||(this.getDataset().xAxisID=this.chart.options.scales.xAxes[0].id),this.getDataset().yAxisID||(this.getDataset().yAxisID=this.chart.options.scales.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getScaleForId:function(e){return this.chart.scales[e]},addElements:function(){this.getDataset().metaData=this.getDataset().metaData||[],i.each(this.getDataset().data,function(e,i){this.getDataset().metaData[i]=this.getDataset().metaData[i]||new t.elements.Point({_chart:this.chart.chart,_datasetIndex:this.index,_index:i})},this)},addElementAndReset:function(e){this.getDataset().metaData=this.getDataset().metaData||[];var i=new t.elements.Point({_chart:this.chart.chart,_datasetIndex:this.index,_index:e});this.updateElement(i,e,!0),this.getDataset().metaData.splice(e,0,i)},removeElement:function(e){this.getDataset().metaData.splice(e,1)},reset:function(){this.update(!0)},buildOrUpdateElements:function(){var e=this.getDataset().data.length,t=this.getDataset().metaData.length;if(t>e)this.getDataset().metaData.splice(e,t-e);else if(e>t)for(var i=t;e>i;++i)this.addElementAndReset(i)},update:function(e){var t,a=this.getDataset().metaData,n=this.getScaleForId(this.getDataset().yAxisID);this.getScaleForId(this.getDataset().xAxisID),t=n.min<0&&n.max<0?n.getPixelForValue(n.max):n.min>0&&n.max>0?n.getPixelForValue(n.min):n.getPixelForValue(0),i.each(a,function(t,i){this.updateElement(t,i,e)},this)},updateElement:function(e,t,a){var n,s=this.getScaleForId(this.getDataset().yAxisID),r=this.getScaleForId(this.getDataset().xAxisID);n=s.min<0&&s.max<0?s.getPixelForValue(s.max):s.min>0&&s.max>0?s.getPixelForValue(s.min):s.getPixelForValue(0),i.extend(e,{_chart:this.chart.chart,_xScale:r,_yScale:s,_datasetIndex:this.index,_index:t,_model:{x:a?r.getPixelForDecimal(.5):r.getPixelForValue(this.getDataset().data[t],t,this.index,this.chart.isCombo),y:a?n:s.getPixelForValue(this.getDataset().data[t],t,this.index),radius:a?0:e.custom&&e.custom.radius?e.custom.radius:this.getRadius(this.getDataset().data[t]),backgroundColor:e.custom&&e.custom.backgroundColor?e.custom.backgroundColor:i.getValueAtIndexOrDefault(this.getDataset().backgroundColor,t,this.chart.options.elements.point.backgroundColor),borderColor:e.custom&&e.custom.borderColor?e.custom.borderColor:i.getValueAtIndexOrDefault(this.getDataset().borderColor,t,this.chart.options.elements.point.borderColor),borderWidth:e.custom&&e.custom.borderWidth?e.custom.borderWidth:i.getValueAtIndexOrDefault(this.getDataset().borderWidth,t,this.chart.options.elements.point.borderWidth),hitRadius:e.custom&&e.custom.hitRadius?e.custom.hitRadius:i.getValueAtIndexOrDefault(this.getDataset().hitRadius,t,this.chart.options.elements.point.hitRadius)}}),e._model.skip=e.custom&&e.custom.skip?e.custom.skip:isNaN(e._model.x)||isNaN(e._model.y),e.pivot()},getRadius:function(e){return e.r||this.chart.options.elements.point.radius},draw:function(e){var t=e||1;i.each(this.getDataset().metaData,function(e){e.transition(t),e.draw()},this)},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],a=e._index;e._model.radius=e.custom&&e.custom.hoverRadius?e.custom.hoverRadius:i.getValueAtIndexOrDefault(t.hoverRadius,a,this.chart.options.elements.point.hoverRadius)+this.getRadius(this.getDataset().data[e._index]),e._model.backgroundColor=e.custom&&e.custom.hoverBackgroundColor?e.custom.hoverBackgroundColor:i.getValueAtIndexOrDefault(t.hoverBackgroundColor,a,i.color(e._model.backgroundColor).saturate(.5).darken(.1).rgbString()),e._model.borderColor=e.custom&&e.custom.hoverBorderColor?e.custom.hoverBorderColor:i.getValueAtIndexOrDefault(t.hoverBorderColor,a,i.color(e._model.borderColor).saturate(.5).darken(.1).rgbString()),e._model.borderWidth=e.custom&&e.custom.hoverBorderWidth?e.custom.hoverBorderWidth:i.getValueAtIndexOrDefault(t.hoverBorderWidth,a,e._model.borderWidth)},removeHoverStyle:function(e){var t=(this.chart.data.datasets[e._datasetIndex],e._index);e._model.radius=e.custom&&e.custom.radius?e.custom.radius:this.getRadius(this.getDataset().data[e._index]),e._model.backgroundColor=e.custom&&e.custom.backgroundColor?e.custom.backgroundColor:i.getValueAtIndexOrDefault(this.getDataset().backgroundColor,t,this.chart.options.elements.point.backgroundColor),e._model.borderColor=e.custom&&e.custom.borderColor?e.custom.borderColor:i.getValueAtIndexOrDefault(this.getDataset().borderColor,t,this.chart.options.elements.point.borderColor),e._model.borderWidth=e.custom&&e.custom.borderWidth?e.custom.borderWidth:i.getValueAtIndexOrDefault(this.getDataset().borderWidth,t,this.chart.options.elements.point.borderWidth)}})}.call(this),function(){"use strict";var e=this,t=e.Chart,i=t.helpers;t.defaults.doughnut={animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},cutoutPercentage:50,tooltips:{callbacks:{title:function(){return""},label:function(e,t){return t.labels[e.index]+": "+t.datasets[e.datasetIndex].data[e.index]}}}},t.defaults.pie=i.clone(t.defaults.doughnut),i.extend(t.defaults.pie,{cutoutPercentage:0}),t.controllers.doughnut=t.controllers.pie=function(e,t){this.initialize.call(this,e,t)},i.extend(t.controllers.doughnut.prototype,{initialize:function(e,t){this.chart=e,this.index=t,this.linkScales(),this.addElements()},updateIndex:function(e){this.index=e},linkScales:function(){},getDataset:function(){return this.chart.data.datasets[this.index]},addElements:function(){this.getDataset().metaData=this.getDataset().metaData||[],i.each(this.getDataset().data,function(e,i){this.getDataset().metaData[i]=this.getDataset().metaData[i]||new t.elements.Arc({_chart:this.chart.chart,_datasetIndex:this.index,_index:i})},this)},addElementAndReset:function(e,a){this.getDataset().metaData=this.getDataset().metaData||[];var n=new t.elements.Arc({_chart:this.chart.chart,_datasetIndex:this.index,_index:e});a&&i.isArray(this.getDataset().backgroundColor)&&this.getDataset().backgroundColor.splice(e,0,a),this.updateElement(n,e,!0),this.getDataset().metaData.splice(e,0,n)},removeElement:function(e){this.getDataset().metaData.splice(e,1)},reset:function(){this.update(!0)},buildOrUpdateElements:function(){var e=this.getDataset().data.length,t=this.getDataset().metaData.length;if(t>e)this.getDataset().metaData.splice(e,t-e);else if(e>t)for(var i=t;e>i;++i)this.addElementAndReset(i)},getVisibleDatasetCount:function(){return i.where(this.chart.data.datasets,function(e){return i.isDatasetVisible(e)}).length},getRingIndex:function(e){for(var t=0,a=0;e>a;++a)i.isDatasetVisible(this.chart.data.datasets[a])&&++t;return t},update:function(e){this.chart.outerRadius=Math.max(i.min([this.chart.chart.width,this.chart.chart.height])/2-this.chart.options.elements.arc.borderWidth/2,0),this.chart.innerRadius=Math.max(this.chart.options.cutoutPercentage?this.chart.outerRadius/100*this.chart.options.cutoutPercentage:1,0),this.chart.radiusLength=(this.chart.outerRadius-this.chart.innerRadius)/this.getVisibleDatasetCount(),this.getDataset().total=0,i.each(this.getDataset().data,function(e){this.getDataset().total+=Math.abs(e)},this),this.outerRadius=this.chart.outerRadius-this.chart.radiusLength*this.getRingIndex(this.index),this.innerRadius=this.outerRadius-this.chart.radiusLength,i.each(this.getDataset().metaData,function(t,i){this.updateElement(t,i,e)},this)},updateElement:function(e,t,a){var n={x:this.chart.chart.width/2,y:this.chart.chart.height/2,startAngle:Math.PI*-.5,circumference:this.chart.options.animation.animateRotate?0:this.calculateCircumference(this.getDataset().data[t]),outerRadius:this.chart.options.animation.animateScale?0:this.outerRadius,innerRadius:this.chart.options.animation.animateScale?0:this.innerRadius};i.extend(e,{_chart:this.chart.chart,_datasetIndex:this.index,_index:t,_model:a?n:{x:this.chart.chart.width/2,y:this.chart.chart.height/2,circumference:this.calculateCircumference(this.getDataset().data[t]),outerRadius:this.outerRadius,innerRadius:this.innerRadius,backgroundColor:e.custom&&e.custom.backgroundColor?e.custom.backgroundColor:i.getValueAtIndexOrDefault(this.getDataset().backgroundColor,t,this.chart.options.elements.arc.backgroundColor),hoverBackgroundColor:e.custom&&e.custom.hoverBackgroundColor?e.custom.hoverBackgroundColor:i.getValueAtIndexOrDefault(this.getDataset().hoverBackgroundColor,t,this.chart.options.elements.arc.hoverBackgroundColor),borderWidth:e.custom&&e.custom.borderWidth?e.custom.borderWidth:i.getValueAtIndexOrDefault(this.getDataset().borderWidth,t,this.chart.options.elements.arc.borderWidth),borderColor:e.custom&&e.custom.borderColor?e.custom.borderColor:i.getValueAtIndexOrDefault(this.getDataset().borderColor,t,this.chart.options.elements.arc.borderColor),label:i.getValueAtIndexOrDefault(this.getDataset().label,t,this.chart.data.labels[t])}}),a||(e._model.startAngle=0===t?Math.PI*-.5:this.getDataset().metaData[t-1]._model.endAngle,e._model.endAngle=e._model.startAngle+e._model.circumference,t<this.getDataset().data.length-1&&(this.getDataset().metaData[t+1]._model.startAngle=e._model.endAngle)),e.pivot()},draw:function(e){var t=e||1;i.each(this.getDataset().metaData,function(e){e.transition(t).draw()},this)},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],a=e._index;e._model.backgroundColor=e.custom&&e.custom.hoverBackgroundColor?e.custom.hoverBackgroundColor:i.getValueAtIndexOrDefault(t.hoverBackgroundColor,a,i.color(e._model.backgroundColor).saturate(.5).darken(.1).rgbString()),e._model.borderColor=e.custom&&e.custom.hoverBorderColor?e.custom.hoverBorderColor:i.getValueAtIndexOrDefault(t.hoverBorderColor,a,i.color(e._model.borderColor).saturate(.5).darken(.1).rgbString()),e._model.borderWidth=e.custom&&e.custom.hoverBorderWidth?e.custom.hoverBorderWidth:i.getValueAtIndexOrDefault(t.hoverBorderWidth,a,e._model.borderWidth)},removeHoverStyle:function(e){var t=(this.chart.data.datasets[e._datasetIndex],e._index);e._model.backgroundColor=e.custom&&e.custom.backgroundColor?e.custom.backgroundColor:i.getValueAtIndexOrDefault(this.getDataset().backgroundColor,t,this.chart.options.elements.arc.backgroundColor),e._model.borderColor=e.custom&&e.custom.borderColor?e.custom.borderColor:i.getValueAtIndexOrDefault(this.getDataset().borderColor,t,this.chart.options.elements.arc.borderColor),e._model.borderWidth=e.custom&&e.custom.borderWidth?e.custom.borderWidth:i.getValueAtIndexOrDefault(this.getDataset().borderWidth,t,this.chart.options.elements.arc.borderWidth)},calculateCircumference:function(e){return this.getDataset().total>0?1.999999*Math.PI*(e/this.getDataset().total):0}})}.call(this),function(){"use strict";var e=this,t=e.Chart,i=t.helpers;t.defaults.line={hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}},t.controllers.line=function(e,t){this.initialize.call(this,e,t)},i.extend(t.controllers.line.prototype,{initialize:function(e,t){this.chart=e,this.index=t,this.linkScales(),this.addElements()},updateIndex:function(e){this.index=e},linkScales:function(){this.getDataset().xAxisID||(this.getDataset().xAxisID=this.chart.options.scales.xAxes[0].id),this.getDataset().yAxisID||(this.getDataset().yAxisID=this.chart.options.scales.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getScaleForId:function(e){return this.chart.scales[e]},addElements:function(){this.getDataset().metaData=this.getDataset().metaData||[],this.getDataset().metaDataset=this.getDataset().metaDataset||new t.elements.Line({_chart:this.chart.chart,_datasetIndex:this.index,_points:this.getDataset().metaData}),i.each(this.getDataset().data,function(e,i){this.getDataset().metaData[i]=this.getDataset().metaData[i]||new t.elements.Point({_chart:this.chart.chart,_datasetIndex:this.index,_index:i})},this)},addElementAndReset:function(e){this.getDataset().metaData=this.getDataset().metaData||[];var i=new t.elements.Point({_chart:this.chart.chart,_datasetIndex:this.index,_index:e});this.updateElement(i,e,!0),this.getDataset().metaData.splice(e,0,i),this.updateBezierControlPoints()},removeElement:function(e){this.getDataset().metaData.splice(e,1)},reset:function(){this.update(!0)},buildOrUpdateElements:function(){var e=this.getDataset().data.length,t=this.getDataset().metaData.length;if(t>e)this.getDataset().metaData.splice(e,t-e);else if(e>t)for(var i=t;e>i;++i)this.addElementAndReset(i)},update:function(e){var t,a=this.getDataset().metaDataset,n=this.getDataset().metaData,s=this.getScaleForId(this.getDataset().yAxisID);this.getScaleForId(this.getDataset().xAxisID),t=s.min<0&&s.max<0?s.getPixelForValue(s.max):s.min>0&&s.max>0?s.getPixelForValue(s.min):s.getPixelForValue(0),i.extend(a,{_scale:s,_datasetIndex:this.index,_children:n,_model:{tension:a.custom&&a.custom.tension?a.custom.tension:this.getDataset().tension||this.chart.options.elements.line.tension,backgroundColor:a.custom&&a.custom.backgroundColor?a.custom.backgroundColor:this.getDataset().backgroundColor||this.chart.options.elements.line.backgroundColor,borderWidth:a.custom&&a.custom.borderWidth?a.custom.borderWidth:this.getDataset().borderWidth||this.chart.options.elements.line.borderWidth,borderColor:a.custom&&a.custom.borderColor?a.custom.borderColor:this.getDataset().borderColor||this.chart.options.elements.line.borderColor,borderCapStyle:a.custom&&a.custom.borderCapStyle?a.custom.borderCapStyle:this.getDataset().borderCapStyle||this.chart.options.elements.line.borderCapStyle,borderDash:a.custom&&a.custom.borderDash?a.custom.borderDash:this.getDataset().borderDash||this.chart.options.elements.line.borderDash,borderDashOffset:a.custom&&a.custom.borderDashOffset?a.custom.borderDashOffset:this.getDataset().borderDashOffset||this.chart.options.elements.line.borderDashOffset,borderJoinStyle:a.custom&&a.custom.borderJoinStyle?a.custom.borderJoinStyle:this.getDataset().borderJoinStyle||this.chart.options.elements.line.borderJoinStyle,fill:a.custom&&a.custom.fill?a.custom.fill:void 0!==this.getDataset().fill?this.getDataset().fill:this.chart.options.elements.line.fill,scaleTop:s.top,scaleBottom:s.bottom,scaleZero:t}}),a.pivot(),i.each(n,function(t,i){this.updateElement(t,i,e)},this),this.updateBezierControlPoints()},updateElement:function(e,t,a){var n,s=this.getScaleForId(this.getDataset().yAxisID),r=this.getScaleForId(this.getDataset().xAxisID);n=s.min<0&&s.max<0?s.getPixelForValue(s.max):s.min>0&&s.max>0?s.getPixelForValue(s.min):s.getPixelForValue(0),i.extend(e,{_chart:this.chart.chart,_xScale:r,_yScale:s,_datasetIndex:this.index,_index:t,_model:{x:r.getPixelForValue(this.getDataset().data[t],t,this.index,this.chart.isCombo),y:a?n:this.calculatePointY(this.getDataset().data[t],t,this.index,this.chart.isCombo),tension:e.custom&&e.custom.tension?e.custom.tension:this.getDataset().tension||this.chart.options.elements.line.tension,radius:e.custom&&e.custom.radius?e.custom.radius:i.getValueAtIndexOrDefault(this.getDataset().radius,t,this.chart.options.elements.point.radius),backgroundColor:e.custom&&e.custom.backgroundColor?e.custom.backgroundColor:i.getValueAtIndexOrDefault(this.getDataset().pointBackgroundColor,t,this.chart.options.elements.point.backgroundColor),borderColor:e.custom&&e.custom.borderColor?e.custom.borderColor:i.getValueAtIndexOrDefault(this.getDataset().pointBorderColor,t,this.chart.options.elements.point.borderColor),borderWidth:e.custom&&e.custom.borderWidth?e.custom.borderWidth:i.getValueAtIndexOrDefault(this.getDataset().pointBorderWidth,t,this.chart.options.elements.point.borderWidth),hitRadius:e.custom&&e.custom.hitRadius?e.custom.hitRadius:i.getValueAtIndexOrDefault(this.getDataset().hitRadius,t,this.chart.options.elements.point.hitRadius)}}),e._model.skip=e.custom&&e.custom.skip?e.custom.skip:isNaN(e._model.x)||isNaN(e._model.y)},calculatePointY:function(e,t,a){var n=(this.getScaleForId(this.getDataset().xAxisID),this.getScaleForId(this.getDataset().yAxisID));if(n.options.stacked){for(var s=0,r=0,o=this.chart.data.datasets.length-1;o>a;o--){var l=this.chart.data.datasets[o];i.isDatasetVisible(l)&&(l.data[t]<0?r+=l.data[t]||0:s+=l.data[t]||0)}return 0>e?n.getPixelForValue(r+e):n.getPixelForValue(s+e)}return n.getPixelForValue(e)},updateBezierControlPoints:function(){i.each(this.getDataset().metaData,function(e,t){var a=i.splineCurve(i.previousItem(this.getDataset().metaData,t)._model,e._model,i.nextItem(this.getDataset().metaData,t)._model,e._model.tension);e._model.controlPointPreviousX=a.previous.x,e._model.controlPointNextX=a.next.x,e._model.controlPointNextY=a.next.y>this.chart.chartArea.bottom?this.chart.chartArea.bottom:a.next.y<this.chart.chartArea.top?this.chart.chartArea.top:a.next.y,e._model.controlPointPreviousY=a.previous.y>this.chart.chartArea.bottom?this.chart.chartArea.bottom:a.previous.y<this.chart.chartArea.top?this.chart.chartArea.top:a.previous.y,e.pivot()},this)},draw:function(e){var t=e||1;i.each(this.getDataset().metaData,function(e){e.transition(t)},this),this.getDataset().metaDataset.transition(t).draw(),i.each(this.getDataset().metaData,function(e){e.draw()})},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],a=e._index;e._model.radius=e.custom&&e.custom.hoverRadius?e.custom.hoverRadius:i.getValueAtIndexOrDefault(t.pointHoverRadius,a,this.chart.options.elements.point.hoverRadius),e._model.backgroundColor=e.custom&&e.custom.hoverBackgroundColor?e.custom.hoverBackgroundColor:i.getValueAtIndexOrDefault(t.pointHoverBackgroundColor,a,i.color(e._model.backgroundColor).saturate(.5).darken(.1).rgbString()),e._model.borderColor=e.custom&&e.custom.hoverBorderColor?e.custom.hoverBorderColor:i.getValueAtIndexOrDefault(t.pointHoverBorderColor,a,i.color(e._model.borderColor).saturate(.5).darken(.1).rgbString()),e._model.borderWidth=e.custom&&e.custom.hoverBorderWidth?e.custom.hoverBorderWidth:i.getValueAtIndexOrDefault(t.pointHoverBorderWidth,a,e._model.borderWidth)},removeHoverStyle:function(e){var t=(this.chart.data.datasets[e._datasetIndex],e._index);e._model.radius=e.custom&&e.custom.radius?e.custom.radius:i.getValueAtIndexOrDefault(this.getDataset().radius,t,this.chart.options.elements.point.radius),e._model.backgroundColor=e.custom&&e.custom.backgroundColor?e.custom.backgroundColor:i.getValueAtIndexOrDefault(this.getDataset().pointBackgroundColor,t,this.chart.options.elements.point.backgroundColor),e._model.borderColor=e.custom&&e.custom.borderColor?e.custom.borderColor:i.getValueAtIndexOrDefault(this.getDataset().pointBorderColor,t,this.chart.options.elements.point.borderColor),e._model.borderWidth=e.custom&&e.custom.borderWidth?e.custom.borderWidth:i.getValueAtIndexOrDefault(this.getDataset().pointBorderWidth,t,this.chart.options.elements.point.borderWidth)}})}.call(this),function(){"use strict";var e=this,t=e.Chart,i=t.helpers;t.defaults.polarArea={scale:{type:"radialLinear",lineArc:!0},animateRotate:!0,animateScale:!0,tooltips:{callbacks:{title:function(){return""},label:function(e,t){return t.labels[e.index]+": "+e.yLabel}}}},t.controllers.polarArea=function(e,t){this.initialize.call(this,e,t)},i.extend(t.controllers.polarArea.prototype,{initialize:function(e,t){this.chart=e,this.index=t,this.linkScales(),this.addElements()},updateIndex:function(e){this.index=e},linkScales:function(){},getDataset:function(){return this.chart.data.datasets[this.index]},getScaleForId:function(e){return this.chart.scales[e]
},addElements:function(){this.getDataset().metaData=this.getDataset().metaData||[],i.each(this.getDataset().data,function(e,i){this.getDataset().metaData[i]=this.getDataset().metaData[i]||new t.elements.Arc({_chart:this.chart.chart,_datasetIndex:this.index,_index:i})},this)},addElementAndReset:function(e){this.getDataset().metaData=this.getDataset().metaData||[];var i=new t.elements.Arc({_chart:this.chart.chart,_datasetIndex:this.index,_index:e});this.updateElement(i,e,!0),this.getDataset().metaData.splice(e,0,i)},removeElement:function(e){this.getDataset().metaData.splice(e,1)},reset:function(){this.update(!0)},buildOrUpdateElements:function(){var e=this.getDataset().data.length,t=this.getDataset().metaData.length;if(t>e)this.getDataset().metaData.splice(e,t-e);else if(e>t)for(var i=t;e>i;++i)this.addElementAndReset(i)},getVisibleDatasetCount:function(){return i.where(this.chart.data.datasets,function(e){return i.isDatasetVisible(e)}).length},update:function(e){this.chart.outerRadius=Math.max((i.min([this.chart.chart.width,this.chart.chart.height])-this.chart.options.elements.arc.borderWidth/2)/2,0),this.chart.innerRadius=Math.max(this.chart.options.cutoutPercentage?this.chart.outerRadius/100*this.chart.options.cutoutPercentage:1,0),this.chart.radiusLength=(this.chart.outerRadius-this.chart.innerRadius)/this.getVisibleDatasetCount(),this.getDataset().total=0,i.each(this.getDataset().data,function(e){this.getDataset().total+=Math.abs(e)},this),this.outerRadius=this.chart.outerRadius-this.chart.radiusLength*this.index,this.innerRadius=this.outerRadius-this.chart.radiusLength,i.each(this.getDataset().metaData,function(t,i){this.updateElement(t,i,e)},this)},updateElement:function(e,t,a){var n=1/this.getDataset().data.length*2,s=-.5*Math.PI+Math.PI*n*t,r=s+n*Math.PI,o={x:this.chart.chart.width/2,y:this.chart.chart.height/2,innerRadius:0,outerRadius:this.chart.options.animateScale?0:this.chart.scale.getDistanceFromCenterForValue(this.getDataset().data[t]),startAngle:this.chart.options.animateRotate?Math.PI*-.5:s,endAngle:this.chart.options.animateRotate?Math.PI*-.5:r,backgroundColor:e.custom&&e.custom.backgroundColor?e.custom.backgroundColor:i.getValueAtIndexOrDefault(this.getDataset().backgroundColor,t,this.chart.options.elements.arc.backgroundColor),hoverBackgroundColor:e.custom&&e.custom.hoverBackgroundColor?e.custom.hoverBackgroundColor:i.getValueAtIndexOrDefault(this.getDataset().hoverBackgroundColor,t,this.chart.options.elements.arc.hoverBackgroundColor),borderWidth:e.custom&&e.custom.borderWidth?e.custom.borderWidth:i.getValueAtIndexOrDefault(this.getDataset().borderWidth,t,this.chart.options.elements.arc.borderWidth),borderColor:e.custom&&e.custom.borderColor?e.custom.borderColor:i.getValueAtIndexOrDefault(this.getDataset().borderColor,t,this.chart.options.elements.arc.borderColor),label:i.getValueAtIndexOrDefault(this.chart.data.labels,t,this.chart.data.labels[t])};i.extend(e,{_chart:this.chart.chart,_datasetIndex:this.index,_index:t,_scale:this.chart.scale,_model:a?o:{x:this.chart.chart.width/2,y:this.chart.chart.height/2,innerRadius:0,outerRadius:this.chart.scale.getDistanceFromCenterForValue(this.getDataset().data[t]),startAngle:s,endAngle:r,backgroundColor:e.custom&&e.custom.backgroundColor?e.custom.backgroundColor:i.getValueAtIndexOrDefault(this.getDataset().backgroundColor,t,this.chart.options.elements.arc.backgroundColor),hoverBackgroundColor:e.custom&&e.custom.hoverBackgroundColor?e.custom.hoverBackgroundColor:i.getValueAtIndexOrDefault(this.getDataset().hoverBackgroundColor,t,this.chart.options.elements.arc.hoverBackgroundColor),borderWidth:e.custom&&e.custom.borderWidth?e.custom.borderWidth:i.getValueAtIndexOrDefault(this.getDataset().borderWidth,t,this.chart.options.elements.arc.borderWidth),borderColor:e.custom&&e.custom.borderColor?e.custom.borderColor:i.getValueAtIndexOrDefault(this.getDataset().borderColor,t,this.chart.options.elements.arc.borderColor),label:i.getValueAtIndexOrDefault(this.chart.data.labels,t,this.chart.data.labels[t])}}),e.pivot()},draw:function(e){var t=e||1;i.each(this.getDataset().metaData,function(e){e.transition(t).draw()},this)},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],a=e._index;e._model.backgroundColor=e.custom&&e.custom.hoverBackgroundColor?e.custom.hoverBackgroundColor:i.getValueAtIndexOrDefault(t.hoverBackgroundColor,a,i.color(e._model.backgroundColor).saturate(.5).darken(.1).rgbString()),e._model.borderColor=e.custom&&e.custom.hoverBorderColor?e.custom.hoverBorderColor:i.getValueAtIndexOrDefault(t.hoverBorderColor,a,i.color(e._model.borderColor).saturate(.5).darken(.1).rgbString()),e._model.borderWidth=e.custom&&e.custom.hoverBorderWidth?e.custom.hoverBorderWidth:i.getValueAtIndexOrDefault(t.borderWidth,a,e._model.borderWidth)},removeHoverStyle:function(e){var t=(this.chart.data.datasets[e._datasetIndex],e._index);e._model.backgroundColor=e.custom&&e.custom.backgroundColor?e.custom.backgroundColor:i.getValueAtIndexOrDefault(this.getDataset().backgroundColor,t,this.chart.options.elements.arc.backgroundColor),e._model.borderColor=e.custom&&e.custom.borderColor?e.custom.borderColor:i.getValueAtIndexOrDefault(this.getDataset().borderColor,t,this.chart.options.elements.arc.borderColor),e._model.borderWidth=e.custom&&e.custom.borderWidth?e.custom.borderWidth:i.getValueAtIndexOrDefault(this.getDataset().borderWidth,t,this.chart.options.elements.arc.borderWidth)},calculateCircumference:function(e){return this.getDataset().total>0?2*Math.PI*(e/this.getDataset().total):0},updateScaleRange:function(){i.extend(this.chart.scale,{size:i.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})}})}.call(this),function(){"use strict";var e=this,t=e.Chart,i=t.helpers;t.defaults.radar={scale:{type:"radialLinear"},elements:{line:{tension:0}}},t.controllers.radar=function(e,t){this.initialize.call(this,e,t)},i.extend(t.controllers.radar.prototype,{initialize:function(e,t){this.chart=e,this.index=t,this.linkScales(),this.addElements()},updateIndex:function(e){this.index=e},linkScales:function(){},getDataset:function(){return this.chart.data.datasets[this.index]},getScaleForId:function(e){return this.chart.scales[e]},addElements:function(){this.getDataset().metaData=this.getDataset().metaData||[],this.getDataset().metaDataset=this.getDataset().metaDataset||new t.elements.Line({_chart:this.chart.chart,_datasetIndex:this.index,_points:this.getDataset().metaData,_loop:!0}),i.each(this.getDataset().data,function(e,i){this.getDataset().metaData[i]=this.getDataset().metaData[i]||new t.elements.Point({_chart:this.chart.chart,_datasetIndex:this.index,_index:i,_model:{x:0,y:0}})},this)},addElementAndReset:function(e){this.getDataset().metaData=this.getDataset().metaData||[];var i=new t.elements.Point({_chart:this.chart.chart,_datasetIndex:this.index,_index:e});this.updateElement(i,e,!0),this.getDataset().metaData.splice(e,0,i),this.updateBezierControlPoints()},removeElement:function(e){this.getDataset().metaData.splice(e,1)},reset:function(){this.update(!0)},buildOrUpdateElements:function(){var e=this.getDataset().data.length,t=this.getDataset().metaData.length;if(t>e)this.getDataset().metaData.splice(e,t-e);else if(e>t)for(var i=t;e>i;++i)this.addElementAndReset(i)},update:function(e){var t,a=(this.getDataset().metaDataset,this.getDataset().metaData),n=this.chart.scale;t=n.min<0&&n.max<0?n.getPointPositionForValue(0,n.max):n.min>0&&n.max>0?n.getPointPositionForValue(0,n.min):n.getPointPositionForValue(0,0),i.extend(this.getDataset().metaDataset,{_datasetIndex:this.index,_children:this.getDataset().metaData,_model:{tension:this.getDataset().tension||this.chart.options.elements.line.tension,backgroundColor:this.getDataset().backgroundColor||this.chart.options.elements.line.backgroundColor,borderWidth:this.getDataset().borderWidth||this.chart.options.elements.line.borderWidth,borderColor:this.getDataset().borderColor||this.chart.options.elements.line.borderColor,fill:void 0!==this.getDataset().fill?this.getDataset().fill:this.chart.options.elements.line.fill,scaleTop:n.top,scaleBottom:n.bottom,scaleZero:t}}),this.getDataset().metaDataset.pivot(),i.each(a,function(t,i){this.updateElement(t,i,e)},this),this.updateBezierControlPoints()},updateElement:function(e,t,a){var n=this.chart.scale.getPointPositionForValue(t,this.getDataset().data[t]);i.extend(e,{_datasetIndex:this.index,_index:t,_scale:this.chart.scale,_model:{x:a?this.chart.scale.xCenter:n.x,y:a?this.chart.scale.yCenter:n.y,tension:e.custom&&e.custom.tension?e.custom.tension:this.chart.options.elements.line.tension,radius:e.custom&&e.custom.radius?e.custom.pointRadius:i.getValueAtIndexOrDefault(this.getDataset().pointRadius,t,this.chart.options.elements.point.radius),backgroundColor:e.custom&&e.custom.backgroundColor?e.custom.backgroundColor:i.getValueAtIndexOrDefault(this.getDataset().pointBackgroundColor,t,this.chart.options.elements.point.backgroundColor),borderColor:e.custom&&e.custom.borderColor?e.custom.borderColor:i.getValueAtIndexOrDefault(this.getDataset().pointBorderColor,t,this.chart.options.elements.point.borderColor),borderWidth:e.custom&&e.custom.borderWidth?e.custom.borderWidth:i.getValueAtIndexOrDefault(this.getDataset().pointBorderWidth,t,this.chart.options.elements.point.borderWidth),hitRadius:e.custom&&e.custom.hitRadius?e.custom.hitRadius:i.getValueAtIndexOrDefault(this.getDataset().hitRadius,t,this.chart.options.elements.point.hitRadius)}}),e._model.skip=e.custom&&e.custom.skip?e.custom.skip:isNaN(e._model.x)||isNaN(e._model.y)},updateBezierControlPoints:function(){i.each(this.getDataset().metaData,function(e,t){var a=i.splineCurve(i.previousItem(this.getDataset().metaData,t,!0)._model,e._model,i.nextItem(this.getDataset().metaData,t,!0)._model,e._model.tension);e._model.controlPointPreviousX=a.previous.x,e._model.controlPointNextX=a.next.x,e._model.controlPointNextY=a.next.y>this.chart.chartArea.bottom?this.chart.chartArea.bottom:a.next.y<this.chart.chartArea.top?this.chart.chartArea.top:a.next.y,e._model.controlPointPreviousY=a.previous.y>this.chart.chartArea.bottom?this.chart.chartArea.bottom:a.previous.y<this.chart.chartArea.top?this.chart.chartArea.top:a.previous.y,e.pivot()},this)},draw:function(e){var t=e||1;i.each(this.getDataset().metaData,function(e){e.transition(t)},this),this.getDataset().metaDataset.transition(t).draw(),i.each(this.getDataset().metaData,function(e){e.draw()})},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],a=e._index;e._model.radius=e.custom&&e.custom.radius?e.custom.radius:i.getValueAtIndexOrDefault(t.pointHoverRadius,a,this.chart.options.elements.point.hoverRadius),e._model.backgroundColor=e.custom&&e.custom.hoverBackgroundColor?e.custom.hoverBackgroundColor:i.getValueAtIndexOrDefault(t.pointHoverBackgroundColor,a,i.color(e._model.backgroundColor).saturate(.5).darken(.1).rgbString()),e._model.borderColor=e.custom&&e.custom.hoverBorderColor?e.custom.hoverBorderColor:i.getValueAtIndexOrDefault(t.pointHoverBorderColor,a,i.color(e._model.borderColor).saturate(.5).darken(.1).rgbString()),e._model.borderWidth=e.custom&&e.custom.hoverBorderWidth?e.custom.hoverBorderWidth:i.getValueAtIndexOrDefault(t.pointBorderWidth,a,e._model.borderWidth)},removeHoverStyle:function(e){var t=(this.chart.data.datasets[e._datasetIndex],e._index);e._model.radius=e.custom&&e.custom.radius?e.custom.radius:i.getValueAtIndexOrDefault(this.getDataset().radius,t,this.chart.options.elements.point.radius),e._model.backgroundColor=e.custom&&e.custom.backgroundColor?e.custom.backgroundColor:i.getValueAtIndexOrDefault(this.getDataset().pointBackgroundColor,t,this.chart.options.elements.point.backgroundColor),e._model.borderColor=e.custom&&e.custom.borderColor?e.custom.borderColor:i.getValueAtIndexOrDefault(this.getDataset().pointBorderColor,t,this.chart.options.elements.point.borderColor),e._model.borderWidth=e.custom&&e.custom.borderWidth?e.custom.borderWidth:i.getValueAtIndexOrDefault(this.getDataset().pointBorderWidth,t,this.chart.options.elements.point.borderWidth)}})}.call(this),function(){"use strict";var e=this,t=e.Chart,i=(t.helpers,{position:"bottom"}),a=t.Scale.extend({buildTicks:function(){this.ticks=this.data.labels},getLabelForIndex:function(e){return this.ticks[e]},getPixelForValue:function(e,t,i,a){if(this.isHorizontal()){var n=this.width-(this.paddingLeft+this.paddingRight),s=n/Math.max(this.data.labels.length-(this.options.gridLines.offsetGridLines?0:1),1),r=s*t+this.paddingLeft;return this.options.gridLines.offsetGridLines&&a&&(r+=s/2),this.left+Math.round(r)}var o=this.height-(this.paddingTop+this.paddingBottom),l=o/Math.max(this.data.labels.length-(this.options.gridLines.offsetGridLines?0:1),1),d=l*t+this.paddingTop;return this.options.gridLines.offsetGridLines&&a&&(d+=l/2),this.top+Math.round(d)}});t.scaleService.registerScaleType("category",a,i)}.call(this),function(){"use strict";var e=this,t=e.Chart,i=t.helpers,a={position:"left",ticks:{callback:function(e,t,a){var n=a[1]-a[0];Math.abs(n)>1&&e!==Math.floor(e)&&(n=e-Math.floor(e));var s=i.log10(Math.abs(n)),r="";if(0!==e){var o=-1*Math.floor(s);o=Math.max(Math.min(o,20),0),r=e.toFixed(o)}else r="0";return r}}},n=t.Scale.extend({buildTicks:function(){if(this.min=null,this.max=null,this.options.stacked){var e={};i.each(this.data.datasets,function(t){void 0===e[t.type]&&(e[t.type]={positiveValues:[],negativeValues:[]});var a=e[t.type].positiveValues,n=e[t.type].negativeValues;i.isDatasetVisible(t)&&(this.isHorizontal()?t.xAxisID===this.id:t.yAxisID===this.id)&&i.each(t.data,function(e,t){var i=this.getRightValue(e);isNaN(i)||(a[t]=a[t]||0,n[t]=n[t]||0,this.options.relativePoints?a[t]=100:0>i?n[t]+=i:a[t]+=i)},this)},this),i.each(e,function(e){var t=e.positiveValues.concat(e.negativeValues),a=i.min(t),n=i.max(t);this.min=null===this.min?a:Math.min(this.min,a),this.max=null===this.max?n:Math.max(this.max,n)},this)}else i.each(this.data.datasets,function(e){i.isDatasetVisible(e)&&(this.isHorizontal()?e.xAxisID===this.id:e.yAxisID===this.id)&&i.each(e.data,function(e){var t=this.getRightValue(e);isNaN(t)||(null===this.min?this.min=t:t<this.min&&(this.min=t),null===this.max?this.max=t:t>this.max&&(this.max=t))},this)},this);this.ticks=[];var t;if(t=this.isHorizontal()?Math.min(this.options.ticks.maxTicksLimit?this.options.ticks.maxTicksLimit:11,Math.ceil(this.width/50)):Math.min(this.options.ticks.maxTicksLimit?this.options.ticks.maxTicksLimit:11,Math.ceil(this.height/(2*this.options.ticks.fontSize))),t=Math.max(2,t),this.options.ticks.beginAtZero){var a=i.sign(this.min),n=i.sign(this.max);0>a&&0>n?this.max=0:a>0&&n>0&&(this.min=0)}this.options.ticks.suggestedMin&&(this.min=Math.min(this.min,this.options.ticks.suggestedMin)),this.options.ticks.suggestedMax&&(this.max=Math.max(this.max,this.options.ticks.suggestedMax)),this.min===this.max&&(this.min--,this.max++);for(var s=i.niceNum(this.max-this.min,!1),r=i.niceNum(s/(t-1),!0),o=Math.floor(this.min/r)*r,l=Math.ceil(this.max/r)*r,d=Math.ceil((l-o)/r),c=0;d>=c;++c)this.ticks.push(o+c*r);("left"==this.options.position||"right"==this.options.position)&&this.ticks.reverse(),this.max=i.max(this.ticks),this.min=i.min(this.ticks),this.options.ticks.reverse?(this.ticks.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),this.zeroLineIndex=this.ticks.indexOf(0)},getLabelForIndex:function(e,t){return this.getRightValue(this.data.datasets[t].data[e])},getPixelForValue:function(e){var t,i=this.getRightValue(e),a=this.end-this.start;if(this.isHorizontal()){var n=this.width-(this.paddingLeft+this.paddingRight);return t=this.left+n/a*(i-this.start),Math.round(t+this.paddingLeft)}var s=this.height-(this.paddingTop+this.paddingBottom);return t=this.bottom-this.paddingBottom-s/a*(i-this.start),Math.round(t)}});t.scaleService.registerScaleType("linear",n,a)}.call(this),function(){"use strict";var e=this,t=e.Chart,i=t.helpers,a={position:"left",ticks:{callback:function(e){var i=e/Math.pow(10,Math.floor(t.helpers.log10(e)));return 1===i||2===i||5===i?e.toExponential():""}}},n=t.Scale.extend({buildTicks:function(){if(this.min=null,this.max=null,this.options.stacked){var e={};i.each(this.data.datasets,function(t){i.isDatasetVisible(t)&&(this.isHorizontal()?t.xAxisID===this.id:t.yAxisID===this.id)&&(void 0===e[t.type]&&(e[t.type]=[]),i.each(t.data,function(i,a){var n=e[t.type],s=this.getRightValue(i);isNaN(s)||(n[a]=n[a]||0,this.options.relativePoints?n[a]=100:n[a]+=s)},this))},this),i.each(e,function(e){var t=i.min(e),a=i.max(e);this.min=null===this.min?t:Math.min(this.min,t),this.max=null===this.max?a:Math.max(this.max,a)},this)}else i.each(this.data.datasets,function(e){i.isDatasetVisible(e)&&(this.isHorizontal()?e.xAxisID===this.id:e.yAxisID===this.id)&&i.each(e.data,function(e){var t=this.getRightValue(e);isNaN(t)||(null===this.min?this.min=t:t<this.min&&(this.min=t),null===this.max?this.max=t:t>this.max&&(this.max=t))},this)},this);this.min===this.max&&(0!==this.min&&null!==this.min?(this.min=Math.pow(10,Math.floor(i.log10(this.min))-1),this.max=Math.pow(10,Math.floor(i.log10(this.max))+1)):(this.min=1,this.max=10)),this.tickValues=[];for(var t=Math.floor(i.log10(this.min)),a=Math.ceil(i.log10(this.max)),n=t;a>n;++n)for(var s=1;10>s;++s)this.tickValues.push(s*Math.pow(10,n));this.tickValues.push(1*Math.pow(10,a)),("left"==this.options.position||"right"==this.options.position)&&this.tickValues.reverse(),this.max=i.max(this.tickValues),this.min=i.min(this.tickValues),this.options.ticks.reverse?(this.tickValues.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),this.ticks=this.tickValues.slice()},getLabelForIndex:function(e,t){return this.getRightValue(this.data.datasets[t].data[e])},getPixelForTick:function(e,t){return this.getPixelForValue(this.tickValues[e],null,null,t)},getPixelForValue:function(e){var t,a=this.getRightValue(e),n=i.log10(this.end)-i.log10(this.start);if(this.isHorizontal()){if(0!==a){var s=this.width-(this.paddingLeft+this.paddingRight);return t=this.left+s/n*(i.log10(a)-i.log10(this.start)),t+this.paddingLeft}t=this.left+this.paddingLeft}else{if(0!==a){var r=this.height-(this.paddingTop+this.paddingBottom);return this.bottom-this.paddingBottom-r/n*(i.log10(a)-i.log10(this.start))}t=this.top+this.paddingTop}}});t.scaleService.registerScaleType("logarithmic",n,a)}.call(this),function(){"use strict";var e=this,t=e.Chart,i=t.helpers,a={display:!0,animate:!0,lineArc:!1,position:"chartArea",angleLines:{show:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2},pointLabels:{fontFamily:"'Arial'",fontStyle:"normal",fontSize:10,fontColor:"#666"}},n=t.Scale.extend({getValueCount:function(){return this.data.labels.length},setDimensions:function(){this.width=this.maxWidth,this.height=this.maxHeight,this.xCenter=Math.round(this.width/2),this.yCenter=Math.round(this.height/2);var e=i.min([this.height,this.width]);this.drawingArea=this.options.display?e/2-(this.options.ticks.fontSize/2+this.options.ticks.backdropPaddingY):e/2},buildTicks:function(){this.min=null,this.max=null,i.each(this.data.datasets,function(e){i.isDatasetVisible(e)&&i.each(e.data,function(e){var t=this.getRightValue(e);isNaN(t)||(null===this.min?this.min=t:t<this.min&&(this.min=t),null===this.max?this.max=t:t>this.max&&(this.max=t))},this)},this),this.min===this.max&&(this.min--,this.max++),this.ticks=[];var e=Math.min(this.options.ticks.maxTicksLimit?this.options.ticks.maxTicksLimit:11,Math.ceil(this.drawingArea/(1.5*this.options.ticks.fontSize)));if(e=Math.max(2,e),this.options.ticks.beginAtZero){var t=i.sign(this.min),a=i.sign(this.max);0>t&&0>a?this.max=0:t>0&&a>0&&(this.min=0)}for(var n=i.niceNum(this.max-this.min,!1),s=i.niceNum(n/(e-1),!0),r=Math.floor(this.min/s)*s,o=Math.ceil(this.max/s)*s,l=r;o>=l;l+=s)this.ticks.push(l);this.max=i.max(this.ticks),this.min=i.min(this.ticks),this.options.ticks.reverse?(this.ticks.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),this.zeroLineIndex=this.ticks.indexOf(0)},getLabelForIndex:function(e,t){return this.getRightValue(this.data.datasets[t].data[e])},getCircumference:function(){return 2*Math.PI/this.getValueCount()},fit:function(){var e,t,a,n,s,r,o,l,d,c,u,g,h=i.min([this.height/2-this.options.pointLabels.fontSize-5,this.width/2]),p=this.width,m=0;for(this.ctx.font=i.fontString(this.options.pointLabels.fontSize,this.options.pointLabels.fontStyle,this.options.pointLabels.fontFamily),t=0;t<this.getValueCount();t++)e=this.getPointPosition(t,h),a=this.ctx.measureText(this.options.ticks.callback(this.data.labels[t])).width+5,0===t||t===this.getValueCount()/2?(n=a/2,e.x+n>p&&(p=e.x+n,s=t),e.x-n<m&&(m=e.x-n,o=t)):t<this.getValueCount()/2?e.x+a>p&&(p=e.x+a,s=t):t>this.getValueCount()/2&&e.x-a<m&&(m=e.x-a,o=t);d=m,c=Math.ceil(p-this.width),r=this.getIndexAngle(s),l=this.getIndexAngle(o),u=c/Math.sin(r+Math.PI/2),g=d/Math.sin(l+Math.PI/2),u=i.isNumber(u)?u:0,g=i.isNumber(g)?g:0,this.drawingArea=Math.round(h-(g+u)/2),this.setCenterPoint(g,u)},setCenterPoint:function(e,t){var i=this.width-t-this.drawingArea,a=e+this.drawingArea;this.xCenter=Math.round((a+i)/2+this.left),this.yCenter=Math.round(this.height/2+this.top)},getIndexAngle:function(e){var t=2*Math.PI/this.getValueCount();return e*t-Math.PI/2},getDistanceFromCenterForValue:function(e){if(null===e)return 0;var t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t},getPointPosition:function(e,t){var i=this.getIndexAngle(e);return{x:Math.round(Math.cos(i)*t)+this.xCenter,y:Math.round(Math.sin(i)*t)+this.yCenter}},getPointPositionForValue:function(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))},draw:function(){if(this.options.display){var e=this.ctx;if(i.each(this.ticks,function(t,a){if(a>0||this.options.reverse){var n=this.getDistanceFromCenterForValue(this.ticks[a]),s=this.yCenter-n;if(this.options.gridLines.show)if(e.strokeStyle=this.options.gridLines.color,e.lineWidth=this.options.gridLines.lineWidth,this.options.lineArc)e.beginPath(),e.arc(this.xCenter,this.yCenter,n,0,2*Math.PI),e.closePath(),e.stroke();else{e.beginPath();for(var r=0;r<this.getValueCount();r++){var o=this.getPointPosition(r,this.getDistanceFromCenterForValue(this.ticks[a]));0===r?e.moveTo(o.x,o.y):e.lineTo(o.x,o.y)}e.closePath(),e.stroke()}if(this.options.ticks.show){if(e.font=i.fontString(this.options.ticks.fontSize,this.options.ticks.fontStyle,this.options.ticks.fontFamily),this.options.ticks.showLabelBackdrop){var l=e.measureText(t).width;e.fillStyle=this.options.ticks.backdropColor,e.fillRect(this.xCenter-l/2-this.options.ticks.backdropPaddingX,s-this.options.ticks.fontSize/2-this.options.ticks.backdropPaddingY,l+2*this.options.ticks.backdropPaddingX,this.options.ticks.fontSize+2*this.options.ticks.backdropPaddingY)}e.textAlign="center",e.textBaseline="middle",e.fillStyle=this.options.ticks.fontColor,e.fillText(t,this.xCenter,s)}}},this),!this.options.lineArc){e.lineWidth=this.options.angleLines.lineWidth,e.strokeStyle=this.options.angleLines.color;for(var t=this.getValueCount()-1;t>=0;t--){if(this.options.angleLines.show){var a=this.getPointPosition(t,this.getDistanceFromCenterForValue(this.options.reverse?this.min:this.max));e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(a.x,a.y),e.stroke(),e.closePath()}var n=this.getPointPosition(t,this.getDistanceFromCenterForValue(this.options.reverse?this.min:this.max)+5);e.font=i.fontString(this.options.pointLabels.fontSize,this.options.pointLabels.fontStyle,this.options.pointLabels.fontFamily),e.fillStyle=this.options.pointLabels.fontColor;var s=this.data.labels.length,r=this.data.labels.length/2,o=r/2,l=o>t||t>s-o,d=t===o||t===s-o;e.textAlign=0===t?"center":t===r?"center":r>t?"left":"right",e.textBaseline=d?"middle":l?"bottom":"top",e.fillText(this.data.labels[t],n.x,n.y)}}}}});t.scaleService.registerScaleType("radialLinear",n,a)}.call(this),function(){"use strict";if(!window.moment)return void console.warn("Chart.js - Moment.js could not be found! You must include it before Chart.js to use the time scale. Download at http://momentjs.com/");var e=this,t=e.Chart,i=t.helpers,a={units:["millisecond","second","minute","hour","day","week","month","quarter","year"],unit:{millisecond:{display:"SSS [ms]",maxStep:1e3},second:{display:"h:mm:ss a",maxStep:60},minute:{display:"h:mm:ss a",maxStep:60},hour:{display:"MMM D, hA",maxStep:24},day:{display:"ll",maxStep:7},week:{display:"ll",maxStep:4.3333},month:{display:"MMM YYYY",maxStep:12},quarter:{display:"[Q]Q - YYYY",maxStep:4},year:{display:"YYYY",maxStep:!1}}},n={position:"bottom",time:{format:!1,unit:!1,round:!1,displayFormat:!1}},s=t.Scale.extend({getLabelMoment:function(e,t){return this.labelMoments[e][t]},buildLabelMoments:function(){var e=[];this.data.labels&&this.data.labels.length>0?(i.each(this.data.labels,function(t){var i=this.parseTime(t);this.options.time.round&&i.startOf(this.options.time.round),e.push(i)},this),this.firstTick=this.options.time.min?this.parseTime(this.options.time.min):moment.min.call(this,e),this.lastTick=this.options.time.max?this.parseTime(this.options.time.max):moment.max.call(this,e)):(this.firstTick=null,this.lastTick=null),i.each(this.data.datasets,function(t){var a=[];"object"==typeof t.data[0]?i.each(t.data,function(e){var t=this.parseTime(this.getRightValue(e));this.options.time.round&&t.startOf(this.options.time.round),a.push(t),this.firstTick=null!==this.firstTick?moment.min(this.firstTick,t):t,this.lastTick=null!==this.lastTick?moment.max(this.lastTick,t):t},this):a=e,this.labelMoments.push(a)},this),this.firstTick=this.firstTick.clone(),this.lastTick=this.lastTick.clone()},buildTicks:function(){if(this.ticks=[],this.labelMoments=[],this.buildLabelMoments(),this.options.time.unit)this.tickUnit=this.options.time.unit||"day",this.displayFormat=a.unit[this.tickUnit].display,this.tickRange=Math.ceil(this.lastTick.diff(this.firstTick,this.tickUnit,!0));else{var e=this.width-(this.paddingLeft+this.paddingRight),t=e/this.options.ticks.fontSize+4,n=this.options.time.round?0:2;this.tickUnit="millisecond",this.tickRange=Math.ceil(this.lastTick.diff(this.firstTick,this.tickUnit,!0)+n),this.displayFormat=a.unit[this.tickUnit].display,i.each(a.units,function(e){this.tickRange<=t||(this.tickUnit=e,this.tickRange=Math.ceil(this.lastTick.diff(this.firstTick,this.tickUnit)+n),this.displayFormat=a.unit[e].display)},this)}this.firstTick.startOf(this.tickUnit),this.lastTick.endOf(this.tickUnit),this.smallestLabelSeparation=this.width,i.each(this.data.datasets,function(e,t){for(var i=1;i<this.labelMoments[t].length;i++)this.smallestLabelSeparation=Math.min(this.smallestLabelSeparation,this.labelMoments[t][i].diff(this.labelMoments[t][i-1],this.tickUnit,!0))},this),this.options.time.displayFormat&&(this.displayFormat=this.options.time.displayFormat);for(var s=0;s<=this.tickRange;++s)this.ticks.push(this.firstTick.clone().add(s,this.tickUnit))},getLabelForIndex:function(e,t){var i=this.data.labels&&e<this.data.labels.length?this.data.labels[e]:"";return"object"==typeof this.data.datasets[t].data[0]&&(i=this.getRightValue(this.data.datasets[t].data[e])),i},convertTicksToLabels:function(){this.ticks=this.ticks.map(function(e,t,i){var n=e.format(this.options.time.displayFormat?this.options.time.displayFormat:a.unit[this.tickUnit].display);return this.options.ticks.userCallback?this.options.ticks.userCallback(n,t,i):n},this)},getPixelForValue:function(e,t,i){var a=this.getLabelMoment(i,t),n=a.diff(this.firstTick,this.tickUnit,!0),s=n/this.tickRange;if(this.isHorizontal()){var r=this.width-(this.paddingLeft+this.paddingRight),o=(r/Math.max(this.ticks.length-1,1),r*s+this.paddingLeft);return this.left+Math.round(o)}var l=this.height-(this.paddingTop+this.paddingBottom),d=(l/Math.max(this.ticks.length-1,1),l*s+this.paddingTop);return this.top+Math.round(d)},parseTime:function(e){return"function"==typeof e.getMonth||"number"==typeof e?moment(e):e.isValid&&e.isValid()?e:"string"!=typeof this.options.time.format&&this.options.time.format.call?this.options.time.format(e):moment(e,this.options.time.format)}});t.scaleService.registerScaleType("time",s,n)}.call(this),function(){"use strict";var e=this,t=e.Chart,i=t.helpers;t.defaults.global.elements.arc={backgroundColor:t.defaults.global.defaultColor,borderColor:"#fff",borderWidth:2},t.elements.Arc=t.Element.extend({inLabelRange:function(e){var t=this._view;return t?Math.pow(e-t.x,2)<Math.pow(t.radius+t.hoverRadius,2):!1},inRange:function(e,t){var a=this._view;if(a){var n=i.getAngleFromPoint(a,{x:e,y:t}),s=a.startAngle<-.5*Math.PI?a.startAngle+2*Math.PI:a.startAngle>1.5*Math.PI?a.startAngle-2*Math.PI:a.startAngle,r=a.endAngle<-.5*Math.PI?a.endAngle+2*Math.PI:a.endAngle>1.5*Math.PI?a.endAngle-2*Math.PI:a.endAngle,o=n.angle>=s&&n.angle<=r,l=n.distance>=a.innerRadius&&n.distance<=a.outerRadius;return o&&l}return!1},tooltipPosition:function(){var e=this._view,t=e.startAngle+(e.endAngle-e.startAngle)/2,i=(e.outerRadius-e.innerRadius)/2+e.innerRadius;return{x:e.x+Math.cos(t)*i,y:e.y+Math.sin(t)*i}},draw:function(){var e=this._chart.ctx,t=this._view;e.beginPath(),e.arc(t.x,t.y,t.outerRadius,t.startAngle,t.endAngle),e.arc(t.x,t.y,t.innerRadius,t.endAngle,t.startAngle,!0),e.closePath(),e.strokeStyle=t.borderColor,e.lineWidth=t.borderWidth,e.fillStyle=t.backgroundColor,e.fill(),e.lineJoin="bevel",t.borderWidth&&e.stroke()}})}.call(this),function(){"use strict";var e=this,t=e.Chart,i=t.helpers;t.defaults.global.elements.line={tension:.4,backgroundColor:t.defaults.global.defaultColor,borderWidth:3,borderColor:t.defaults.global.defaultColor,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",fill:!0},t.elements.Line=t.Element.extend({draw:function(){var e=this._view,a=this._chart.ctx,n=this._children[0],s=this._children[this._children.length-1];if(a.save(),i.each(this._children,function(t,n){var s=i.previousItem(this._children,n),r=i.nextItem(this._children,n);return n||a.moveTo(t._view.x,e.scaleZero),t._view.skip&&!this.loop?(a.lineTo(s._view.x,e.scaleZero),void a.moveTo(r._view.x,e.scaleZero)):s._view.skip?void a.lineTo(t._view.x,t._view.y):e.tension>0&&n?void a.bezierCurveTo(s._view.controlPointNextX,s._view.controlPointNextY,t._view.controlPointPreviousX,t._view.controlPointPreviousY,t._view.x,t._view.y):void a.lineTo(t._view.x,t._view.y)},this),this._loop){if(e.tension>0&&!n._view.skip)return void a.bezierCurveTo(s._view.controlPointNextX,s._view.controlPointNextY,n._view.controlPointPreviousX,n._view.controlPointPreviousY,n._view.x,n._view.y);a.lineTo(n._view.x,n._view.y)}if(this._children.length>0&&e.fill&&(a.lineTo(this._children[this._children.length-1]._view.x,e.scaleZero),a.lineTo(this._children[0]._view.x,e.scaleZero),a.fillStyle=e.backgroundColor||t.defaults.global.defaultColor,a.closePath(),a.fill()),a.lineCap=e.borderCapStyle||t.defaults.global.elements.line.borderCapStyle,a.setLineDash&&a.setLineDash(e.borderDash||t.defaults.global.elements.line.borderDash),a.lineDashOffset=e.borderDashOffset||t.defaults.global.elements.line.borderDashOffset,a.lineJoin=e.borderJoinStyle||t.defaults.global.elements.line.borderJoinStyle,a.lineWidth=e.borderWidth||t.defaults.global.elements.line.borderWidth,a.strokeStyle=e.borderColor||t.defaults.global.defaultColor,a.beginPath(),i.each(this._children,function(t,n){var s=i.previousItem(this._children,n),r=i.nextItem(this._children,n);return n||a.moveTo(t._view.x,e.scaleZero),t._view.skip&&!this.loop?void a.moveTo(r._view.x,e.scaleZero):s._view.skip?void a.moveTo(t._view.x,t._view.y):(n||a.moveTo(t._view.x,t._view.y),e.tension>0&&n?void a.bezierCurveTo(s._view.controlPointNextX,s._view.controlPointNextY,t._view.controlPointPreviousX,t._view.controlPointPreviousY,t._view.x,t._view.y):void a.lineTo(t._view.x,t._view.y))},this),this._loop&&!n._view.skip){if(e.tension>0)return void a.bezierCurveTo(s._view.controlPointNextX,s._view.controlPointNextY,n._view.controlPointPreviousX,n._view.controlPointPreviousY,n._view.x,n._view.y);
a.lineTo(n._view.x,n._view.y)}a.stroke(),a.restore()}})}.call(this),function(){"use strict";var e=this,t=e.Chart;t.helpers,t.defaults.global.elements.point={radius:3,backgroundColor:t.defaults.global.defaultColor,borderWidth:1,borderColor:t.defaults.global.defaultColor,hitRadius:1,hoverRadius:4,hoverBorderWidth:1},t.elements.Point=t.Element.extend({inRange:function(e,t){var i=this._view;if(i){var a=i.hitRadius+i.radius;return Math.pow(e-i.x,2)+Math.pow(t-i.y,2)<Math.pow(a,2)}return!1},inLabelRange:function(e){var t=this._view;return t?Math.pow(e-t.x,2)<Math.pow(t.radius+t.hitRadius,2):!1},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y,padding:e.radius+e.borderWidth}},draw:function(){var e=this._view,i=this._chart.ctx;e.skip||(e.radius>0||e.borderWidth>0)&&(i.beginPath(),i.arc(e.x,e.y,e.radius||t.defaults.global.elements.point.radius,0,2*Math.PI),i.closePath(),i.strokeStyle=e.borderColor||t.defaults.global.defaultColor,i.lineWidth=e.borderWidth||t.defaults.global.elements.point.borderWidth,i.fillStyle=e.backgroundColor||t.defaults.global.defaultColor,i.fill(),i.stroke())}})}.call(this),function(){"use strict";var e=this,t=e.Chart;t.helpers,t.defaults.global.elements.rectangle={backgroundColor:t.defaults.global.defaultColor,borderWidth:0,borderColor:t.defaults.global.defaultColor},t.elements.Rectangle=t.Element.extend({draw:function(){var e=this._chart.ctx,t=this._view,i=t.width/2,a=t.x-i,n=t.x+i,s=t.base-(t.base-t.y),r=t.borderWidth/2;t.borderWidth&&(a+=r,n-=r,s+=r),e.beginPath(),e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,e.lineWidth=t.borderWidth,e.moveTo(a,t.base),e.lineTo(a,s),e.lineTo(n,s),e.lineTo(n,t.base),e.fill(),t.borderWidth&&e.stroke()},height:function(){var e=this._view;return e.base-e.y},inRange:function(e,t){var i=this._view,a=!1;return i&&(a=i.y<i.base?e>=i.x-i.width/2&&e<=i.x+i.width/2&&t>=i.y&&t<=i.base:e>=i.x-i.width/2&&e<=i.x+i.width/2&&t>=i.base&&t<=i.y),a},inLabelRange:function(e){var t=this._view;return t?e>=t.x-t.width/2&&e<=t.x+t.width/2:!1},tooltipPosition:function(){var e=this._view;return e.y<e.base?{x:e.x,y:e.y}:{x:e.x,y:e.base}}})}.call(this),function(){"use strict";var e=this,t=e.Chart;t.helpers,t.Bar=function(e,i){return i.type="bar",new t(e,i)}}.call(this),function(){"use strict";var e=this,t=e.Chart,i=t.helpers,a={hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{template:"(<%= value.x %>, <%= value.y %>)",multiTemplate:"<%if (datasetLabel){%><%=datasetLabel%>: <%}%>(<%= value.x %>, <%= value.y %>)"}};t.Bubble=function(e,n){return n.options=i.configMerge(a,n.options),n.type="bubble",new t(e,n)}}.call(this),function(){"use strict";var e=this,t=e.Chart,i=t.helpers,a={aspectRatio:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i = 0; i < data.datasets[0].data.length; i++){%><li><span style="background-color:<%=data.datasets[0].backgroundColor[i]%>"><%if(data.labels && i < data.labels.length){%><%=data.labels[i]%><%}%></span></li><%}%></ul>'};t.Doughnut=function(e,n){return n.options=i.configMerge(a,n.options),n.type="doughnut",new t(e,n)}}.call(this),function(){"use strict";var e=this,t=e.Chart;t.helpers,t.Line=function(e,i){return i.type="line",new t(e,i)}}.call(this),function(){"use strict";var e=this,t=e.Chart,i=t.helpers,a={aspectRatio:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i = 0; i < data.datasets[0].data.length; i++){%><li><span style="background-color:<%=data.datasets[0].backgroundColor[i]%>"><%if(data.labels && i < data.labels.length){%><%=data.labels[i]%><%}%></span></li><%}%></ul>'};t.PolarArea=function(e,n){return n.options=i.configMerge(a,n.options),n.type="polarArea",new t(e,n)}}.call(this),function(){"use strict";var e=this,t=e.Chart,i=t.helpers,a={aspectRatio:1};t.Radar=function(e,n){return n.options=i.configMerge(a,n.options),n.type="radar",new t(e,n)}}.call(this),function(){"use strict";var e=this,t=e.Chart,i=t.helpers,a={hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-1"}],yAxes:[{type:"linear",position:"left",id:"y-axis-1"}]},tooltips:{template:"(<%= value.x %>, <%= value.y %>)",multiTemplate:"<%if (datasetLabel){%><%=datasetLabel%>: <%}%>(<%= value.x %>, <%= value.y %>)"}};t.Scatter=function(e,n){return n.options=i.configMerge(a,n.options),n.type="line",new t(e,n)}}.call(this);